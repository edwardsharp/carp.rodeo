<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>triphobia mixtape - playlistz</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#000000">
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 16px;
      margin: 0;
      padding: 0;
      background-color: black;
      color: white;
    }
    /* Ensure proper text wrapping */
    .break-words {
      word-wrap: break-word;
      word-break: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }
    /*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-ordinal:initial;--tw-slashed-zero:initial;--tw-numeric-figure:initial;--tw-numeric-spacing:initial;--tw-numeric-fraction:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-300:oklch(80.8% .114 19.571);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-red-900:oklch(39.6% .141 25.723);--color-green-400:oklch(79.2% .209 151.711);--color-fuchsia-300:oklch(83.3% .145 321.434);--color-fuchsia-400:oklch(74% .238 322.16);--color-fuchsia-500:oklch(66.7% .295 322.15);--color-fuchsia-600:oklch(59.1% .293 322.896);--color-fuchsia-700:oklch(51.8% .253 323.949);--color-fuchsia-800:oklch(45.2% .211 324.591);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-sm:24rem;--container-md:28rem;--container-lg:32rem;--container-2xl:42rem;--container-4xl:56rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-6xl:3.75rem;--text-6xl--line-height:1;--font-weight-light:300;--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--tracking-wider:.05em;--leading-relaxed:1.625;--radius-md:.375rem;--radius-lg:.5rem;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--blur-sm:8px;--blur-xl:24px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono);--color-magenta-100:#fae8ff;--color-magenta-200:#f5d0fe;--color-magenta-300:#f0abfc;--color-magenta-400:#e879f9;--color-magenta-500:#d946ef;--color-magenta-600:#c026d3;--color-magenta-700:#a21caf;--color-magenta-800:#86198f;--color-magenta-900:#701a75;--color-magenta-950:#4a044e;--color-dark-100:#1a1a1a;--color-dark-200:#2a2a2a;--color-dark-300:#3a3a3a;--color-dark-400:#4a4a4a}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}*{box-sizing:border-box}body{color:#fff;background-color:#000;margin:0;padding:0;font-family:system-ui,-apple-system,sans-serif}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background-color:#2a2a2a}::-webkit-scrollbar-thumb{background-color:#4a4a4a;border-radius:4px}::-webkit-scrollbar-thumb:hover{background-color:#d946ef}*{scrollbar-width:thin;scrollbar-color:#4a4a4a #2a2a2a}}@layer components{.playlist-button-hover{transition:all .2s ease-out;position:relative;overflow:hidden}.playlist-button-hover:hover{transform:scale(1.02);box-shadow:0 4px 12px #d946ef4d}.playlist-item-hover:hover{transform:translate(2px);box-shadow:-2px 0 8px #d946ef66}.glass{-webkit-backdrop-filter:blur(16px)saturate(180%);background-color:#1a1a1acc;border:1px solid #ffffff20}}@layer utilities{.pointer-events-none{pointer-events:none}.collapse{visibility:collapse}.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.inset-x-0{inset-inline:calc(var(--spacing)*0)}.-top-1{top:calc(var(--spacing)*-1)}.top-0{top:calc(var(--spacing)*0)}.top-1\/2{top:50%}.top-2\.5{top:calc(var(--spacing)*2.5)}.top-4{top:calc(var(--spacing)*4)}.top-6{top:calc(var(--spacing)*6)}.top-\[-7px\]{top:-7px}.top-full{top:100%}.-right-1{right:calc(var(--spacing)*-1)}.right-0{right:calc(var(--spacing)*0)}.right-2{right:calc(var(--spacing)*2)}.right-4{right:calc(var(--spacing)*4)}.right-6{right:calc(var(--spacing)*6)}.right-16{right:calc(var(--spacing)*16)}.right-\[-7px\]{right:-7px}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-4{bottom:calc(var(--spacing)*4)}.bottom-6{bottom:calc(var(--spacing)*6)}.bottom-20{bottom:calc(var(--spacing)*20)}.bottom-\[-7px\]{bottom:-7px}.bottom-full{bottom:100%}.left-0{left:calc(var(--spacing)*0)}.left-1\/2{left:50%}.left-3{left:calc(var(--spacing)*3)}.left-72{left:calc(var(--spacing)*72)}.left-\[-7px\]{left:-7px}.left-\[calc\(100vw-40px\)\]{left:calc(100vw - 40px)}.z-0{z-index:0}.z-1{z-index:1}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.z-51{z-index:51}.z-100{z-index:100}.col-span-1{grid-column:span 1/span 1}.col-span-2{grid-column:span 2/span 2}.col-span-5{grid-column:span 5/span 5}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.m-0{margin:calc(var(--spacing)*0)}.m-auto{margin:auto}.mx-2{margin-inline:calc(var(--spacing)*2)}.mx-4{margin-inline:calc(var(--spacing)*4)}.mx-auto{margin-inline:auto}.my-1{margin-block:calc(var(--spacing)*1)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mr-4{margin-right:calc(var(--spacing)*4)}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.ml-0\.5{margin-left:calc(var(--spacing)*.5)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-3{margin-left:calc(var(--spacing)*3)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-12{margin-left:calc(var(--spacing)*12)}.line-clamp-2{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.aspect-square{aspect-ratio:1}.h-0{height:calc(var(--spacing)*0)}.h-1{height:calc(var(--spacing)*1)}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-32{height:calc(var(--spacing)*32)}.h-48{height:calc(var(--spacing)*48)}.h-full{height:100%}.h-screen{height:100vh}.max-h-64{max-height:calc(var(--spacing)*64)}.max-h-\[90vh\]{max-height:90vh}.max-h-\[95vh\]{max-height:95vh}.max-h-\[calc\(90vh-140px\)\]{max-height:calc(90vh - 140px)}.min-h-0{min-height:calc(var(--spacing)*0)}.min-h-16{min-height:calc(var(--spacing)*16)}.min-h-screen{min-height:100vh}.w-0{width:calc(var(--spacing)*0)}.w-1\.5{width:calc(var(--spacing)*1.5)}.w-1\/2{width:50%}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-3\/4{width:75%}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-15{width:calc(var(--spacing)*15)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-32{width:calc(var(--spacing)*32)}.w-48{width:calc(var(--spacing)*48)}.w-64{width:calc(var(--spacing)*64)}.w-70{width:calc(var(--spacing)*70)}.w-72{width:calc(var(--spacing)*72)}.w-80{width:calc(var(--spacing)*80)}.w-full{width:100%}.w-screen{width:100vw}.max-w-2xl{max-width:var(--container-2xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-48{max-width:calc(var(--spacing)*48)}.max-w-80{max-width:calc(var(--spacing)*80)}.max-w-96{max-width:calc(var(--spacing)*96)}.max-w-\[95vw\]{max-width:95vw}.max-w-full{max-width:100%}.max-w-lg{max-width:var(--container-lg)}.max-w-md{max-width:var(--container-md)}.max-w-sm{max-width:var(--container-sm)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-8{min-width:calc(var(--spacing)*8)}.min-w-10{min-width:calc(var(--spacing)*10)}.min-w-24{min-width:calc(var(--spacing)*24)}.min-w-48{min-width:calc(var(--spacing)*48)}.min-w-64{min-width:calc(var(--spacing)*64)}.min-w-72{min-width:calc(var(--spacing)*72)}.min-w-full{min-width:100%}.flex-1{flex:1}.flex-shrink{flex-shrink:1}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.-translate-x-1\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-full{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-\[-100\%\]{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-rotate-90{rotate:-90deg}.rotate-0{rotate:none}.rotate-45{rotate:45deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize{resize:both}.resize-none{resize:none}.appearance-none{appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-1{gap:calc(var(--spacing)*1)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-6{gap:calc(var(--spacing)*6)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-1>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*1)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-3>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*3)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-6>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*6)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-x-reverse)))}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-t-0{border-top-style:var(--tw-border-style);border-top-width:0}.border-t-2{border-top-style:var(--tw-border-style);border-top-width:2px}.border-t-4{border-top-style:var(--tw-border-style);border-top-width:4px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-r-0{border-right-style:var(--tw-border-style);border-right-width:0}.border-r-4{border-right-style:var(--tw-border-style);border-right-width:4px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-0{border-bottom-style:var(--tw-border-style);border-bottom-width:0}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-0{border-left-style:var(--tw-border-style);border-left-width:0}.border-l-4{border-left-style:var(--tw-border-style);border-left-width:4px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-none{--tw-border-style:none;border-style:none}.border-dark-300{border-color:var(--color-dark-300)}.border-dark-400{border-color:var(--color-dark-400)}.border-gray-300{border-color:var(--color-gray-300)}.border-gray-400{border-color:var(--color-gray-400)}.border-gray-500{border-color:var(--color-gray-500)}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.border-gray-800\/50{border-color:#1e293980}@supports (color:color-mix(in lab,red,red)){.border-gray-800\/50{border-color:color-mix(in oklab,var(--color-gray-800)50%,transparent)}}.border-magenta-200{border-color:var(--color-magenta-200)}.border-magenta-400{border-color:var(--color-magenta-400)}.border-magenta-400\/50{border-color:#e879f980}@supports (color:color-mix(in lab,red,red)){.border-magenta-400\/50{border-color:color-mix(in oklab,var(--color-magenta-400)50%,transparent)}}.border-magenta-500{border-color:var(--color-magenta-500)}.border-magenta-600\/30{border-color:#c026d34d}@supports (color:color-mix(in lab,red,red)){.border-magenta-600\/30{border-color:color-mix(in oklab,var(--color-magenta-600)30%,transparent)}}.border-magenta-800\/30{border-color:#86198f4d}@supports (color:color-mix(in lab,red,red)){.border-magenta-800\/30{border-color:color-mix(in oklab,var(--color-magenta-800)30%,transparent)}}.border-red-500{border-color:var(--color-red-500)}.border-red-500\/20{border-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.border-red-500\/20{border-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.border-red-500\/30{border-color:#fb2c364d}@supports (color:color-mix(in lab,red,red)){.border-red-500\/30{border-color:color-mix(in oklab,var(--color-red-500)30%,transparent)}}.border-transparent{border-color:#0000}.border-white{border-color:var(--color-white)}.border-white\/10{border-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.border-white\/10{border-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.border-white\/20{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.border-white\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.border-white\/30{border-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.border-white\/30{border-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.border-t-magenta-800\/30{border-top-color:#86198f4d}@supports (color:color-mix(in lab,red,red)){.border-t-magenta-800\/30{border-top-color:color-mix(in oklab,var(--color-magenta-800)30%,transparent)}}.border-t-transparent{border-top-color:#0000}.border-t-white{border-top-color:var(--color-white)}.border-r-transparent{border-right-color:#0000}.border-l-transparent{border-left-color:#0000}.bg-black{background-color:var(--color-black)}.bg-black\/20{background-color:#0003}@supports (color:color-mix(in lab,red,red)){.bg-black\/20{background-color:color-mix(in oklab,var(--color-black)20%,transparent)}}.bg-black\/30{background-color:#0000004d}@supports (color:color-mix(in lab,red,red)){.bg-black\/30{background-color:color-mix(in oklab,var(--color-black)30%,transparent)}}.bg-black\/40{background-color:#0006}@supports (color:color-mix(in lab,red,red)){.bg-black\/40{background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.bg-black\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-black\/70{background-color:#000000b3}@supports (color:color-mix(in lab,red,red)){.bg-black\/70{background-color:color-mix(in oklab,var(--color-black)70%,transparent)}}.bg-black\/80{background-color:#000c}@supports (color:color-mix(in lab,red,red)){.bg-black\/80{background-color:color-mix(in oklab,var(--color-black)80%,transparent)}}.bg-black\/90{background-color:#000000e6}@supports (color:color-mix(in lab,red,red)){.bg-black\/90{background-color:color-mix(in oklab,var(--color-black)90%,transparent)}}.bg-black\/95{background-color:#000000f2}@supports (color:color-mix(in lab,red,red)){.bg-black\/95{background-color:color-mix(in oklab,var(--color-black)95%,transparent)}}.bg-dark-100{background-color:var(--color-dark-100)}.bg-dark-200{background-color:var(--color-dark-200)}.bg-dark-300{background-color:var(--color-dark-300)}.bg-fuchsia-600{background-color:var(--color-fuchsia-600)}.bg-fuchsia-800\/30{background-color:#8a01944d}@supports (color:color-mix(in lab,red,red)){.bg-fuchsia-800\/30{background-color:color-mix(in oklab,var(--color-fuchsia-800)30%,transparent)}}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-600\/50{background-color:#4a556580}@supports (color:color-mix(in lab,red,red)){.bg-gray-600\/50{background-color:color-mix(in oklab,var(--color-gray-600)50%,transparent)}}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-700\/30{background-color:#3641534d}@supports (color:color-mix(in lab,red,red)){.bg-gray-700\/30{background-color:color-mix(in oklab,var(--color-gray-700)30%,transparent)}}.bg-gray-700\/50{background-color:#36415380}@supports (color:color-mix(in lab,red,red)){.bg-gray-700\/50{background-color:color-mix(in oklab,var(--color-gray-700)50%,transparent)}}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-800\/30{background-color:#1e29394d}@supports (color:color-mix(in lab,red,red)){.bg-gray-800\/30{background-color:color-mix(in oklab,var(--color-gray-800)30%,transparent)}}.bg-gray-800\/50{background-color:#1e293980}@supports (color:color-mix(in lab,red,red)){.bg-gray-800\/50{background-color:color-mix(in oklab,var(--color-gray-800)50%,transparent)}}.bg-gray-900{background-color:var(--color-gray-900)}.bg-gray-900\/50{background-color:#10182880}@supports (color:color-mix(in lab,red,red)){.bg-gray-900\/50{background-color:color-mix(in oklab,var(--color-gray-900)50%,transparent)}}.bg-gray-900\/95{background-color:#101828f2}@supports (color:color-mix(in lab,red,red)){.bg-gray-900\/95{background-color:color-mix(in oklab,var(--color-gray-900)95%,transparent)}}.bg-magenta-400{background-color:var(--color-magenta-400)}.bg-magenta-500{background-color:var(--color-magenta-500)}.bg-magenta-500\/30{background-color:#d946ef4d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-500\/30{background-color:color-mix(in oklab,var(--color-magenta-500)30%,transparent)}}.bg-magenta-600{background-color:var(--color-magenta-600)}.bg-magenta-600\/10{background-color:#c026d31a}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/10{background-color:color-mix(in oklab,var(--color-magenta-600)10%,transparent)}}.bg-magenta-600\/20{background-color:#c026d333}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/20{background-color:color-mix(in oklab,var(--color-magenta-600)20%,transparent)}}.bg-magenta-600\/30{background-color:#c026d34d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/30{background-color:color-mix(in oklab,var(--color-magenta-600)30%,transparent)}}.bg-magenta-600\/40{background-color:#c026d366}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/40{background-color:color-mix(in oklab,var(--color-magenta-600)40%,transparent)}}.bg-magenta-700{background-color:var(--color-magenta-700)}.bg-magenta-800\/30{background-color:#86198f4d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-800\/30{background-color:color-mix(in oklab,var(--color-magenta-800)30%,transparent)}}.bg-magenta-800\/50{background-color:#86198f80}@supports (color:color-mix(in lab,red,red)){.bg-magenta-800\/50{background-color:color-mix(in oklab,var(--color-magenta-800)50%,transparent)}}.bg-magenta-900\/50{background-color:#701a7580}@supports (color:color-mix(in lab,red,red)){.bg-magenta-900\/50{background-color:color-mix(in oklab,var(--color-magenta-900)50%,transparent)}}.bg-magenta-950\/30{background-color:#4a044e4d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-950\/30{background-color:color-mix(in oklab,var(--color-magenta-950)30%,transparent)}}.bg-magenta-950\/50{background-color:#4a044e80}@supports (color:color-mix(in lab,red,red)){.bg-magenta-950\/50{background-color:color-mix(in oklab,var(--color-magenta-950)50%,transparent)}}.bg-red-500{background-color:var(--color-red-500)}.bg-red-500\/10{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.bg-red-500\/10{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.bg-red-600{background-color:var(--color-red-600)}.bg-red-600\/50{background-color:#e4001480}@supports (color:color-mix(in lab,red,red)){.bg-red-600\/50{background-color:color-mix(in oklab,var(--color-red-600)50%,transparent)}}.bg-red-800{background-color:var(--color-red-800)}.bg-red-900{background-color:var(--color-red-900)}.bg-red-900\/20{background-color:#82181a33}@supports (color:color-mix(in lab,red,red)){.bg-red-900\/20{background-color:color-mix(in oklab,var(--color-red-900)20%,transparent)}}.bg-transparent{background-color:#0000}.bg-white\/5{background-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.bg-white\/5{background-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.bg-white\/10{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.bg-white\/10{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.bg-white\/20{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.bg-white\/20{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-none{background-image:none}.from-gray-600{--tw-gradient-from:var(--color-gray-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-magenta-500{--tw-gradient-from:var(--color-magenta-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-magenta-800{--tw-gradient-from:var(--color-magenta-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-transparent{--tw-gradient-from:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-gray-700{--tw-gradient-to:var(--color-gray-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-magenta-600{--tw-gradient-to:var(--color-magenta-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-magenta-900{--tw-gradient-to:var(--color-magenta-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.bg-cover{background-size:cover}.bg-top{background-position:top}.bg-no-repeat{background-repeat:no-repeat}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-1{padding:calc(var(--spacing)*1)}.p-1\.5{padding:calc(var(--spacing)*1.5)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.p-12{padding:calc(var(--spacing)*12)}.p-20{padding:calc(var(--spacing)*20)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-8{padding-inline:calc(var(--spacing)*8)}.py-0\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.py-16{padding-block:calc(var(--spacing)*16)}.pt-4{padding-top:calc(var(--spacing)*4)}.pt-8{padding-top:calc(var(--spacing)*8)}.pr-3{padding-right:calc(var(--spacing)*3)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.pb-20{padding-bottom:calc(var(--spacing)*20)}.pl-10{padding-left:calc(var(--spacing)*10)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.font-sans{font-family:var(--font-sans)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-6xl{font-size:var(--text-6xl);line-height:var(--tw-leading,var(--text-6xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\[10px\]{font-size:10px}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-light{--tw-font-weight:var(--font-weight-light);font-weight:var(--font-weight-light)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.whitespace-nowrap{white-space:nowrap}.text-black{color:var(--color-black)}.text-fuchsia-400{color:var(--color-fuchsia-400)}.text-gray-200{color:var(--color-gray-200)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-magenta-100{color:var(--color-magenta-100)}.text-magenta-200{color:var(--color-magenta-200)}.text-magenta-300{color:var(--color-magenta-300)}.text-magenta-400{color:var(--color-magenta-400)}.text-magenta-500{color:var(--color-magenta-500)}.text-red-300{color:var(--color-red-300)}.text-red-400{color:var(--color-red-400)}.text-white{color:var(--color-white)}.text-white\/30{color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.text-white\/30{color:color-mix(in oklab,var(--color-white)30%,transparent)}}.text-white\/50{color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.text-white\/50{color:color-mix(in oklab,var(--color-white)50%,transparent)}}.text-white\/60{color:#fff9}@supports (color:color-mix(in lab,red,red)){.text-white\/60{color:color-mix(in oklab,var(--color-white)60%,transparent)}}.text-white\/70{color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.text-white\/70{color:color-mix(in oklab,var(--color-white)70%,transparent)}}.text-white\/90{color:#ffffffe6}@supports (color:color-mix(in lab,red,red)){.text-white\/90{color:color-mix(in oklab,var(--color-white)90%,transparent)}}.lowercase{text-transform:lowercase}.uppercase{text-transform:uppercase}.italic{font-style:italic}.font-stretch-expanded{font-stretch:125%}.tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.placeholder-gray-400::placeholder{color:var(--color-gray-400)}.placeholder-gray-500::placeholder{color:var(--color-gray-500)}.opacity-0{opacity:0}.opacity-5{opacity:.05}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-100{opacity:1}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-xl{--tw-backdrop-blur:blur(var(--blur-xl));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-100{--tw-duration:.1s;transition-duration:.1s}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-500{--tw-duration:.5s;transition-duration:.5s}.duration-600{--tw-duration:.6s;transition-duration:.6s}.duration-1000{--tw-duration:1s;transition-duration:1s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.outline-none{--tw-outline-style:none;outline-style:none}@media (hover:hover){.group-hover\:block:is(:where(.group):hover *){display:block}.group-hover\:hidden:is(:where(.group):hover *){display:none}.group-hover\:translate-x-0:is(:where(.group):hover *){--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.group-hover\:scale-105:is(:where(.group):hover *){--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.group-hover\:text-magenta-300:is(:where(.group):hover *){color:var(--color-magenta-300)}.group-hover\:text-transparent:is(:where(.group):hover *){color:#0000}.group-hover\:text-white:is(:where(.group):hover *){color:var(--color-white)}.group-hover\:opacity-100:is(:where(.group):hover *){opacity:1}}.last\:border-b-0:last-child{border-bottom-style:var(--tw-border-style);border-bottom-width:0}@media (hover:hover){.hover\:h-1\.5:hover{height:calc(var(--spacing)*1.5)}.hover\:h-2:hover{height:calc(var(--spacing)*2)}.hover\:w-2:hover{width:calc(var(--spacing)*2)}.hover\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\:scale-110:hover{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\:border-gray-400:hover{border-color:var(--color-gray-400)}.hover\:border-magenta-400:hover{border-color:var(--color-magenta-400)}.hover\:border-red-400:hover{border-color:var(--color-red-400)}.hover\:border-red-600:hover{border-color:var(--color-red-600)}.hover\:bg-black\/70:hover{background-color:#000000b3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-black\/70:hover{background-color:color-mix(in oklab,var(--color-black)70%,transparent)}}.hover\:bg-dark-200:hover{background-color:var(--color-dark-200)}.hover\:bg-dark-300:hover{background-color:var(--color-dark-300)}.hover\:bg-fuchsia-700:hover{background-color:var(--color-fuchsia-700)}.hover\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\:bg-gray-600:hover{background-color:var(--color-gray-600)}.hover\:bg-gray-600\/70:hover{background-color:#4a5565b3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-gray-600\/70:hover{background-color:color-mix(in oklab,var(--color-gray-600)70%,transparent)}}.hover\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\:bg-gray-800:hover{background-color:var(--color-gray-800)}.hover\:bg-gray-900:hover{background-color:var(--color-gray-900)}.hover\:bg-magenta-500:hover{background-color:var(--color-magenta-500)}.hover\:bg-magenta-600:hover{background-color:var(--color-magenta-600)}.hover\:bg-magenta-600\/20:hover{background-color:#c026d333}@supports (color:color-mix(in lab,red,red)){.hover\:bg-magenta-600\/20:hover{background-color:color-mix(in oklab,var(--color-magenta-600)20%,transparent)}}.hover\:bg-magenta-600\/30:hover{background-color:#c026d34d}@supports (color:color-mix(in lab,red,red)){.hover\:bg-magenta-600\/30:hover{background-color:color-mix(in oklab,var(--color-magenta-600)30%,transparent)}}.hover\:bg-magenta-600\/50:hover{background-color:#c026d380}@supports (color:color-mix(in lab,red,red)){.hover\:bg-magenta-600\/50:hover{background-color:color-mix(in oklab,var(--color-magenta-600)50%,transparent)}}.hover\:bg-magenta-700:hover{background-color:var(--color-magenta-700)}.hover\:bg-magenta-800:hover{background-color:var(--color-magenta-800)}.hover\:bg-red-500\/10:hover{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/10:hover{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.hover\:bg-red-500\/20:hover{background-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/20:hover{background-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.hover\:bg-red-500\/80:hover{background-color:#fb2c36cc}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/80:hover{background-color:color-mix(in oklab,var(--color-red-500)80%,transparent)}}.hover\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\:bg-red-600\/30:hover{background-color:#e400144d}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-600\/30:hover{background-color:color-mix(in oklab,var(--color-red-600)30%,transparent)}}.hover\:bg-red-600\/70:hover{background-color:#e40014b3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-600\/70:hover{background-color:color-mix(in oklab,var(--color-red-600)70%,transparent)}}.hover\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\:bg-red-900:hover{background-color:var(--color-red-900)}.hover\:bg-white\/10:hover{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/10:hover{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.hover\:bg-white\/20:hover{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/20:hover{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.hover\:text-fuchsia-300:hover{color:var(--color-fuchsia-300)}.hover\:text-gray-200:hover{color:var(--color-gray-200)}.hover\:text-gray-300:hover{color:var(--color-gray-300)}.hover\:text-green-400:hover{color:var(--color-green-400)}.hover\:text-magenta-100:hover{color:var(--color-magenta-100)}.hover\:text-magenta-300:hover{color:var(--color-magenta-300)}.hover\:text-magenta-400:hover{color:var(--color-magenta-400)}.hover\:text-magenta-500:hover{color:var(--color-magenta-500)}.hover\:text-red-300:hover{color:var(--color-red-300)}.hover\:text-red-400:hover{color:var(--color-red-400)}.hover\:text-white:hover{color:var(--color-white)}.hover\:opacity-100:hover{opacity:1}.hover\:ring-2:hover{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\:ring-magenta-500:hover{--tw-ring-color:var(--color-magenta-500)}}.focus\:border-magenta-300:focus{border-color:var(--color-magenta-300)}.focus\:border-magenta-400:focus{border-color:var(--color-magenta-400)}.focus\:border-magenta-500:focus{border-color:var(--color-magenta-500)}.focus\:border-transparent:focus{border-color:#0000}.focus\:bg-gray-700:focus{background-color:var(--color-gray-700)}.focus\:bg-gray-800:focus{background-color:var(--color-gray-800)}.focus\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-fuchsia-500:focus{--tw-ring-color:var(--color-fuchsia-500)}.focus\:ring-gray-500:focus{--tw-ring-color:var(--color-gray-500)}.focus\:ring-magenta-500:focus{--tw-ring-color:var(--color-magenta-500)}.focus\:ring-offset-2:focus{--tw-ring-offset-width:2px;--tw-ring-offset-shadow:var(--tw-ring-inset,)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color)}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}.active\:cursor-grabbing:active{cursor:grabbing}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:bg-gray-400:disabled{background-color:var(--color-gray-400)}.disabled\:bg-gray-600:disabled{background-color:var(--color-gray-600)}.disabled\:bg-magenta-400:disabled{background-color:var(--color-magenta-400)}.disabled\:bg-magenta-800:disabled{background-color:var(--color-magenta-800)}.disabled\:bg-red-400:disabled{background-color:var(--color-red-400)}.disabled\:text-gray-600:disabled{color:var(--color-gray-600)}.disabled\:opacity-40:disabled{opacity:.4}.disabled\:opacity-50:disabled{opacity:.5}@media (hover:hover){.disabled\:hover\:scale-100:disabled:hover{--tw-scale-x:100%;--tw-scale-y:100%;--tw-scale-z:100%;scale:var(--tw-scale-x)var(--tw-scale-y)}}@media (min-width:40rem){.sm\:inline{display:inline}}@media (min-width:48rem){.md\:block{display:block}.md\:flex{display:flex}.md\:grid{display:grid}.md\:hidden{display:none}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:p-4{padding:calc(var(--spacing)*4)}.md\:py-2{padding-block:calc(var(--spacing)*2)}}@media (min-width:64rem){.lg\:flex{display:flex}.lg\:hidden{display:none}.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width:80rem){.xl\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}}@media (min-width:96rem){.\32xl\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}}.\[\&\>\*\:nth-child\(1\)\]\:col-span-3>:first-child{grid-column:span 3/span 3}.\[\&\>\*\:nth-child\(1\)\]\:col-span-4>:first-child{grid-column:span 4/span 4}.\[\&\>\*\:nth-child\(2\)\]\:col-span-6>:nth-child(2){grid-column:span 6/span 6}.\[\&\>\*\:nth-child\(2\)\]\:col-span-8>:nth-child(2){grid-column:span 8/span 8}.\[\&\>\*\:nth-child\(2\)\]\:col-span-9>:nth-child(2){grid-column:span 9/span 9}.\[\&\>\*\:nth-child\(3\)\]\:col-span-3>:nth-child(3){grid-column:span 3/span 3}.no-select{-webkit-user-select:none;user-select:none}.focus-outline:focus{outline:none;box-shadow:0 0 0 2px #d946ef80}}.loading-shimmer{background:linear-gradient(90deg,#1a1a1a 25%,#2a2a2a,#1a1a1a 75%) 0 0/200% 100%;animation:1.5s infinite shimmer}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width:900px){.mobile-full-width{width:100%!important}.mobile-hidden{display:none!important}.mobile-flex-col{flex-direction:column!important}.mobile-text-center{text-align:center!important}.mobile-gap-2{gap:.5rem!important}.mobile-p-4{padding:1rem!important}}.dynamic-background{will-change:background-image,filter;background-position:50%;background-repeat:no-repeat;background-size:cover;background-attachment:fixed;transition:all 1s cubic-bezier(.4,0,.2,1)}.dynamic-background:before{content:"";filter:blur(12px)saturate(1.2);z-index:-1;position:absolute;inset:-20px}.sidebar-collapse-enter{animation:.3s cubic-bezier(.4,0,.2,1) slideInLeft}.sidebar-collapse-exit{animation:.3s cubic-bezier(.4,0,.2,1) slideOutLeft}@keyframes slideInLeft{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}@keyframes slideOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-100%)}}.bg-fade-enter{animation:1s ease-out fadeIn}.bg-fade-exit{animation:.5s ease-out fadeOut}@keyframes fadeIn{0%{opacity:0;filter:blur(20px)brightness(.1)}to{opacity:.2;filter:blur(8px)brightness(.3)}}@keyframes fadeOut{0%{opacity:.2;filter:blur(8px)brightness(.3)}to{opacity:0;filter:blur(20px)brightness(.1)}}@media (max-width:900px){.touch-target{min-width:44px!important;min-height:44px!important}.mobile-text-lg{font-size:1.125rem!important}.mobile-text-base{font-size:1rem!important}.mobile-p-6{padding:1.5rem!important}.mobile-px-4{padding-left:1rem!important;padding-right:1rem!important}.mobile-overlay-buttons{-webkit-backdrop-filter:blur(8px)!important;backdrop-filter:blur(8px)!important;background:#000000e6!important;border-radius:12px!important;padding:8px!important}}.seek-slider::-webkit-slider-thumb{-webkit-appearance:none;cursor:pointer;background-color:#000;background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23ec4899'/%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:contain;border:none;border-radius:3px;outline:none;width:20px;height:20px}.seek-slider::-webkit-slider-thumb:hover{background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23f472b6'/%3E%3C/svg%3E");transform:scale(1.1)}.seek-slider::-moz-range-thumb{cursor:pointer;background-color:#000;background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23ec4899'/%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:contain;border:none;border-radius:3px;outline:none;width:20px;height:20px}.seek-slider::-moz-range-thumb:hover{background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23f472b6'/%3E%3C/svg%3E");transform:scale(1.1)}.seek-slider:focus{outline:none}.seek-slider:focus::-webkit-slider-thumb{outline:none}.seek-slider:focus::-moz-range-thumb{outline:none}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-ordinal{syntax:"*";inherits:false}@property --tw-slashed-zero{syntax:"*";inherits:false}@property --tw-numeric-figure{syntax:"*";inherits:false}@property --tw-numeric-spacing{syntax:"*";inherits:false}@property --tw-numeric-fraction{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:.5}}
/*$vite$:1*/
  </style>

    <!-- Open Graph meta tags for rich link previews -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="triphobia mixtape" />
    <meta property="og:description" content="+ ppl we know && <3" />
    <meta property="og:site_name" content="playlistz" />
    <meta property="og:image" content="/data/playlist-cover.jpg" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />

    <!-- standard meta tags -->
    <meta name="description" content="+ ppl we know && <3" />

    <script>
      // Flag to indicate this is a standalone version
      window.STANDALONE_MODE = true;

      // Load playlist data from data/ directory instead of embedding
      async function loadPlaylistData() {
        try {
          const dataResponse = await fetch('data/playlist.json');
          if (!dataResponse.ok) {
            throw new Error('Failed to load playlist data: ' + dataResponse.status);
          }
          return await dataResponse.json();
        } catch (error) {
          console.error('Error loading playlist data:', error);
          throw error;
        }
      }

      // Wait for the function to be available and then initialize
      async function waitForInitialization() {
        let attempts = 0;
        const maxAttempts = 50; // Wait up to 5 seconds

        while (attempts < maxAttempts) {
          if (window.initializeStandalonePlaylist) {
            try {
              const loadedPlaylistData = await loadPlaylistData();

              window.initializeStandalonePlaylist(loadedPlaylistData);
              return; // Success, exit
            } catch (error) {
              console.error('Failed to initialize playlist:', error);
              showError('Failed to initialize playlist: ' + error.message);
              return;
            }
          }

          // Wait 100ms before trying again
          await new Promise(resolve => setTimeout(resolve, 100));
          attempts++;
        }

        // Function never became available
        console.error('initializeStandalonePlaylist function not found after waiting');
        showError('Playlist initialization function not found. The app may not have loaded properly.');
      }

      // Start waiting after DOM is loaded
      window.addEventListener('DOMContentLoaded', waitForInitialization);

      // Show dismissable error message
      function showError(message) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(220, 20, 60, 0.95); color: white; padding: 15px 25px; border-radius: 8px; z-index: 10000; text-align: center; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);';
        errorDiv.innerHTML = '<div style="margin-bottom: 10px;">' + message + '</div><button onclick="this.parentElement.remove()" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">Dismiss</button>';
        document.body.appendChild(errorDiv);
      }
    </script>
  
</head>
<body>
  <freqhole-playlistz ></freqhole-playlistz>
  <script type="module">
const Zr=(t,n)=>t===n,Hr=Symbol("solid-track"),Be={equals:Zr};let dr=gr;const Xt=1,Re=2,ur={owned:null,cleanups:null,context:null,owner:null},Je={};var $t=null;let Xe=null,Vr=null,kt=null,Lt=null,Yt=null,Ve=0;function Le(t,n){const e=kt,s=$t,l=t.length===0,a=n===void 0?s:n,i=l?ur:{owned:null,cleanups:null,context:a?a.context:null,owner:a},r=l?t:()=>t(()=>Jt(()=>Se(i)));$t=i,kt=null;try{return ee(r,!0)}finally{kt=e,$t=s}}function rt(t,n){n=n?Object.assign({},Be,n):Be;const e={value:t,observers:null,observerSlots:null,comparator:n.equals||void 0},s=l=>(typeof l=="function"&&(l=l(e.value)),hr(e,l));return[fr.bind(e),s]}function qr(t,n,e){const s=qe(t,n,!0,Xt);be(s)}function yt(t,n,e){const s=qe(t,n,!1,Xt);be(s)}function Ht(t,n,e){dr=ti;const s=qe(t,n,!1,Xt);s.user=!0,Yt?Yt.push(s):be(s)}function ye(t,n,e){e=e?Object.assign({},Be,e):Be;const s=qe(t,n,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=e.equals||void 0,be(s),fr.bind(s)}function Gr(t){return t&&typeof t=="object"&&"then"in t}function Kr(t,n,e){let s,l,a;typeof n=="function"?(s=t,l=n,a={}):(s=!0,l=t,a=n||{});let i=null,r=Je,c=!1,h="initialValue"in a,p=typeof s=="function"&&ye(s);const g=new Set,[v,u]=(a.storage||rt)(a.initialValue),[w,f]=rt(void 0),[y,m]=rt(void 0,{equals:!1}),[b,S]=rt(h?"ready":"unresolved");function A(z,D,J,x){return i===z&&(i=null,x!==void 0&&(h=!0),(z===r||D===r)&&a.onHydrated&&queueMicrotask(()=>a.onHydrated(x,{value:D})),r=Je,C(D,J)),D}function C(z,D){ee(()=>{D===void 0&&u(()=>z),S(D!==void 0?"errored":h?"ready":"unresolved"),f(D);for(const J of g.keys())J.decrement();g.clear()},!1)}function O(){const z=Jr,D=v(),J=w();if(J!==void 0&&!i)throw J;return kt&&kt.user,D}function E(z=!0){if(z!==!1&&c)return;c=!1;const D=p?p():s;if(D==null||D===!1){A(i,Jt(v));return}let J;const x=r!==Je?r:Jt(()=>{try{return l(D,{value:v(),refetching:z})}catch(L){J=L}});if(J!==void 0){A(i,void 0,Pe(J),D);return}else if(!Gr(x))return A(i,x,void 0,D),x;return i=x,"v"in x?(x.s===1?A(i,x.v,void 0,D):A(i,void 0,Pe(x.v),D),x):(c=!0,queueMicrotask(()=>c=!1),ee(()=>{S(h?"refreshing":"pending"),m()},!1),x.then(L=>A(x,L,void 0,D),L=>A(x,void 0,Pe(L),D)))}Object.defineProperties(O,{state:{get:()=>b()},error:{get:()=>w()},loading:{get(){const z=b();return z==="pending"||z==="refreshing"}},latest:{get(){if(!h)return O();const z=w();if(z&&!i)throw z;return v()}}});let j=$t;return p?qr(()=>(j=$t,E(!1))):E(!1),[O,{refetch:z=>Yr(j,()=>E(z)),mutate:u}]}function Jt(t){if(kt===null)return t();const n=kt;kt=null;try{return t()}finally{kt=n}}function ve(t){Ht(()=>Jt(t))}function te(t){return $t===null||($t.cleanups===null?$t.cleanups=[t]:$t.cleanups.push(t)),t}function Yr(t,n){const e=$t,s=kt;$t=t,kt=null;try{return ee(n,!0)}catch(l){hn(l)}finally{$t=e,kt=s}}const[to,eo]=rt(!1);let Jr;function fr(){if(this.sources&&this.state)if(this.state===Xt)be(this);else{const t=Lt;Lt=null,ee(()=>je(this),!1),Lt=t}if(kt){const t=this.observers?this.observers.length:0;kt.sources?(kt.sources.push(this),kt.sourceSlots.push(t)):(kt.sources=[this],kt.sourceSlots=[t]),this.observers?(this.observers.push(kt),this.observerSlots.push(kt.sources.length-1)):(this.observers=[kt],this.observerSlots=[kt.sources.length-1])}return this.value}function hr(t,n,e){let s=t.value;return(!t.comparator||!t.comparator(s,n))&&(t.value=n,t.observers&&t.observers.length&&ee(()=>{for(let l=0;l<t.observers.length;l+=1){const a=t.observers[l],i=Xe&&Xe.running;i&&Xe.disposed.has(a),(i?!a.tState:!a.state)&&(a.pure?Lt.push(a):Yt.push(a),a.observers&&mr(a)),i||(a.state=Xt)}if(Lt.length>1e6)throw Lt=[],new Error},!1)),n}function be(t){if(!t.fn)return;Se(t);const n=Ve;Xr(t,t.value,n)}function Xr(t,n,e){let s;const l=$t,a=kt;kt=$t=t;try{s=t.fn(n)}catch(i){return t.pure&&(t.state=Xt,t.owned&&t.owned.forEach(Se),t.owned=null),t.updatedAt=e+1,hn(i)}finally{kt=a,$t=l}(!t.updatedAt||t.updatedAt<=e)&&(t.updatedAt!=null&&"observers"in t?hr(t,s):t.value=s,t.updatedAt=e)}function qe(t,n,e,s=Xt,l){const a={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:$t,context:$t?$t.context:null,pure:e};return $t===null||$t!==ur&&($t.owned?$t.owned.push(a):$t.owned=[a]),a}function Fe(t){if(t.state===0)return;if(t.state===Re)return je(t);if(t.suspense&&Jt(t.suspense.inFallback))return t.suspense.effects.push(t);const n=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Ve);)t.state&&n.push(t);for(let e=n.length-1;e>=0;e--)if(t=n[e],t.state===Xt)be(t);else if(t.state===Re){const s=Lt;Lt=null,ee(()=>je(t,n[0]),!1),Lt=s}}function ee(t,n){if(Lt)return t();let e=!1;n||(Lt=[]),Yt?e=!0:Yt=[],Ve++;try{const s=t();return Qr(e),s}catch(s){e||(Yt=null),Lt=null,hn(s)}}function Qr(t){if(Lt&&(gr(Lt),Lt=null),t)return;const n=Yt;Yt=null,n.length&&ee(()=>dr(n),!1)}function gr(t){for(let n=0;n<t.length;n++)Fe(t[n])}function ti(t){let n,e=0;for(n=0;n<t.length;n++){const s=t[n];s.user?t[e++]=s:Fe(s)}for(n=0;n<e;n++)Fe(t[n])}function je(t,n){t.state=0;for(let e=0;e<t.sources.length;e+=1){const s=t.sources[e];if(s.sources){const l=s.state;l===Xt?s!==n&&(!s.updatedAt||s.updatedAt<Ve)&&Fe(s):l===Re&&je(s,n)}}}function mr(t){for(let n=0;n<t.observers.length;n+=1){const e=t.observers[n];e.state||(e.state=Re,e.pure?Lt.push(e):Yt.push(e),e.observers&&mr(e))}}function Se(t){let n;if(t.sources)for(;t.sources.length;){const e=t.sources.pop(),s=t.sourceSlots.pop(),l=e.observers;if(l&&l.length){const a=l.pop(),i=e.observerSlots.pop();s<l.length&&(a.sourceSlots[i]=s,l[s]=a,e.observerSlots[s]=i)}}if(t.tOwned){for(n=t.tOwned.length-1;n>=0;n--)Se(t.tOwned[n]);delete t.tOwned}if(t.owned){for(n=t.owned.length-1;n>=0;n--)Se(t.owned[n]);t.owned=null}if(t.cleanups){for(n=t.cleanups.length-1;n>=0;n--)t.cleanups[n]();t.cleanups=null}t.state=0}function Pe(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function hn(t,n=$t){throw Pe(t)}const ei=Symbol("fallback");function On(t){for(let n=0;n<t.length;n++)t[n]()}function ni(t,n,e={}){let s=[],l=[],a=[],i=0,r=n.length>1?[]:null;return te(()=>On(a)),()=>{let c=t()||[],h=c.length,p,g;return c[Hr],Jt(()=>{let u,w,f,y,m,b,S,A,C;if(h===0)i!==0&&(On(a),a=[],s=[],l=[],i=0,r&&(r=[])),e.fallback&&(s=[ei],l[0]=Le(O=>(a[0]=O,e.fallback())),i=1);else if(i===0){for(l=new Array(h),g=0;g<h;g++)s[g]=c[g],l[g]=Le(v);i=h}else{for(f=new Array(h),y=new Array(h),r&&(m=new Array(h)),b=0,S=Math.min(i,h);b<S&&s[b]===c[b];b++);for(S=i-1,A=h-1;S>=b&&A>=b&&s[S]===c[A];S--,A--)f[A]=l[S],y[A]=a[S],r&&(m[A]=r[S]);for(u=new Map,w=new Array(A+1),g=A;g>=b;g--)C=c[g],p=u.get(C),w[g]=p===void 0?-1:p,u.set(C,g);for(p=b;p<=S;p++)C=s[p],g=u.get(C),g!==void 0&&g!==-1?(f[g]=l[p],y[g]=a[p],r&&(m[g]=r[p]),g=w[g],u.set(C,g)):a[p]();for(g=b;g<h;g++)g in f?(l[g]=f[g],a[g]=y[g],r&&(r[g]=m[g],r[g](g))):l[g]=Le(v);l=l.slice(0,i=h),s=c.slice(0)}return l});function v(u){if(a[g]=u,r){const[w,f]=rt(g);return r[g]=f,n(c[g],w)}return n(c[g])}}}function st(t,n){return Jt(()=>t(n||{}))}const ri=t=>`Stale read from <${t}>.`;function pr(t){const n="fallback"in t&&{fallback:()=>t.fallback};return ye(ni(()=>t.each,t.children,n||void 0))}function ft(t){const n=t.keyed,e=ye(()=>t.when,void 0,void 0),s=n?e:ye(e,void 0,{equals:(l,a)=>!l==!a});return ye(()=>{const l=s();if(l){const a=t.children;return typeof a=="function"&&a.length>0?Jt(()=>a(n?l:()=>{if(!Jt(s))throw ri("Show");return e()})):a}return t.fallback},void 0,void 0)}const jt=t=>ye(()=>t());function ii(t,n,e){let s=e.length,l=n.length,a=s,i=0,r=0,c=n[l-1].nextSibling,h=null;for(;i<l||r<a;){if(n[i]===e[r]){i++,r++;continue}for(;n[l-1]===e[a-1];)l--,a--;if(l===i){const p=a<s?r?e[r-1].nextSibling:e[a-r]:c;for(;r<a;)t.insertBefore(e[r++],p)}else if(a===r)for(;i<l;)(!h||!h.has(n[i]))&&n[i].remove(),i++;else if(n[i]===e[a-1]&&e[r]===n[l-1]){const p=n[--l].nextSibling;t.insertBefore(e[r++],n[i++].nextSibling),t.insertBefore(e[--a],p),n[l]=e[a]}else{if(!h){h=new Map;let g=r;for(;g<a;)h.set(e[g],g++)}const p=h.get(n[i]);if(p!=null)if(r<p&&p<a){let g=i,v=1,u;for(;++g<l&&g<a&&!((u=h.get(n[g]))==null||u!==p+v);)v++;if(v>p-r){const w=n[i];for(;r<p;)t.insertBefore(e[r++],w)}else t.replaceChild(e[r++],n[i++])}else i++;else n[i++].remove()}}}const Bn="_$DX_DELEGATE";function ai(t,n,e,s={}){let l;return Le(a=>{l=a,n===document?t():X(n,t(),n.firstChild?null:void 0,e)},s.owner),()=>{l(),n.textContent=""}}function et(t,n,e,s){let l;const a=()=>{const r=document.createElement("template");return r.innerHTML=t,r.content.firstChild},i=()=>(l||(l=a())).cloneNode(!0);return i.cloneNode=i,i}function $e(t,n=window.document){const e=n[Bn]||(n[Bn]=new Set);for(let s=0,l=t.length;s<l;s++){const a=t[s];e.has(a)||(e.add(a),n.addEventListener(a,si))}}function At(t,n,e){e==null?t.removeAttribute(n):t.setAttribute(n,e)}function _t(t,n){n==null?t.removeAttribute("class"):t.className=n}function Rn(t,n,e,s){Array.isArray(e)?(t[`$$${n}`]=e[0],t[`$$${n}Data`]=e[1]):t[`$$${n}`]=e}function X(t,n,e,s){if(e!==void 0&&!s&&(s=[]),typeof n!="function")return Me(t,n,s,e);yt(l=>Me(t,n(),l,e),s)}function si(t){let n=t.target;const e=`$$${t.type}`,s=t.target,l=t.currentTarget,a=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),i=()=>{const c=n[e];if(c&&!n.disabled){const h=n[`${e}Data`];if(h!==void 0?c.call(n,h,t):c.call(n,t),t.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(t.target)&&a(n.host),!0},r=()=>{for(;i()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),t.composedPath){const c=t.composedPath();a(c[0]);for(let h=0;h<c.length-2&&(n=c[h],!!i());h++){if(n._$host){n=n._$host,r();break}if(n.parentNode===l)break}}else r();a(s)}function Me(t,n,e,s,l){for(;typeof e=="function";)e=e();if(n===e)return e;const a=typeof n,i=s!==void 0;if(t=i&&e[0]&&e[0].parentNode||t,a==="string"||a==="number"){if(a==="number"&&(n=n.toString(),n===e))return e;if(i){let r=e[0];r&&r.nodeType===3?r.data!==n&&(r.data=n):r=document.createTextNode(n),e=fe(t,e,s,r)}else e!==""&&typeof e=="string"?e=t.firstChild.data=n:e=t.textContent=n}else if(n==null||a==="boolean")e=fe(t,e,s);else{if(a==="function")return yt(()=>{let r=n();for(;typeof r=="function";)r=r();e=Me(t,r,e,s)}),()=>e;if(Array.isArray(n)){const r=[],c=e&&Array.isArray(e);if(on(r,n,e,l))return yt(()=>e=Me(t,r,e,s,!0)),()=>e;if(r.length===0){if(e=fe(t,e,s),i)return e}else c?e.length===0?Fn(t,r,s):ii(t,e,r):(e&&fe(t),Fn(t,r));e=r}else if(n.nodeType){if(Array.isArray(e)){if(i)return e=fe(t,e,s,n);fe(t,e,null,n)}else e==null||e===""||!t.firstChild?t.appendChild(n):t.replaceChild(n,t.firstChild);e=n}}return e}function on(t,n,e,s){let l=!1;for(let a=0,i=n.length;a<i;a++){let r=n[a],c=e&&e[t.length],h;if(!(r==null||r===!0||r===!1))if((h=typeof r)=="object"&&r.nodeType)t.push(r);else if(Array.isArray(r))l=on(t,r,c)||l;else if(h==="function")if(s){for(;typeof r=="function";)r=r();l=on(t,Array.isArray(r)?r:[r],Array.isArray(c)?c:[c])||l}else t.push(r),l=!0;else{const p=String(r);c&&c.nodeType===3&&c.data===p?t.push(c):t.push(document.createTextNode(p))}}return l}function Fn(t,n,e=null){for(let s=0,l=n.length;s<l;s++)t.insertBefore(n[s],e)}function fe(t,n,e,s){if(e===void 0)return t.textContent="";const l=s||document.createTextNode("");if(n.length){let a=!1;for(let i=n.length-1;i>=0;i--){const r=n[i];if(l!==r){const c=r.parentNode===t;!a&&!i?c?t.replaceChild(l,r):t.insertBefore(l,e):c&&r.remove()}else a=!0}}else t.insertBefore(l,e);return[l]}const ln=(t,n)=>n.some(e=>t instanceof e);let jn,Mn;function oi(){return jn||(jn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function li(){return Mn||(Mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cn=new WeakMap,Qe=new WeakMap,Ge=new WeakMap;function ci(t){const n=new Promise((e,s)=>{const l=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{e(ce(t.result)),l()},i=()=>{s(t.error),l()};t.addEventListener("success",a),t.addEventListener("error",i)});return Ge.set(n,t),n}function di(t){if(cn.has(t))return;const n=new Promise((e,s)=>{const l=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{e(),l()},i=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});cn.set(t,n)}let dn={get(t,n,e){if(t instanceof IDBTransaction){if(n==="done")return cn.get(t);if(n==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ce(t[n])},set(t,n,e){return t[n]=e,!0},has(t,n){return t instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in t}};function yr(t){dn=t(dn)}function ui(t){return li().includes(t)?function(...n){return t.apply(un(this),n),ce(this.request)}:function(...n){return ce(t.apply(un(this),n))}}function fi(t){return typeof t=="function"?ui(t):(t instanceof IDBTransaction&&di(t),ln(t,oi())?new Proxy(t,dn):t)}function ce(t){if(t instanceof IDBRequest)return ci(t);if(Qe.has(t))return Qe.get(t);const n=fi(t);return n!==t&&(Qe.set(t,n),Ge.set(n,t)),n}const un=t=>Ge.get(t);function hi(t,n,{blocked:e,upgrade:s,blocking:l,terminated:a}={}){const i=indexedDB.open(t,n),r=ce(i);return s&&i.addEventListener("upgradeneeded",c=>{s(ce(i.result),c.oldVersion,c.newVersion,ce(i.transaction),c)}),e&&i.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),r.then(c=>{a&&c.addEventListener("close",()=>a()),l&&c.addEventListener("versionchange",h=>l(h.oldVersion,h.newVersion,h))}).catch(()=>{}),r}const gi=["get","getKey","getAll","getAllKeys","count"],mi=["put","add","delete","clear"],tn=new Map;function Nn(t,n){if(!(t instanceof IDBDatabase&&!(n in t)&&typeof n=="string"))return;if(tn.get(n))return tn.get(n);const e=n.replace(/FromIndex$/,""),s=n!==e,l=mi.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(l||gi.includes(e)))return;const a=async function(i,...r){const c=this.transaction(i,l?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(r.shift())),(await Promise.all([h[e](...r),l&&c.done]))[0]};return tn.set(n,a),a}yr(t=>({...t,get:(n,e,s)=>Nn(n,e)||t.get(n,e,s),has:(n,e)=>!!Nn(n,e)||t.has(n,e)}));const pi=["continue","continuePrimaryKey","advance"],Wn={},fn=new WeakMap,vr=new WeakMap,yi={get(t,n){if(!pi.includes(n))return t[n];let e=Wn[n];return e||(e=Wn[n]=function(...s){fn.set(this,vr.get(this)[n](...s))}),e}};async function*vi(...t){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...t)),!n)return;n=n;const e=new Proxy(n,yi);for(vr.set(e,n),Ge.set(e,un(n));n;)yield e,n=await(fn.get(e)||n.continue()),fn.delete(e)}function Zn(t,n){return n===Symbol.asyncIterator&&ln(t,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&ln(t,[IDBIndex,IDBObjectStore])}yr(t=>({...t,get(n,e,s){return Zn(n,e)?vi:t.get(n,e,s)},has(n,e){return Zn(n,e)||t.has(n,e)}}));const[gn,bi]=rt(0),Ne=new Map;function br(t){bi(n=>n+1),t&&Ne.set(t,Date.now())}function wi(){return gn()}function _i(){Ne.clear()}function xi(){return{totalUpdates:gn(),trackedSongs:Ne.size,recentUpdates:Array.from(Ne.entries()).sort(([,t],[,n])=>n-t).slice(0,10)}}function mn(t){const{songId:n}=t;br(n)}typeof globalThis<"u"&&globalThis.__DEV__&&(globalThis.__songReactivity={getSongUpdateTrigger:wi,getUpdateStats:xi,clearUpdateHistory:_i,triggerSongUpdate:br});function ki(t){let n=t;const e=new Set;return{get:()=>n,set:s=>{n!==s&&(n=s,e.forEach(l=>l(n)))},subscribe:s=>(e.add(s),s(n),()=>e.delete(s))}}const zt="musicPlaylistDB",Si=3,Pt="playlists",xt="songs";let ze=null;async function Ut(){return ze||(ze=hi(zt,Si,{upgrade(t,n,e){t.objectStoreNames.contains(Pt)||t.createObjectStore(Pt,{keyPath:"id"}),t.objectStoreNames.contains(xt)||t.createObjectStore(xt,{keyPath:"id"}).createIndex("playlistId","playlistId",{unique:!1})}}),ze)}function $i(t,n){return t.length!==n.length?!0:t.some((e,s)=>typeof e=="object"&&e!==null&&n[s]!==null?JSON.stringify(e)!==JSON.stringify(n[s]):e!==n[s])}const we=new Map;function Ci({dbName:t,storeName:n,queryFn:e,fields:s=[],limit:l=null}){const a=ki([]),i=new BroadcastChannel(`${t}-changes`);let r=[];async function c(){try{let u=await(await Ut()).getAll(n);e&&(u=u.filter(e)),l&&(u=u.slice(0,l));const w=u.map(f=>{if(s.length===0)return f;const y={id:f.id};for(const m of s)y[m]=f[m];return y});$i(r,w)&&(r=w,a.set(w))}catch(v){console.error("Error in fetchAndUpdate:",v)}}const h=`${t}-${n}`;we.has(h)||we.set(h,new Set);const p=we.get(h);p.add(c),i.onmessage=v=>{v.data?.type==="mutation"&&v.data.store===n&&c()},c();const g=a;return{...g,subscribe:v=>{const u=g.subscribe(v);return()=>{u(),p.delete(c),p.size===0&&we.delete(h),i.close()}}}}async function Rt({dbName:t,storeName:n,key:e,updateFn:s}){const a=(await Ut()).transaction(n,"readwrite"),i=a.objectStore(n),r=await i.get(e),c=await s(r||{id:e});await i.put(c),await a.done;const h=`${t}-${n}`,p=we.get(h);if(p)for(const u of Array.from(p))try{u()}catch(w){console.error("Error in direct query update:",w)}const g=new BroadcastChannel(`${t}-changes`),v={type:"mutation",store:n,id:e};g.postMessage(v),g.close()}async function en(t){const n=crypto.randomUUID(),e=Date.now(),s={id:n,createdAt:e,updatedAt:e,...t,songIds:t.songIds||[]};return await Rt({dbName:zt,storeName:Pt,key:n,updateFn:()=>s}),s}async function wr(t,n){await Rt({dbName:zt,storeName:Pt,key:t,updateFn:e=>({...e,...n,updatedAt:Date.now()})})}async function Ei(t){const n=await Ut(),e=n.transaction(xt,"readwrite");let a=await e.objectStore(xt).index("playlistId").openCursor(IDBKeyRange.only(t));for(;a;)await a.delete(),a=await a.continue();await e.done;const i=n.transaction(Pt,"readwrite");await i.objectStore(Pt).delete(t),await i.done;const r=new BroadcastChannel(`${zt}-changes`);r.postMessage({type:"mutation",store:Pt,id:t}),r.postMessage({type:"mutation",store:xt,id:t})}async function Hn(t,n,e={}){const s=crypto.randomUUID(),l=Date.now(),a=await n.arrayBuffer(),i={id:s,file:n,mimeType:n.type,originalFilename:n.name,title:e.title||n.name.replace(/\.[^/.]+$/,""),artist:e.artist||"Unknown Artist",album:e.album||"Unknown Album",duration:e.duration||0,position:e.position||0,playlistId:t,createdAt:l,updatedAt:l,...e},r={...i,file:void 0,audioData:a,mimeType:n.type};return await Rt({dbName:zt,storeName:xt,key:s,updateFn:()=>r}),await Rt({dbName:zt,storeName:Pt,key:t,updateFn:c=>({...c,songIds:[...c.songIds||[],s],updatedAt:l})}),mn({songId:i.id,metadata:{title:i.title}}),i}async function Ai(t,n){await Rt({dbName:zt,storeName:xt,key:t,updateFn:e=>({...e,...n,updatedAt:Date.now()})}),mn({songId:t})}async function Ii(t,n,e){await Rt({dbName:zt,storeName:Pt,key:t,updateFn:h=>{const p=[...h.songIds||[]],[g]=p.splice(n,1);return p.splice(e,0,g),{...h,songIds:p,updatedAt:Date.now()}}});const l=(await Ut()).transaction(xt,"readwrite"),i=l.objectStore(xt).index("playlistId"),r=[];let c=await i.openCursor(IDBKeyRange.only(t));for(;c;){const h=c.value;r.push(Rt({dbName:zt,storeName:xt,key:h.id,updateFn:p=>({...p,position:0,updatedAt:Date.now()})})),c=await c.continue()}await l.done}function zi(){return Ci({dbName:zt,storeName:Pt,fields:["title","description","imageData","thumbnailData","imageType","createdAt","updatedAt","songIds"]})}async function Di(t){try{const e=await(await Ut()).get(xt,t);return e?{...e,audioData:void 0}:null}catch(n){return console.error(` Error fetching song ${t}:`,n),null}}async function _r(t){try{const e=await(await Ut()).get(xt,t);if(!e||!e.audioData||!e.mimeType)return null;const s=new Blob([e.audioData],{type:e.mimeType});return URL.createObjectURL(s)}catch(n){return console.error(` Error loading audio data for song ${t}:`,n),null}}async function xe(){try{return(await(await Ut()).getAll(xt)).map(e=>({...e,audioData:void 0}))||[]}catch(t){return console.error(" Error fetching all songs:",t),[]}}async function Ti(t){try{const n=await Ut(),e=[];for(const s of t){const l=await n.get(xt,s);l&&e.push(l)}return e.sort((s,l)=>{const a=t.indexOf(s.id),i=t.indexOf(l.id);return a-i})}catch(n){return console.error(" Error getting songs with audio data:",n),[]}}async function Vn(){try{return await(await Ut()).getAll(Pt)}catch(t){return console.error(" Error fetching all playlists:",t),[]}}async function Li(t,n){const e=await Ut();await Rt({dbName:zt,storeName:Pt,key:t,updateFn:i=>({...i,songIds:i.songIds.filter(r=>r!==n),updatedAt:Date.now()})});const s=e.transaction(xt,"readwrite");await s.objectStore(xt).delete(n),await s.done;const a=new BroadcastChannel(`${zt}-changes`);a.postMessage({type:"mutation",store:xt,id:n}),a.close(),mn({songId:n})}async function Pi(t,n,e){try{const s=n,l=xr(t,n,e);return{blobUrl:s,downloadPromise:l}}catch(s){throw console.error("Error in streamAudioWithCaching:",s),s}}async function xr(t,n,e){try{const l=await(await Ut()).get(xt,t.id);if(l?.audioData&&l.audioData.byteLength>0)return!0;const a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch: ${a.status} ${a.statusText}`);const i=a.headers.get("content-length"),r=i?parseInt(i,10):0;let c=0;const h=a.body?.getReader();if(!h)throw new Error("Response body is not readable");const p=[];for(;;){const{done:m,value:b}=await h.read();if(m)break;b&&(c+=b.length,p.push(b),e&&r>0&&e({loaded:c,total:r,percentage:Math.round(c/r*100)}))}const g=p.reduce((m,b)=>m+b.length,0),v=new ArrayBuffer(g),u=new Uint8Array(v);let w=0;for(const m of p)u.set(m,w),w+=m.length;const f=t.mimeType||a.headers.get("content-type")||"audio/mpeg",y={...t,audioData:v,mimeType:f,updatedAt:Date.now()};return await Rt({dbName:zt,storeName:xt,key:t.id,updateFn:()=>y}),!0}catch(s){return console.error(`Error downloading and caching audio for ${t.id}:`,s),!1}}const Ue=new Map;function Ui(t){return Ue.has(t)}async function kr(t,n,e){const s=Ue.get(t.id);if(s)return s;try{const i=await(await Ut()).get(xt,t.id);if(i?.audioData&&i.audioData.byteLength>0)return!0}catch(a){console.error("Error checking cache status:",a)}const l=xr(t,n,e);return Ue.set(t.id,l),l.finally(()=>{Ue.delete(t.id)}),l}const[pn,Sr]=rt(null),[Ce,yn]=rt(null),[de,vn]=rt([]),[bn,oe]=rt(!1),[Oi,wn]=rt(0),[Bi,_n]=rt(0),[Ee,ue]=rt(-1),[$r,no]=rt(1),[xn,he]=rt(!1),[Cr,Gt]=rt(new Set),[Er,Ke]=rt(null),[kn,_e]=rt(null);let nn=!1;const[Sn,Ri]=rt("none"),[Fi,ji]=rt(!1),[Ar,ge]=rt(new Map),[Ir,me]=rt(new Set);let Ct=null;function Mi(){return Ct||(Ct=new Audio,Ct.volume=$r(),Ct.preload="metadata",Ct.addEventListener("loadstart",()=>{he(!0)}),Ct.addEventListener("canplay",()=>{he(!1)}),Ct.addEventListener("loadedmetadata",()=>{const t=Ct?.duration||0;_n(t),he(!1),Oe()}),Ct.addEventListener("timeupdate",()=>{const t=Ct?.currentTime||0;wn(t);const n=Ct?.duration||0;n>0&&t/n>=.5&&!nn&&(nn=!0,Yi())}),Ct.addEventListener("play",()=>{oe(!0),nn=!1,xn()||Oe()}),Ct.addEventListener("pause",()=>{oe(!1),Oe()}),Ct.addEventListener("ended",()=>{oe(!1),Vi()}),Ct.addEventListener("error",t=>{console.error("Audio error:",t),oe(!1),he(!1),Gt(new Set),Ye()}),Ct)}function Ni(t){return URL.createObjectURL(t)}function zr(t){URL.revokeObjectURL(t)}function Ye(){const t=pn();t?document.title=`${t.title} - ${t.artist||"Unknown Artist"} | PLAYLISTZ`:document.title="P L A Y L I S T Z"}async function Oe(){if(!("mediaSession"in navigator))return;const t=pn(),n=Ce(),e=xn();if(t){const s=await Wi(t,n);navigator.mediaSession.metadata=null,navigator.mediaSession.metadata=new MediaMetadata({title:e?`loading... ${t.title}`:t.title,artist:t.artist||"unknown artist",album:t.album||n?.title||"unknown album",artwork:s}),navigator.mediaSession.playbackState=e?"paused":bn()?"playing":"paused",navigator.mediaSession.setActionHandler("play",()=>{Ze()}),navigator.mediaSession.setActionHandler("pause",()=>{Ze()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{qi()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{Dr()}),navigator.mediaSession.setActionHandler("seekto",i=>{i.seekTime!==void 0&&!e&&Tr(i.seekTime)});const l=Et.duration(),a=Et.currentTime();if(l>0&&!e)navigator.mediaSession.setPositionState({duration:l,playbackRate:1,position:a});else if(e)try{navigator.mediaSession.setPositionState({duration:0,playbackRate:1,position:0})}catch{}}else navigator.mediaSession.metadata=null,navigator.mediaSession.playbackState="none";Ye()}async function qn(t,n){return t.byteLength<5e5?t:new Promise(e=>{const s=new Blob([t],{type:n}),l=new Image,a=document.createElement("canvas"),i=a.getContext("2d");l.onload=()=>{let{width:c,height:h}=l;if(c>300||h>300){const p=Math.min(300/c,300/h);c*=p,h*=p}a.width=c,a.height=h,i?(i.drawImage(l,0,0,c,h),a.toBlob(p=>{p?p.arrayBuffer().then(e):e(t)},n,.8)):e(t)},l.onerror=()=>{e(t)},l.src=URL.createObjectURL(s)})}async function Wi(t,n){const e=[],s=t.thumbnailData||t.imageData;if(s&&t.imageType){const l=await qn(s,t.imageType),a=new Blob([l],{type:t.imageType}),i=URL.createObjectURL(a);e.push({src:i,sizes:"512x512",type:t.imageType}),e.push({src:i,sizes:"256x256",type:t.imageType}),e.push({src:i,sizes:"96x96",type:t.imageType})}else{const l=n?.thumbnailData||n?.imageData;if(l&&n?.imageType){const a=await qn(l,n.imageType),i=new Blob([a],{type:n.imageType}),r=URL.createObjectURL(i);e.push({src:r,sizes:"512x512",type:n.imageType}),e.push({src:r,sizes:"256x256",type:n.imageType}),e.push({src:r,sizes:"96x96",type:n.imageType})}}return e}async function Zi(t){try{const e=(await xe()).filter(s=>t.songIds.includes(s.id)).sort((s,l)=>t.songIds.indexOf(s.id)-t.songIds.indexOf(l.id));vn(e),yn(t),ue(-1)}catch(n){throw console.error("Error loading playlist queue:",n),n}}async function Gn(t){try{const n=Et.currentSong(),s=(await xe()).filter(l=>t.songIds.includes(l.id)).sort((l,a)=>t.songIds.indexOf(l.id)-t.songIds.indexOf(a.id));if(vn(s),yn(t),n){const l=s.findIndex(a=>a.id===n.id);ue(l>=0?l:-1)}}catch(n){throw console.error("Error refreshing playlist queue:",n),n}}function Hi(){const t=de(),n=Ee();if(t.length===0)return null;const e=Sn();if(e==="one")return n>=0&&t[n]||null;const s=n+1;return s<t.length?t[s]||null:e==="all"&&t[0]||null}async function Vi(){Hi()?await Dr():(oe(!1),Oe())}async function We(t,n){const e=Mi();try{if(Ke(t.id),Gt(l=>new Set(Array.from(l).concat([t.id]))),kn()===t.id&&_e(null),e.src&&e.src.startsWith("blob:")&&zr(e.src),wn(0),_n(0),e.currentTime=0,he(!0),Sr(t),"mediaSession"in navigator){navigator.mediaSession.playbackState="paused";try{navigator.mediaSession.setPositionState({duration:0,playbackRate:1,position:0})}catch{}}if(n){const l=Ce();(!l||l.id!==n.id||de().length===0)&&await Zi(n);const i=de().findIndex(r=>r.id===t.id);ue(i>=0?i:0)}let s=t.blobUrl;if(!s&&t.file&&(s=Ni(t.file)),!s)if(window.location.protocol==="file:"&&t.standaloneFilePath){const l=t.standaloneFilePath;s=new URL(l,window.location.href).href;const a=document.createElement("audio");a.src=s,a.addEventListener("error",i=>{console.error("audio file test failed:",i),console.error("audio error:",a.error)}),a.load()}else{let l=await _r(t.id);if(l)s=l;else if(t.standaloneFilePath){const a=t.standaloneFilePath;if(window.location.protocol==="file:")s=new URL(a,window.location.href).href;else try{const{blobUrl:i,downloadPromise:r}=await Pi(t,a,c=>{ge(h=>{const p=new Map(h);return p.set(t.id,c.percentage),p})});me(c=>new Set(Array.from(c).concat([t.id]))),s=i,r.then(c=>{c?console.log(`successfully cached ${t.title}`):console.warn(`failed to cache ${t.title}`)}).catch(c=>{console.error(`error caching ${t.title}:`,c)}).finally(()=>{ge(c=>{const h=new Map(c);return h.delete(t.id),h}),me(c=>{const h=new Set(c);return h.delete(t.id),h})})}catch(i){console.error("streaming approach failed, using direct url:",i),s=a,me(r=>new Set(Array.from(r).concat([t.id]))),kr(t,a,r=>{ge(c=>{const h=new Map(c);return h.set(t.id,r.percentage),h})}).finally(()=>{ge(r=>{const c=new Map(r);return c.delete(t.id),c}),me(r=>{const c=new Set(r);return c.delete(t.id),c})})}}}if(!s)throw new Error(`no audio source available for song: ${t.title}. check that audio files are accessible.`);if(Er()!==t.id){Gt(l=>{const a=new Set(l);return a.delete(t.id),a});return}e.src=s,e.addEventListener("error",l=>{console.error("audio loading error:",l),console.error("audio error details:",e.error)},{once:!0}),await e.play(),Gt(l=>{const a=new Set(l);return a.delete(t.id),a})}catch(s){throw console.error("error playing song:",s),he(!1),Gt(l=>{const a=new Set(l);return a.delete(t.id),a}),Ye(),s}}async function Dr(){const t=de(),n=Ee();if(t.length===0)return;const e=Sn();let s;if(e==="one")s=n;else if(n+1<t.length)s=n+1;else if(e==="all")s=0;else return;const l=t[s];l&&(ue(s),Ke(l.id),await We(l,Ce()||void 0))}async function qi(){const t=de(),n=Ee();if(t.length===0||n<=0)return;const e=n-1,s=t[e];s&&(ue(e),Ke(s.id),await We(s,Ce()||void 0))}async function Ze(){const t=Ct;if(t)try{bn()?t.pause():await t.play()}catch(n){console.error("Error toggling playback:",n)}}function Gi(){const t=Ct;t&&(t.pause(),t.currentTime=0,t.src&&t.src.startsWith("blob:")&&zr(t.src),t.src=""),Sr(null),yn(null),oe(!1),wn(0),_n(0),ue(0),Ye()}function Tr(t){const n=Ct;n&&!isNaN(n.duration)&&(n.currentTime=Math.max(0,Math.min(t,n.duration)))}const Et={currentSong:pn,currentPlaylist:Ce,playlistQueue:de,isPlaying:bn,currentTime:Oi,duration:Bi,currentIndex:Ee,volume:$r,isLoading:xn,loadingSongIds:Cr,selectedSongId:Er,preloadingSongId:kn,repeatMode:Sn,isShuffled:Fi,downloadProgress:Ar,cachingSongIds:Ir};function Ki(){Gi();const t=Ct;t&&(t.removeEventListener("loadstart",()=>{}),t.removeEventListener("canplay",()=>{}),t.removeEventListener("loadedmetadata",()=>{}),t.removeEventListener("timeupdate",()=>{}),t.removeEventListener("play",()=>{}),t.removeEventListener("pause",()=>{}),t.removeEventListener("ended",()=>{}),t.removeEventListener("error",()=>{})),Ct=null,vn([]),ue(-1),Ri("none"),ji(!1)}async function Yi(){const t=de(),n=Ee();if(t.length===0||n<0)return;const e=n+1;if(e>=t.length)return;const s=t[e];if(s&&!(Cr().has(s.id)||kn()===s.id)){_e(s.id),Gt(l=>new Set(Array.from(l).concat([s.id])));try{if(await _r(s.id)){Gt(a=>{const i=new Set(a);return i.delete(s.id),i}),_e(null);return}if(Ui(s.id)){Gt(a=>{const i=new Set(a);return i.delete(s.id),i}),_e(null);return}s.standaloneFilePath&&(me(a=>new Set(Array.from(a).concat([s.id]))),kr(s,s.standaloneFilePath,a=>{ge(i=>{const r=new Map(i);return r.set(s.id,a.percentage),r})}).then(a=>{a?console.log(`successfully preloaded ${s.title}`):console.warn(`failed to preload ${s.title}`)}).catch(a=>{console.error(`error preloading ${s.title}:`,a)}).finally(()=>{ge(a=>{const i=new Map(a);return i.delete(s.id),i}),me(a=>{const i=new Set(a);return i.delete(s.id),i})}))}catch{}finally{Gt(l=>{const a=new Set(l);return a.delete(s.id),a}),_e(null)}}}function Ji(t){const n=Ct;n&&(n.pause(),oe(!1)),Ke(t)}function Xi(t){return Ar().get(t)||0}function Qi(t){return Ir().has(t)}async function ta(t){try{const n=await t.arrayBuffer(),e=new DataView(n);if(n.byteLength<10)return{success:!1,error:"File too small to contain ID3 tags"};if(String.fromCharCode(e.getUint8(0),e.getUint8(1),e.getUint8(2))!=="ID3")return{success:!1,error:"No ID3v2 tag found"};const l=e.getUint8(3),a=(e.getUint8(6)&127)<<21|(e.getUint8(7)&127)<<14|(e.getUint8(8)&127)<<7|e.getUint8(9)&127;let i=10;const r=Math.min(10+a,n.byteLength);for(;i<r-10;){if(String.fromCharCode(e.getUint8(i),e.getUint8(i+1),e.getUint8(i+2),e.getUint8(i+3))==="APIC"){const p=l===4?(e.getUint8(i+4)&127)<<21|(e.getUint8(i+5)&127)<<14|(e.getUint8(i+6)&127)<<7|e.getUint8(i+7)&127:e.getUint8(i+4)<<24|e.getUint8(i+5)<<16|e.getUint8(i+6)<<8|e.getUint8(i+7);let g=i+10;g++;let v="";for(;g<r&&e.getUint8(g)!==0;)v+=String.fromCharCode(e.getUint8(g)),g++;for(g++,g++;g<r&&e.getUint8(g)!==0;)g++;g++;const u=p-(g-i-10);if(u>0&&g+u<=n.byteLength){const w=n.slice(g,g+u),f=new Blob([w],{type:v});return{success:!0,albumArt:URL.createObjectURL(f)}}}const h=l===4?(e.getUint8(i+4)&127)<<21|(e.getUint8(i+5)&127)<<14|(e.getUint8(i+6)&127)<<7|e.getUint8(i+7)&127:e.getUint8(i+4)<<24|e.getUint8(i+5)<<16|e.getUint8(i+6)<<8|e.getUint8(i+7);i+=10+h}return{success:!1,error:"No album art found in ID3 tags"}}catch(n){return console.error(" Error extracting album art:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function $n(t){try{if(!t.type.startsWith("image/"))return{success:!1,error:"File is not an image"};const n=10*1024*1024;if(t.size>n)return{success:!1,error:"Image file too large (max 10MB)"};const e=await t.arrayBuffer(),s=new Image,l=URL.createObjectURL(t);return new Promise(a=>{s.onload=async()=>{try{const i={width:s.width,height:s.height,format:t.type,size:t.size},r=await ea(s,300,300,t.type);URL.revokeObjectURL(l),a({success:!0,imageData:e,thumbnailData:r,metadata:i})}catch(i){URL.revokeObjectURL(l),a({success:!1,error:i instanceof Error?i.message:"Processing failed"})}},s.onerror=()=>{URL.revokeObjectURL(l),a({success:!1,error:"Invalid image file"})},s.src=l})}catch(n){return console.error(" Error processing playlist cover:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function ea(t,n,e,s="image/jpeg"){const l=document.createElement("canvas"),a=l.getContext("2d");if(!a)throw new Error("Cannot create canvas context");let{width:i,height:r}=t;if(i>n||r>e){const c=Math.min(n/i,e/r);i*=c,r*=c}return l.width=i,l.height=r,a.drawImage(t,0,0,i,r),new Promise((c,h)=>{l.toBlob(async p=>{if(p){const g=await p.arrayBuffer();c(g)}else h(new Error("Failed to create thumbnail data"))},s,.8)})}function Lr(t){return["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)?t.size>10485760?{valid:!1,error:"Image file too large. Maximum size is 10MB."}:{valid:!0}:{valid:!1,error:"Unsupported image format. Use JPEG, PNG, GIF, or WebP."}}function Wt(t,n="image/jpeg"){const e=new Blob([t],{type:n});return URL.createObjectURL(e)}function se(t,n,e,s="thumbnail"){if(!e)return null;if(s==="background"||s==="modal"){if(n)return Wt(n,e);if(t)return Wt(t,e)}return t?Wt(t,e):n?Wt(n,e):null}function Pr(t){return t.type.startsWith("audio/")}function na(t,n=100){const e=n*1024*1024;return t.size<=e}function ra(t){const n=t.replace(/\.[^/.]+$/,""),e=n.split(" - ");return e.length===2?{artist:e[0]?.trim(),title:e[1]?.trim()}:e.length===3?{artist:e[0]?.trim(),album:e[1]?.trim(),title:e[2]?.trim()}:{title:n.trim()}}async function ia(t){return new Promise(n=>{try{const e=new Audio,s=URL.createObjectURL(t);e.addEventListener("loadedmetadata",()=>{URL.revokeObjectURL(s),n(e.duration||0)}),e.addEventListener("error",l=>{URL.revokeObjectURL(s),console.warn("Could not extract duration from audio file:",l),n(0)}),e.src=s}catch(e){console.warn("Failed to create blob URL for duration extraction:",e),n(0)}})}async function aa(t){try{const n=await ta(t);if(n.success&&n.albumArt){const s=await(await fetch(n.albumArt)).arrayBuffer(),l=new Blob([s],{type:"image/jpeg"}),a=new File([l],"albumart.jpg",{type:"image/jpeg"});URL.revokeObjectURL(n.albumArt);const i=await $n(a);return i.success&&i.imageData&&i.thumbnailData?{fullSizeData:i.imageData,thumbnailData:i.thumbnailData,type:i.metadata?.format||"image/jpeg"}:{fullSizeData:s,thumbnailData:s,type:"image/jpeg"}}return}catch(n){console.warn(` Could not extract album art from ${t.name}:`,n);return}}async function sa(t){const n=ra(t.name);try{const e=await ia(t),s=await aa(t);return{title:n.title||"Unknown Title",artist:n.artist||"Unknown Artist",album:n.album||"Unknown Album",duration:e,coverArtData:s?.fullSizeData,coverArtThumbnailData:s?.thumbnailData,coverArtType:s?.type}}catch(e){return console.error("Error extracting metadata:",e),{title:n.title||"Unknown Title",artist:n.artist||"Unknown Artist",album:n.album||"Unknown Album",duration:0}}}async function oa(t){try{if(!Pr(t))return{success:!1,error:`Unsupported file type: ${t.type}. Please upload an audio file.`};if(!na(t))return{success:!1,error:`File too large: ${Math.round(t.size/1024/1024)}MB. Maximum size is 100MB.`};const n=await sa(t);let e;try{e=URL.createObjectURL(t)}catch(s){console.warn("Failed to create blob URL for file:",t.name,s)}return{success:!0,song:{id:"",file:t,blobUrl:e,title:n.title||"Unknown Title",artist:n.artist||"Unknown Artist",album:n.album||"Unknown Album",duration:n.duration||0,position:0,imageData:n.coverArtData,thumbnailData:n.coverArtThumbnailData,imageType:n.coverArtType,fileSize:t.size,createdAt:Date.now(),updatedAt:Date.now(),playlistId:""}}}catch(n){return console.error("Error processing audio file:",n),{success:!1,error:`Error processing file: ${n instanceof Error?n.message:"Unknown error"}`}}}async function la(t){const n=Array.from(t),e=[],s=3;for(let l=0;l<n.length;l+=s){const a=n.slice(l,l+s),i=await Promise.all(a.map(r=>oa(r)));e.push(...i)}return e}function ca(t){return Array.from(t).filter(Pr)}const pe=new Set;let ke=null;function da(){ke||(ke=window.setInterval(()=>{pe.forEach(t=>t())},6e4))}function Ur(){ke&&(window.clearInterval(ke),ke=null)}function Or(t){const[n,e]=rt("");function s(){const i=Date.now()-t;let r;if(i<6e4)r="just now";else if(i<36e5){const c=Math.floor(i/6e4);r=`${c} ${c===1?"minute":"minutes"} ago`}else if(i<864e5){const c=Math.floor(i/36e5);r=`${c} ${c===1?"hour":"hours"} ago`}else if(i<6048e5){const c=Math.floor(i/864e5);r=`${c} ${c===1?"day":"days"} ago`}else if(i<2629746e3){const c=Math.floor(i/6048e5);r=`${c} ${c===1?"week":"weeks"} ago`}else if(i<31556952e3){const c=Math.floor(i/2629746e3);r=`${c} ${c===1?"month":"months"} ago`}else{const c=Math.floor(i/31556952e3);r=`${c} ${c===1?"year":"years"} ago`}e(r)}return s(),pe.add(s),pe.size===1&&da(),{signal:n,destroy:()=>{pe.delete(s),pe.size===0&&Ur()},update:s}}function ua(){pe.clear(),Ur()}var De=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Te(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Kn;function ha(){return Kn||(Kn=1,function(t,n){(function(e){t.exports=e()})(function(){return function e(s,l,a){function i(h,p){if(!l[h]){if(!s[h]){var g=typeof Te=="function"&&Te;if(!p&&g)return g(h,!0);if(r)return r(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var u=l[h]={exports:{}};s[h][0].call(u.exports,function(w){var f=s[h][1][w];return i(f||w)},u,u.exports,e,s,l,a)}return l[h].exports}for(var r=typeof Te=="function"&&Te,c=0;c<a.length;c++)i(a[c]);return i}({1:[function(e,s,l){var a=e("./utils"),i=e("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(c){for(var h,p,g,v,u,w,f,y=[],m=0,b=c.length,S=b,A=a.getTypeOf(c)!=="string";m<c.length;)S=b-m,g=A?(h=c[m++],p=m<b?c[m++]:0,m<b?c[m++]:0):(h=c.charCodeAt(m++),p=m<b?c.charCodeAt(m++):0,m<b?c.charCodeAt(m++):0),v=h>>2,u=(3&h)<<4|p>>4,w=1<S?(15&p)<<2|g>>6:64,f=2<S?63&g:64,y.push(r.charAt(v)+r.charAt(u)+r.charAt(w)+r.charAt(f));return y.join("")},l.decode=function(c){var h,p,g,v,u,w,f=0,y=0,m="data:";if(c.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var b,S=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===r.charAt(64)&&S--,c.charAt(c.length-2)===r.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=i.uint8array?new Uint8Array(0|S):new Array(0|S);f<c.length;)h=r.indexOf(c.charAt(f++))<<2|(v=r.indexOf(c.charAt(f++)))>>4,p=(15&v)<<4|(u=r.indexOf(c.charAt(f++)))>>2,g=(3&u)<<6|(w=r.indexOf(c.charAt(f++))),b[y++]=h,u!==64&&(b[y++]=p),w!==64&&(b[y++]=g);return b}},{"./support":30,"./utils":32}],2:[function(e,s,l){var a=e("./external"),i=e("./stream/DataWorker"),r=e("./stream/Crc32Probe"),c=e("./stream/DataLengthProbe");function h(p,g,v,u,w){this.compressedSize=p,this.uncompressedSize=g,this.crc32=v,this.compression=u,this.compressedContent=w}h.prototype={getContentWorker:function(){var p=new i(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),g=this;return p.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new i(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(p,g,v){return p.pipe(new r).pipe(new c("uncompressedSize")).pipe(g.compressWorker(v)).pipe(new c("compressedSize")).withStreamInfo("compression",g)},s.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,l){var a=e("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},l.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,l){var a=e("./utils"),i=function(){for(var r,c=[],h=0;h<256;h++){r=h;for(var p=0;p<8;p++)r=1&r?3988292384^r>>>1:r>>>1;c[h]=r}return c}();s.exports=function(r,c){return r!==void 0&&r.length?a.getTypeOf(r)!=="string"?function(h,p,g,v){var u=i,w=v+g;h^=-1;for(var f=v;f<w;f++)h=h>>>8^u[255&(h^p[f])];return-1^h}(0|c,r,r.length,0):function(h,p,g,v){var u=i,w=v+g;h^=-1;for(var f=v;f<w;f++)h=h>>>8^u[255&(h^p.charCodeAt(f))];return-1^h}(0|c,r,r.length,0):0}},{"./utils":32}],5:[function(e,s,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(e,s,l){var a=null;a=typeof Promise<"u"?Promise:e("lie"),s.exports={Promise:a}},{lie:37}],7:[function(e,s,l){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=e("pako"),r=e("./utils"),c=e("./stream/GenericWorker"),h=a?"uint8array":"array";function p(g,v){c.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=v,this.meta={}}l.magic="\b\0",r.inherits(p,c),p.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(h,g.data),!1)},p.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(v){g.push({data:v,meta:g.meta})}},l.compressWorker=function(g){return new p("Deflate",g)},l.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,l){function a(u,w){var f,y="";for(f=0;f<w;f++)y+=String.fromCharCode(255&u),u>>>=8;return y}function i(u,w,f,y,m,b){var S,A,C=u.file,O=u.compression,E=b!==h.utf8encode,j=r.transformTo("string",b(C.name)),z=r.transformTo("string",h.utf8encode(C.name)),D=C.comment,J=r.transformTo("string",b(D)),x=r.transformTo("string",h.utf8encode(D)),L=z.length!==C.name.length,d=x.length!==D.length,M="",ot="",Z="",ct=C.dir,Y=C.date,lt={crc32:0,compressedSize:0,uncompressedSize:0};w&&!f||(lt.crc32=u.crc32,lt.compressedSize=u.compressedSize,lt.uncompressedSize=u.uncompressedSize);var B=0;w&&(B|=8),E||!L&&!d||(B|=2048);var P=0,N=0;ct&&(P|=16),m==="UNIX"?(N=798,P|=function(V,dt){var at=V;return V||(at=dt?16893:33204),(65535&at)<<16}(C.unixPermissions,ct)):(N=20,P|=function(V){return 63&(V||0)}(C.dosPermissions)),S=Y.getUTCHours(),S<<=6,S|=Y.getUTCMinutes(),S<<=5,S|=Y.getUTCSeconds()/2,A=Y.getUTCFullYear()-1980,A<<=4,A|=Y.getUTCMonth()+1,A<<=5,A|=Y.getUTCDate(),L&&(ot=a(1,1)+a(p(j),4)+z,M+="up"+a(ot.length,2)+ot),d&&(Z=a(1,1)+a(p(J),4)+x,M+="uc"+a(Z.length,2)+Z);var tt="";return tt+=`
\0`,tt+=a(B,2),tt+=O.magic,tt+=a(S,2),tt+=a(A,2),tt+=a(lt.crc32,4),tt+=a(lt.compressedSize,4),tt+=a(lt.uncompressedSize,4),tt+=a(j.length,2),tt+=a(M.length,2),{fileRecord:g.LOCAL_FILE_HEADER+tt+j+M,dirRecord:g.CENTRAL_FILE_HEADER+a(N,2)+tt+a(J.length,2)+"\0\0\0\0"+a(P,4)+a(y,4)+j+M+J}}var r=e("../utils"),c=e("../stream/GenericWorker"),h=e("../utf8"),p=e("../crc32"),g=e("../signature");function v(u,w,f,y){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=f,this.encodeFileName=y,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(v,c),v.prototype.push=function(u){var w=u.meta.percent||0,f=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,c.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:f?(w+100*(f-y-1))/f:100}}))},v.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var w=this.streamFiles&&!u.file.dir;if(w){var f=i(u,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(u){this.accumulate=!1;var w=this.streamFiles&&!u.file.dir,f=i(u,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),w)this.push({data:function(y){return g.DATA_DESCRIPTOR+a(y.crc32,4)+a(y.compressedSize,4)+a(y.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var u=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var f=this.bytesWritten-u,y=function(m,b,S,A,C){var O=r.transformTo("string",C(A));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(m,2)+a(m,2)+a(b,4)+a(S,4)+a(O.length,2)+O}(this.dirRecords.length,f,u,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(u){this._sources.push(u);var w=this;return u.on("data",function(f){w.processChunk(f)}),u.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),u.on("error",function(f){w.error(f)}),this},v.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(u){var w=this._sources;if(!c.prototype.error.call(this,u))return!1;for(var f=0;f<w.length;f++)try{w[f].error(u)}catch{}return!0},v.prototype.lock=function(){c.prototype.lock.call(this);for(var u=this._sources,w=0;w<u.length;w++)u[w].lock()},s.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,l){var a=e("../compressions"),i=e("./ZipFileWorker");l.generateWorker=function(r,c,h){var p=new i(c.streamFiles,h,c.platform,c.encodeFileName),g=0;try{r.forEach(function(v,u){g++;var w=function(b,S){var A=b||S,C=a[A];if(!C)throw new Error(A+" is not a valid compression method !");return C}(u.options.compression,c.compression),f=u.options.compressionOptions||c.compressionOptions||{},y=u.dir,m=u.date;u._compressWorker(w,f).withStreamInfo("file",{name:v,dir:y,date:m,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(p)}),p.entriesCount=g}catch(v){p.error(v)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,l){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new a;for(var r in this)typeof this[r]!="function"&&(i[r]=this[r]);return i}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(i,r){return new a().loadAsync(i,r)},a.external=e("./external"),s.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,l){var a=e("./utils"),i=e("./external"),r=e("./utf8"),c=e("./zipEntries"),h=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function g(v){return new i.Promise(function(u,w){var f=v.decompressed.getContentWorker().pipe(new h);f.on("error",function(y){w(y)}).on("end",function(){f.streamInfo.crc32!==v.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}s.exports=function(v,u){var w=this;return u=a.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),p.isNode&&p.isStream(v)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",v,!0,u.optimizedBinaryString,u.base64).then(function(f){var y=new c(u);return y.load(f),y}).then(function(f){var y=[i.Promise.resolve(f)],m=f.files;if(u.checkCRC32)for(var b=0;b<m.length;b++)y.push(g(m[b]));return i.Promise.all(y)}).then(function(f){for(var y=f.shift(),m=y.files,b=0;b<m.length;b++){var S=m[b],A=S.fileNameStr,C=a.resolve(S.fileNameStr);w.file(C,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:u.createFolders}),S.dir||(w.file(C).unsafeOriginalName=A)}return y.zipComment.length&&(w.comment=y.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,l){var a=e("../utils"),i=e("../stream/GenericWorker");function r(c,h){i.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(h)}a.inherits(r,i),r.prototype._bindStream=function(c){var h=this;(this._stream=c).pause(),c.on("data",function(p){h.push({data:p,meta:{percent:0}})}).on("error",function(p){h.isPaused?this.generatedError=p:h.error(p)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},r.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,l){var a=e("readable-stream").Readable;function i(r,c,h){a.call(this,c),this._helper=r;var p=this;r.on("data",function(g,v){p.push(g)||p._helper.pause(),h&&h(v)}).on("error",function(g){p.emit("error",g)}).on("end",function(){p.push(null)})}e("../utils").inherits(i,a),i.prototype._read=function(){this._helper.resume()},s.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,s,l){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,i);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,i)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var i=new Buffer(a);return i.fill(0),i},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(e,s,l){function a(C,O,E){var j,z=r.getTypeOf(O),D=r.extend(E||{},p);D.date=D.date||new Date,D.compression!==null&&(D.compression=D.compression.toUpperCase()),typeof D.unixPermissions=="string"&&(D.unixPermissions=parseInt(D.unixPermissions,8)),D.unixPermissions&&16384&D.unixPermissions&&(D.dir=!0),D.dosPermissions&&16&D.dosPermissions&&(D.dir=!0),D.dir&&(C=m(C)),D.createFolders&&(j=y(C))&&b.call(this,j,!0);var J=z==="string"&&D.binary===!1&&D.base64===!1;E&&E.binary!==void 0||(D.binary=!J),(O instanceof g&&O.uncompressedSize===0||D.dir||!O||O.length===0)&&(D.base64=!1,D.binary=!0,O="",D.compression="STORE",z="string");var x=null;x=O instanceof g||O instanceof c?O:w.isNode&&w.isStream(O)?new f(C,O):r.prepareContent(C,O,D.binary,D.optimizedBinaryString,D.base64);var L=new v(C,x,D);this.files[C]=L}var i=e("./utf8"),r=e("./utils"),c=e("./stream/GenericWorker"),h=e("./stream/StreamHelper"),p=e("./defaults"),g=e("./compressedObject"),v=e("./zipObject"),u=e("./generate"),w=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),y=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var O=C.lastIndexOf("/");return 0<O?C.substring(0,O):""},m=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},b=function(C,O){return O=O!==void 0?O:p.createFolders,C=m(C),this.files[C]||a.call(this,C,null,{dir:!0,createFolders:O}),this.files[C]};function S(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var O,E,j;for(O in this.files)j=this.files[O],(E=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&C(E,j)},filter:function(C){var O=[];return this.forEach(function(E,j){C(E,j)&&O.push(j)}),O},file:function(C,O,E){if(arguments.length!==1)return C=this.root+C,a.call(this,C,O,E),this;if(S(C)){var j=C;return this.filter(function(D,J){return!J.dir&&j.test(D)})}var z=this.files[this.root+C];return z&&!z.dir?z:null},folder:function(C){if(!C)return this;if(S(C))return this.filter(function(z,D){return D.dir&&C.test(z)});var O=this.root+C,E=b.call(this,O),j=this.clone();return j.root=E.name,j},remove:function(C){C=this.root+C;var O=this.files[C];if(O||(C.slice(-1)!=="/"&&(C+="/"),O=this.files[C]),O&&!O.dir)delete this.files[C];else for(var E=this.filter(function(z,D){return D.name.slice(0,C.length)===C}),j=0;j<E.length;j++)delete this.files[E[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var O,E={};try{if((E=r.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");r.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var j=E.comment||this.comment||"";O=u.generateWorker(this,E,j)}catch(z){(O=new c("error")).error(z)}return new h(O,E.type||"string",E.mimeType)},generateAsync:function(C,O){return this.generateInternalStream(C).accumulate(O)},generateNodeStream:function(C,O){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(O)}};s.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,l){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,l){var a=e("./DataReader");function i(r){a.call(this,r);for(var c=0;c<this.data.length;c++)r[c]=255&r[c]}e("../utils").inherits(i,a),i.prototype.byteAt=function(r){return this.data[this.zero+r]},i.prototype.lastIndexOfSignature=function(r){for(var c=r.charCodeAt(0),h=r.charCodeAt(1),p=r.charCodeAt(2),g=r.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===c&&this.data[v+1]===h&&this.data[v+2]===p&&this.data[v+3]===g)return v-this.zero;return-1},i.prototype.readAndCheckSignature=function(r){var c=r.charCodeAt(0),h=r.charCodeAt(1),p=r.charCodeAt(2),g=r.charCodeAt(3),v=this.readData(4);return c===v[0]&&h===v[1]&&p===v[2]&&g===v[3]},i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},s.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,s,l){var a=e("../utils");function i(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var c,h=0;for(this.checkOffset(r),c=this.index+r-1;c>=this.index;c--)h=(h<<8)+this.byteAt(c);return this.index+=r,h},readString:function(r){return a.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},s.exports=i},{"../utils":32}],19:[function(e,s,l){var a=e("./Uint8ArrayReader");function i(r){a.call(this,r)}e("../utils").inherits(i,a),i.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},s.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,l){var a=e("./DataReader");function i(r){a.call(this,r)}e("../utils").inherits(i,a),i.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},i.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},i.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},i.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},s.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,s,l){var a=e("./ArrayReader");function i(r){a.call(this,r)}e("../utils").inherits(i,a),i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},s.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,l){var a=e("../utils"),i=e("../support"),r=e("./ArrayReader"),c=e("./StringReader"),h=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");s.exports=function(g){var v=a.getTypeOf(g);return a.checkSupport(v),v!=="string"||i.uint8array?v==="nodebuffer"?new h(g):i.uint8array?new p(a.transformTo("uint8array",g)):new r(a.transformTo("array",g)):new c(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,l){var a=e("./GenericWorker"),i=e("../utils");function r(c){a.call(this,"ConvertWorker to "+c),this.destType=c}i.inherits(r,a),r.prototype.processChunk=function(c){this.push({data:i.transformTo(this.destType,c.data),meta:c.meta})},s.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,l){var a=e("./GenericWorker"),i=e("../crc32");function r(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(r,a),r.prototype.processChunk=function(c){this.streamInfo.crc32=i(c.data,this.streamInfo.crc32||0),this.push(c)},s.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,l){var a=e("../utils"),i=e("./GenericWorker");function r(c){i.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}a.inherits(r,i),r.prototype.processChunk=function(c){if(c){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+c.data.length}i.prototype.processChunk.call(this,c)},s.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,l){var a=e("../utils"),i=e("./GenericWorker");function r(c){i.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(p){h.dataIsReady=!0,h.data=p,h.max=p&&p.length||0,h.type=a.getTypeOf(p),h.isPaused||h._tickAndRepeat()},function(p){h.error(p)})}a.inherits(r,i),r.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h)}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,l){function a(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,r){return this._listeners[i].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,r){if(this._listeners[i])for(var c=0;c<this._listeners[i].length;c++)this._listeners[i][c].call(this,r)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var r=this;return i.on("data",function(c){r.processChunk(c)}),i.on("end",function(){r.end()}),i.on("error",function(c){r.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,r){return this.extraStreamInfo[i]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},s.exports=a},{}],29:[function(e,s,l){var a=e("../utils"),i=e("./ConvertWorker"),r=e("./GenericWorker"),c=e("../base64"),h=e("../support"),p=e("../external"),g=null;if(h.nodestream)try{g=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(w,f){return new p.Promise(function(y,m){var b=[],S=w._internalType,A=w._outputType,C=w._mimeType;w.on("data",function(O,E){b.push(O),f&&f(E)}).on("error",function(O){b=[],m(O)}).on("end",function(){try{var O=function(E,j,z){switch(E){case"blob":return a.newBlob(a.transformTo("arraybuffer",j),z);case"base64":return c.encode(j);default:return a.transformTo(E,j)}}(A,function(E,j){var z,D=0,J=null,x=0;for(z=0;z<j.length;z++)x+=j[z].length;switch(E){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(J=new Uint8Array(x),z=0;z<j.length;z++)J.set(j[z],D),D+=j[z].length;return J;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+E+"'")}}(S,b),C);y(O)}catch(E){m(E)}b=[]}).resume()})}function u(w,f,y){var m=f;switch(f){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=f,this._mimeType=y,a.checkSupport(m),this._worker=w.pipe(new i(m)),w.lock()}catch(b){this._worker=new r("error"),this._worker.error(b)}}u.prototype={accumulate:function(w){return v(this,w)},on:function(w,f){var y=this;return w==="data"?this._worker.on(w,function(m){f.call(y,m.data,m.meta)}):this._worker.on(w,function(){a.delay(f,arguments,y)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},w)}},s.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var a=new ArrayBuffer(0);try{l.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(a),l.blob=i.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!e("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,l){for(var a=e("./utils"),i=e("./support"),r=e("./nodejsUtils"),c=e("./stream/GenericWorker"),h=new Array(256),p=0;p<256;p++)h[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;h[254]=h[254]=1;function g(){c.call(this,"utf-8 decode"),this.leftOver=null}function v(){c.call(this,"utf-8 encode")}l.utf8encode=function(u){return i.nodebuffer?r.newBufferFrom(u,"utf-8"):function(w){var f,y,m,b,S,A=w.length,C=0;for(b=0;b<A;b++)(64512&(y=w.charCodeAt(b)))==55296&&b+1<A&&(64512&(m=w.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(m-56320),b++),C+=y<128?1:y<2048?2:y<65536?3:4;for(f=i.uint8array?new Uint8Array(C):new Array(C),b=S=0;S<C;b++)(64512&(y=w.charCodeAt(b)))==55296&&b+1<A&&(64512&(m=w.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(m-56320),b++),y<128?f[S++]=y:(y<2048?f[S++]=192|y>>>6:(y<65536?f[S++]=224|y>>>12:(f[S++]=240|y>>>18,f[S++]=128|y>>>12&63),f[S++]=128|y>>>6&63),f[S++]=128|63&y);return f}(u)},l.utf8decode=function(u){return i.nodebuffer?a.transformTo("nodebuffer",u).toString("utf-8"):function(w){var f,y,m,b,S=w.length,A=new Array(2*S);for(f=y=0;f<S;)if((m=w[f++])<128)A[y++]=m;else if(4<(b=h[m]))A[y++]=65533,f+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&f<S;)m=m<<6|63&w[f++],b--;1<b?A[y++]=65533:m<65536?A[y++]=m:(m-=65536,A[y++]=55296|m>>10&1023,A[y++]=56320|1023&m)}return A.length!==y&&(A.subarray?A=A.subarray(0,y):A.length=y),a.applyFromCharCode(A)}(u=a.transformTo(i.uint8array?"uint8array":"array",u))},a.inherits(g,c),g.prototype.processChunk=function(u){var w=a.transformTo(i.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var f=w;(w=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),w.set(f,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var y=function(b,S){var A;for((S=S||b.length)>b.length&&(S=b.length),A=S-1;0<=A&&(192&b[A])==128;)A--;return A<0||A===0?S:A+h[b[A]]>S?A:S}(w),m=w;y!==w.length&&(i.uint8array?(m=w.subarray(0,y),this.leftOver=w.subarray(y,w.length)):(m=w.slice(0,y),this.leftOver=w.slice(y,w.length))),this.push({data:l.utf8decode(m),meta:u.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=g,a.inherits(v,c),v.prototype.processChunk=function(u){this.push({data:l.utf8encode(u.data),meta:u.meta})},l.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,l){var a=e("./support"),i=e("./base64"),r=e("./nodejsUtils"),c=e("./external");function h(f){return f}function p(f,y){for(var m=0;m<f.length;++m)y[m]=255&f.charCodeAt(m);return y}e("setimmediate"),l.newBlob=function(f,y){l.checkSupport("blob");try{return new Blob([f],{type:y})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(f),m.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(f,y,m){var b=[],S=0,A=f.length;if(A<=m)return String.fromCharCode.apply(null,f);for(;S<A;)y==="array"||y==="nodebuffer"?b.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+m,A)))):b.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+m,A)))),S+=m;return b.join("")},stringifyByChar:function(f){for(var y="",m=0;m<f.length;m++)y+=String.fromCharCode(f[m]);return y},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function v(f){var y=65536,m=l.getTypeOf(f),b=!0;if(m==="uint8array"?b=g.applyCanBeUsed.uint8array:m==="nodebuffer"&&(b=g.applyCanBeUsed.nodebuffer),b)for(;1<y;)try{return g.stringifyByChunk(f,m,y)}catch{y=Math.floor(y/2)}return g.stringifyByChar(f)}function u(f,y){for(var m=0;m<f.length;m++)y[m]=f[m];return y}l.applyFromCharCode=v;var w={};w.string={string:h,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return w.string.uint8array(f).buffer},uint8array:function(f){return p(f,new Uint8Array(f.length))},nodebuffer:function(f){return p(f,r.allocBuffer(f.length))}},w.array={string:v,array:h,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return r.newBufferFrom(f)}},w.arraybuffer={string:function(f){return v(new Uint8Array(f))},array:function(f){return u(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:h,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return r.newBufferFrom(new Uint8Array(f))}},w.uint8array={string:v,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:h,nodebuffer:function(f){return r.newBufferFrom(f)}},w.nodebuffer={string:v,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return w.nodebuffer.uint8array(f).buffer},uint8array:function(f){return u(f,new Uint8Array(f.length))},nodebuffer:h},l.transformTo=function(f,y){if(y=y||"",!f)return y;l.checkSupport(f);var m=l.getTypeOf(y);return w[m][f](y)},l.resolve=function(f){for(var y=f.split("/"),m=[],b=0;b<y.length;b++){var S=y[b];S==="."||S===""&&b!==0&&b!==y.length-1||(S===".."?m.pop():m.push(S))}return m.join("/")},l.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":a.nodebuffer&&r.isBuffer(f)?"nodebuffer":a.uint8array&&f instanceof Uint8Array?"uint8array":a.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(f){if(!a[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(f){var y,m,b="";for(m=0;m<(f||"").length;m++)b+="\\x"+((y=f.charCodeAt(m))<16?"0":"")+y.toString(16).toUpperCase();return b},l.delay=function(f,y,m){setImmediate(function(){f.apply(m||null,y||[])})},l.inherits=function(f,y){function m(){}m.prototype=y.prototype,f.prototype=new m},l.extend=function(){var f,y,m={};for(f=0;f<arguments.length;f++)for(y in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],y)&&m[y]===void 0&&(m[y]=arguments[f][y]);return m},l.prepareContent=function(f,y,m,b,S){return c.Promise.resolve(y).then(function(A){return a.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new c.Promise(function(C,O){var E=new FileReader;E.onload=function(j){C(j.target.result)},E.onerror=function(j){O(j.target.error)},E.readAsArrayBuffer(A)}):A}).then(function(A){var C=l.getTypeOf(A);return C?(C==="arraybuffer"?A=l.transformTo("uint8array",A):C==="string"&&(S?A=i.decode(A):m&&b!==!0&&(A=function(O){return p(O,a.uint8array?new Uint8Array(O.length):new Array(O.length))}(A))),A):c.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,s,l){var a=e("./reader/readerFor"),i=e("./utils"),r=e("./signature"),c=e("./zipEntry"),h=e("./support");function p(g){this.files=[],this.loadOptions=g}p.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(v)+", expected "+i.pretty(g)+")")}},isSignature:function(g,v){var u=this.reader.index;this.reader.setIndex(g);var w=this.reader.readString(4)===v;return this.reader.setIndex(u),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),v=h.uint8array?"uint8array":"array",u=i.transformTo(v,g);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,v,u,w=this.zip64EndOfCentralSize-44;0<w;)g=this.reader.readInt(2),v=this.reader.readInt(4),u=this.reader.readData(v),this.zip64ExtensibleData[g]={id:g,length:v,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,v;for(g=0;g<this.files.length;g++)v=this.files[g],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(g=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var v=g;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var w=v-u;if(0<w)this.isSignature(v,r.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(g){this.reader=a(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,s,l){var a=e("./reader/readerFor"),i=e("./utils"),r=e("./compressedObject"),c=e("./crc32"),h=e("./utf8"),p=e("./compressions"),g=e("./support");function v(u,w){this.options=u,this.loadOptions=w}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var w,f;if(u.skip(22),this.fileNameLength=u.readInt(2),f=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(y){for(var m in p)if(Object.prototype.hasOwnProperty.call(p,m)&&p[m].magic===y)return p[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,w,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var w=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(w),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=a(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var w,f,y,m=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<m;)w=u.readInt(2),f=u.readInt(2),y=u.readData(f),this.extraFields[w]={id:w,length:f,value:y};u.setIndex(m)},handleUTF8:function(){var u=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var f=i.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var m=i.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var w=a(u.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:h.utf8decode(w.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var w=a(u.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:h.utf8decode(w.readData(u.length-5))}return null}},s.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,l){function a(w,f,y){this.name=w,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=f,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var i=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),c=e("./utf8"),h=e("./compressedObject"),p=e("./stream/GenericWorker");a.prototype={internalStream:function(w){var f=null,y="string";try{if(!w)throw new Error("No output type specified.");var m=(y=w.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),f=this._decompressWorker();var b=!this._dataBinary;b&&!m&&(f=f.pipe(new c.Utf8EncodeWorker)),!b&&m&&(f=f.pipe(new c.Utf8DecodeWorker))}catch(S){(f=new p("error")).error(S)}return new i(f,y,"")},async:function(w,f){return this.internalStream(w).accumulate(f)},nodeStream:function(w,f){return this.internalStream(w||"nodebuffer").toNodejsStream(f)},_compressWorker:function(w,f){if(this._data instanceof h&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new c.Utf8EncodeWorker)),h.createWorkerFrom(y,w,f)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof p?this._data:new r(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<g.length;u++)a.prototype[g[u]]=v;s.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,l){(function(a){var i,r,c=a.MutationObserver||a.WebKitMutationObserver;if(c){var h=0,p=new c(w),g=a.document.createTextNode("");p.observe(g,{characterData:!0}),i=function(){g.data=h=++h%2}}else if(a.setImmediate||a.MessageChannel===void 0)i="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var f=a.document.createElement("script");f.onreadystatechange=function(){w(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},a.document.documentElement.appendChild(f)}:function(){setTimeout(w,0)};else{var v=new a.MessageChannel;v.port1.onmessage=w,i=function(){v.port2.postMessage(0)}}var u=[];function w(){var f,y;r=!0;for(var m=u.length;m;){for(y=u,u=[],f=-1;++f<m;)y[f]();m=u.length}r=!1}s.exports=function(f){u.push(f)!==1||r||i()}}).call(this,typeof De<"u"?De:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,s,l){var a=e("immediate");function i(){}var r={},c=["REJECTED"],h=["FULFILLED"],p=["PENDING"];function g(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,m!==i&&f(this,m)}function v(m,b,S){this.promise=m,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function u(m,b,S){a(function(){var A;try{A=b(S)}catch(C){return r.reject(m,C)}A===m?r.reject(m,new TypeError("Cannot resolve promise with itself")):r.resolve(m,A)})}function w(m){var b=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof b=="function")return function(){b.apply(m,arguments)}}function f(m,b){var S=!1;function A(E){S||(S=!0,r.reject(m,E))}function C(E){S||(S=!0,r.resolve(m,E))}var O=y(function(){b(C,A)});O.status==="error"&&A(O.value)}function y(m,b){var S={};try{S.value=m(b),S.status="success"}catch(A){S.status="error",S.value=A}return S}(s.exports=g).prototype.finally=function(m){if(typeof m!="function")return this;var b=this.constructor;return this.then(function(S){return b.resolve(m()).then(function(){return S})},function(S){return b.resolve(m()).then(function(){throw S})})},g.prototype.catch=function(m){return this.then(null,m)},g.prototype.then=function(m,b){if(typeof m!="function"&&this.state===h||typeof b!="function"&&this.state===c)return this;var S=new this.constructor(i);return this.state!==p?u(S,this.state===h?m:b,this.outcome):this.queue.push(new v(S,m,b)),S},v.prototype.callFulfilled=function(m){r.resolve(this.promise,m)},v.prototype.otherCallFulfilled=function(m){u(this.promise,this.onFulfilled,m)},v.prototype.callRejected=function(m){r.reject(this.promise,m)},v.prototype.otherCallRejected=function(m){u(this.promise,this.onRejected,m)},r.resolve=function(m,b){var S=y(w,b);if(S.status==="error")return r.reject(m,S.value);var A=S.value;if(A)f(m,A);else{m.state=h,m.outcome=b;for(var C=-1,O=m.queue.length;++C<O;)m.queue[C].callFulfilled(b)}return m},r.reject=function(m,b){m.state=c,m.outcome=b;for(var S=-1,A=m.queue.length;++S<A;)m.queue[S].callRejected(b);return m},g.resolve=function(m){return m instanceof this?m:r.resolve(new this(i),m)},g.reject=function(m){var b=new this(i);return r.reject(b,m)},g.all=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=m.length,A=!1;if(!S)return this.resolve([]);for(var C=new Array(S),O=0,E=-1,j=new this(i);++E<S;)z(m[E],E);return j;function z(D,J){b.resolve(D).then(function(x){C[J]=x,++O!==S||A||(A=!0,r.resolve(j,C))},function(x){A||(A=!0,r.reject(j,x))})}},g.race=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=m.length,A=!1;if(!S)return this.resolve([]);for(var C=-1,O=new this(i);++C<S;)E=m[C],b.resolve(E).then(function(j){A||(A=!0,r.resolve(O,j))},function(j){A||(A=!0,r.reject(O,j))});var E;return O}},{immediate:36}],38:[function(e,s,l){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,l){var a=e("./zlib/deflate"),i=e("./utils/common"),r=e("./utils/strings"),c=e("./zlib/messages"),h=e("./zlib/zstream"),p=Object.prototype.toString,g=0,v=-1,u=0,w=8;function f(m){if(!(this instanceof f))return new f(m);this.options=i.assign({level:v,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},m||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=a.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(S!==g)throw new Error(c[S]);if(b.header&&a.deflateSetHeader(this.strm,b.header),b.dictionary){var A;if(A=typeof b.dictionary=="string"?r.string2buf(b.dictionary):p.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(S=a.deflateSetDictionary(this.strm,A))!==g)throw new Error(c[S]);this._dict_set=!0}}function y(m,b){var S=new f(b);if(S.push(m,!0),S.err)throw S.msg||c[S.err];return S.result}f.prototype.push=function(m,b){var S,A,C=this.strm,O=this.options.chunkSize;if(this.ended)return!1;A=b===~~b?b:b===!0?4:0,typeof m=="string"?C.input=r.string2buf(m):p.call(m)==="[object ArrayBuffer]"?C.input=new Uint8Array(m):C.input=m,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new i.Buf8(O),C.next_out=0,C.avail_out=O),(S=a.deflate(C,A))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(i.shrinkBuf(C.output,C.next_out))):this.onData(i.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&S!==1);return A===4?(S=a.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):A!==2||(this.onEnd(g),!(C.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},l.Deflate=f,l.deflate=y,l.deflateRaw=function(m,b){return(b=b||{}).raw=!0,y(m,b)},l.gzip=function(m,b){return(b=b||{}).gzip=!0,y(m,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,l){var a=e("./zlib/inflate"),i=e("./utils/common"),r=e("./utils/strings"),c=e("./zlib/constants"),h=e("./zlib/messages"),p=e("./zlib/zstream"),g=e("./zlib/gzheader"),v=Object.prototype.toString;function u(f){if(!(this instanceof u))return new u(f);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},f||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||f&&f.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var m=a.inflateInit2(this.strm,y.windowBits);if(m!==c.Z_OK)throw new Error(h[m]);this.header=new g,a.inflateGetHeader(this.strm,this.header)}function w(f,y){var m=new u(y);if(m.push(f,!0),m.err)throw m.msg||h[m.err];return m.result}u.prototype.push=function(f,y){var m,b,S,A,C,O,E=this.strm,j=this.options.chunkSize,z=this.options.dictionary,D=!1;if(this.ended)return!1;b=y===~~y?y:y===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof f=="string"?E.input=r.binstring2buf(f):v.call(f)==="[object ArrayBuffer]"?E.input=new Uint8Array(f):E.input=f,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new i.Buf8(j),E.next_out=0,E.avail_out=j),(m=a.inflate(E,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&z&&(O=typeof z=="string"?r.string2buf(z):v.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,m=a.inflateSetDictionary(this.strm,O)),m===c.Z_BUF_ERROR&&D===!0&&(m=c.Z_OK,D=!1),m!==c.Z_STREAM_END&&m!==c.Z_OK)return this.onEnd(m),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&m!==c.Z_STREAM_END&&(E.avail_in!==0||b!==c.Z_FINISH&&b!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=r.utf8border(E.output,E.next_out),A=E.next_out-S,C=r.buf2string(E.output,S),E.next_out=A,E.avail_out=j-A,A&&i.arraySet(E.output,E.output,S,A,0),this.onData(C)):this.onData(i.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(D=!0)}while((0<E.avail_in||E.avail_out===0)&&m!==c.Z_STREAM_END);return m===c.Z_STREAM_END&&(b=c.Z_FINISH),b===c.Z_FINISH?(m=a.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===c.Z_OK):b!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(E.avail_out=0))},u.prototype.onData=function(f){this.chunks.push(f)},u.prototype.onEnd=function(f){f===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},l.Inflate=u,l.inflate=w,l.inflateRaw=function(f,y){return(y=y||{}).raw=!0,w(f,y)},l.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,l){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(c){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var p=h.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var g in p)p.hasOwnProperty(g)&&(c[g]=p[g])}}return c},l.shrinkBuf=function(c,h){return c.length===h?c:c.subarray?c.subarray(0,h):(c.length=h,c)};var i={arraySet:function(c,h,p,g,v){if(h.subarray&&c.subarray)c.set(h.subarray(p,p+g),v);else for(var u=0;u<g;u++)c[v+u]=h[p+u]},flattenChunks:function(c){var h,p,g,v,u,w;for(h=g=0,p=c.length;h<p;h++)g+=c[h].length;for(w=new Uint8Array(g),h=v=0,p=c.length;h<p;h++)u=c[h],w.set(u,v),v+=u.length;return w}},r={arraySet:function(c,h,p,g,v){for(var u=0;u<g;u++)c[v+u]=h[p+u]},flattenChunks:function(c){return[].concat.apply([],c)}};l.setTyped=function(c){c?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,i)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,r))},l.setTyped(a)},{}],42:[function(e,s,l){var a=e("./common"),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var c=new a.Buf8(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function p(g,v){if(v<65537&&(g.subarray&&r||!g.subarray&&i))return String.fromCharCode.apply(null,a.shrinkBuf(g,v));for(var u="",w=0;w<v;w++)u+=String.fromCharCode(g[w]);return u}c[254]=c[254]=1,l.string2buf=function(g){var v,u,w,f,y,m=g.length,b=0;for(f=0;f<m;f++)(64512&(u=g.charCodeAt(f)))==55296&&f+1<m&&(64512&(w=g.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),f++),b+=u<128?1:u<2048?2:u<65536?3:4;for(v=new a.Buf8(b),f=y=0;y<b;f++)(64512&(u=g.charCodeAt(f)))==55296&&f+1<m&&(64512&(w=g.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),f++),u<128?v[y++]=u:(u<2048?v[y++]=192|u>>>6:(u<65536?v[y++]=224|u>>>12:(v[y++]=240|u>>>18,v[y++]=128|u>>>12&63),v[y++]=128|u>>>6&63),v[y++]=128|63&u);return v},l.buf2binstring=function(g){return p(g,g.length)},l.binstring2buf=function(g){for(var v=new a.Buf8(g.length),u=0,w=v.length;u<w;u++)v[u]=g.charCodeAt(u);return v},l.buf2string=function(g,v){var u,w,f,y,m=v||g.length,b=new Array(2*m);for(u=w=0;u<m;)if((f=g[u++])<128)b[w++]=f;else if(4<(y=c[f]))b[w++]=65533,u+=y-1;else{for(f&=y===2?31:y===3?15:7;1<y&&u<m;)f=f<<6|63&g[u++],y--;1<y?b[w++]=65533:f<65536?b[w++]=f:(f-=65536,b[w++]=55296|f>>10&1023,b[w++]=56320|1023&f)}return p(b,w)},l.utf8border=function(g,v){var u;for((v=v||g.length)>g.length&&(v=g.length),u=v-1;0<=u&&(192&g[u])==128;)u--;return u<0||u===0?v:u+c[g[u]]>v?u:v}},{"./common":41}],43:[function(e,s,l){s.exports=function(a,i,r,c){for(var h=65535&a|0,p=a>>>16&65535|0,g=0;r!==0;){for(r-=g=2e3<r?2e3:r;p=p+(h=h+i[c++]|0)|0,--g;);h%=65521,p%=65521}return h|p<<16|0}},{}],44:[function(e,s,l){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,l){var a=function(){for(var i,r=[],c=0;c<256;c++){i=c;for(var h=0;h<8;h++)i=1&i?3988292384^i>>>1:i>>>1;r[c]=i}return r}();s.exports=function(i,r,c,h){var p=a,g=h+c;i^=-1;for(var v=h;v<g;v++)i=i>>>8^p[255&(i^r[v])];return-1^i}},{}],46:[function(e,s,l){var a,i=e("../utils/common"),r=e("./trees"),c=e("./adler32"),h=e("./crc32"),p=e("./messages"),g=0,v=4,u=0,w=-2,f=-1,y=4,m=2,b=8,S=9,A=286,C=30,O=19,E=2*A+1,j=15,z=3,D=258,J=D+z+1,x=42,L=113,d=1,M=2,ot=3,Z=4;function ct(o,W){return o.msg=p[W],W}function Y(o){return(o<<1)-(4<o?9:0)}function lt(o){for(var W=o.length;0<=--W;)o[W]=0}function B(o){var W=o.state,T=W.pending;T>o.avail_out&&(T=o.avail_out),T!==0&&(i.arraySet(o.output,W.pending_buf,W.pending_out,T,o.next_out),o.next_out+=T,W.pending_out+=T,o.total_out+=T,o.avail_out-=T,W.pending-=T,W.pending===0&&(W.pending_out=0))}function P(o,W){r._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,W),o.block_start=o.strstart,B(o.strm)}function N(o,W){o.pending_buf[o.pending++]=W}function tt(o,W){o.pending_buf[o.pending++]=W>>>8&255,o.pending_buf[o.pending++]=255&W}function V(o,W){var T,k,_=o.max_chain_length,I=o.strstart,q=o.prev_length,G=o.nice_match,U=o.strstart>o.w_size-J?o.strstart-(o.w_size-J):0,$=o.window,R=o.w_mask,F=o.prev,Q=o.strstart+D,H=$[I+q-1],K=$[I+q];o.prev_length>=o.good_match&&(_>>=2),G>o.lookahead&&(G=o.lookahead);do if($[(T=W)+q]===K&&$[T+q-1]===H&&$[T]===$[I]&&$[++T]===$[I+1]){I+=2,T++;do;while($[++I]===$[++T]&&$[++I]===$[++T]&&$[++I]===$[++T]&&$[++I]===$[++T]&&$[++I]===$[++T]&&$[++I]===$[++T]&&$[++I]===$[++T]&&$[++I]===$[++T]&&I<Q);if(k=D-(Q-I),I=Q-D,q<k){if(o.match_start=W,G<=(q=k))break;H=$[I+q-1],K=$[I+q]}}while((W=F[W&R])>U&&--_!=0);return q<=o.lookahead?q:o.lookahead}function dt(o){var W,T,k,_,I,q,G,U,$,R,F=o.w_size;do{if(_=o.window_size-o.lookahead-o.strstart,o.strstart>=F+(F-J)){for(i.arraySet(o.window,o.window,F,F,0),o.match_start-=F,o.strstart-=F,o.block_start-=F,W=T=o.hash_size;k=o.head[--W],o.head[W]=F<=k?k-F:0,--T;);for(W=T=F;k=o.prev[--W],o.prev[W]=F<=k?k-F:0,--T;);_+=F}if(o.strm.avail_in===0)break;if(q=o.strm,G=o.window,U=o.strstart+o.lookahead,$=_,R=void 0,R=q.avail_in,$<R&&(R=$),T=R===0?0:(q.avail_in-=R,i.arraySet(G,q.input,q.next_in,R,U),q.state.wrap===1?q.adler=c(q.adler,G,R,U):q.state.wrap===2&&(q.adler=h(q.adler,G,R,U)),q.next_in+=R,q.total_in+=R,R),o.lookahead+=T,o.lookahead+o.insert>=z)for(I=o.strstart-o.insert,o.ins_h=o.window[I],o.ins_h=(o.ins_h<<o.hash_shift^o.window[I+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[I+z-1])&o.hash_mask,o.prev[I&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=I,I++,o.insert--,!(o.lookahead+o.insert<z)););}while(o.lookahead<J&&o.strm.avail_in!==0)}function at(o,W){for(var T,k;;){if(o.lookahead<J){if(dt(o),o.lookahead<J&&W===g)return d;if(o.lookahead===0)break}if(T=0,o.lookahead>=z&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+z-1])&o.hash_mask,T=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),T!==0&&o.strstart-T<=o.w_size-J&&(o.match_length=V(o,T)),o.match_length>=z)if(k=r._tr_tally(o,o.strstart-o.match_start,o.match_length-z),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=z){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+z-1])&o.hash_mask,T=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else k=r._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(k&&(P(o,!1),o.strm.avail_out===0))return d}return o.insert=o.strstart<z-1?o.strstart:z-1,W===v?(P(o,!0),o.strm.avail_out===0?ot:Z):o.last_lit&&(P(o,!1),o.strm.avail_out===0)?d:M}function ut(o,W){for(var T,k,_;;){if(o.lookahead<J){if(dt(o),o.lookahead<J&&W===g)return d;if(o.lookahead===0)break}if(T=0,o.lookahead>=z&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+z-1])&o.hash_mask,T=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=z-1,T!==0&&o.prev_length<o.max_lazy_match&&o.strstart-T<=o.w_size-J&&(o.match_length=V(o,T),o.match_length<=5&&(o.strategy===1||o.match_length===z&&4096<o.strstart-o.match_start)&&(o.match_length=z-1)),o.prev_length>=z&&o.match_length<=o.prev_length){for(_=o.strstart+o.lookahead-z,k=r._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-z),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=_&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+z-1])&o.hash_mask,T=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=z-1,o.strstart++,k&&(P(o,!1),o.strm.avail_out===0))return d}else if(o.match_available){if((k=r._tr_tally(o,0,o.window[o.strstart-1]))&&P(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return d}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(k=r._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<z-1?o.strstart:z-1,W===v?(P(o,!0),o.strm.avail_out===0?ot:Z):o.last_lit&&(P(o,!1),o.strm.avail_out===0)?d:M}function ht(o,W,T,k,_){this.good_length=o,this.max_lazy=W,this.nice_length=T,this.max_chain=k,this.func=_}function wt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*E),this.dyn_dtree=new i.Buf16(2*(2*C+1)),this.bl_tree=new i.Buf16(2*(2*O+1)),lt(this.dyn_ltree),lt(this.dyn_dtree),lt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(j+1),this.heap=new i.Buf16(2*A+1),lt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*A+1),lt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function bt(o){var W;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=m,(W=o.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?x:L,o.adler=W.wrap===2?0:1,W.last_flush=g,r._tr_init(W),u):ct(o,w)}function Tt(o){var W=bt(o);return W===u&&function(T){T.window_size=2*T.w_size,lt(T.head),T.max_lazy_match=a[T.level].max_lazy,T.good_match=a[T.level].good_length,T.nice_match=a[T.level].nice_length,T.max_chain_length=a[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=z-1,T.match_available=0,T.ins_h=0}(o.state),W}function Ot(o,W,T,k,_,I){if(!o)return w;var q=1;if(W===f&&(W=6),k<0?(q=0,k=-k):15<k&&(q=2,k-=16),_<1||S<_||T!==b||k<8||15<k||W<0||9<W||I<0||y<I)return ct(o,w);k===8&&(k=9);var G=new wt;return(o.state=G).strm=o,G.wrap=q,G.gzhead=null,G.w_bits=k,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=_+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+z-1)/z),G.window=new i.Buf8(2*G.w_size),G.head=new i.Buf16(G.hash_size),G.prev=new i.Buf16(G.w_size),G.lit_bufsize=1<<_+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new i.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=W,G.strategy=I,G.method=T,Tt(o)}a=[new ht(0,0,0,0,function(o,W){var T=65535;for(T>o.pending_buf_size-5&&(T=o.pending_buf_size-5);;){if(o.lookahead<=1){if(dt(o),o.lookahead===0&&W===g)return d;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var k=o.block_start+T;if((o.strstart===0||o.strstart>=k)&&(o.lookahead=o.strstart-k,o.strstart=k,P(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-J&&(P(o,!1),o.strm.avail_out===0))return d}return o.insert=0,W===v?(P(o,!0),o.strm.avail_out===0?ot:Z):(o.strstart>o.block_start&&(P(o,!1),o.strm.avail_out),d)}),new ht(4,4,8,4,at),new ht(4,5,16,8,at),new ht(4,6,32,32,at),new ht(4,4,16,16,ut),new ht(8,16,32,32,ut),new ht(8,16,128,128,ut),new ht(8,32,128,256,ut),new ht(32,128,258,1024,ut),new ht(32,258,258,4096,ut)],l.deflateInit=function(o,W){return Ot(o,W,b,15,8,0)},l.deflateInit2=Ot,l.deflateReset=Tt,l.deflateResetKeep=bt,l.deflateSetHeader=function(o,W){return o&&o.state?o.state.wrap!==2?w:(o.state.gzhead=W,u):w},l.deflate=function(o,W){var T,k,_,I;if(!o||!o.state||5<W||W<0)return o?ct(o,w):w;if(k=o.state,!o.output||!o.input&&o.avail_in!==0||k.status===666&&W!==v)return ct(o,o.avail_out===0?-5:w);if(k.strm=o,T=k.last_flush,k.last_flush=W,k.status===x)if(k.wrap===2)o.adler=0,N(k,31),N(k,139),N(k,8),k.gzhead?(N(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),N(k,255&k.gzhead.time),N(k,k.gzhead.time>>8&255),N(k,k.gzhead.time>>16&255),N(k,k.gzhead.time>>24&255),N(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),N(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(N(k,255&k.gzhead.extra.length),N(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(o.adler=h(o.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(N(k,0),N(k,0),N(k,0),N(k,0),N(k,0),N(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),N(k,3),k.status=L);else{var q=b+(k.w_bits-8<<4)<<8;q|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(q|=32),q+=31-q%31,k.status=L,tt(k,q),k.strstart!==0&&(tt(k,o.adler>>>16),tt(k,65535&o.adler)),o.adler=1}if(k.status===69)if(k.gzhead.extra){for(_=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>_&&(o.adler=h(o.adler,k.pending_buf,k.pending-_,_)),B(o),_=k.pending,k.pending!==k.pending_buf_size));)N(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>_&&(o.adler=h(o.adler,k.pending_buf,k.pending-_,_)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){_=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>_&&(o.adler=h(o.adler,k.pending_buf,k.pending-_,_)),B(o),_=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,N(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>_&&(o.adler=h(o.adler,k.pending_buf,k.pending-_,_)),I===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){_=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>_&&(o.adler=h(o.adler,k.pending_buf,k.pending-_,_)),B(o),_=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,N(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>_&&(o.adler=h(o.adler,k.pending_buf,k.pending-_,_)),I===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&B(o),k.pending+2<=k.pending_buf_size&&(N(k,255&o.adler),N(k,o.adler>>8&255),o.adler=0,k.status=L)):k.status=L),k.pending!==0){if(B(o),o.avail_out===0)return k.last_flush=-1,u}else if(o.avail_in===0&&Y(W)<=Y(T)&&W!==v)return ct(o,-5);if(k.status===666&&o.avail_in!==0)return ct(o,-5);if(o.avail_in!==0||k.lookahead!==0||W!==g&&k.status!==666){var G=k.strategy===2?function(U,$){for(var R;;){if(U.lookahead===0&&(dt(U),U.lookahead===0)){if($===g)return d;break}if(U.match_length=0,R=r._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,R&&(P(U,!1),U.strm.avail_out===0))return d}return U.insert=0,$===v?(P(U,!0),U.strm.avail_out===0?ot:Z):U.last_lit&&(P(U,!1),U.strm.avail_out===0)?d:M}(k,W):k.strategy===3?function(U,$){for(var R,F,Q,H,K=U.window;;){if(U.lookahead<=D){if(dt(U),U.lookahead<=D&&$===g)return d;if(U.lookahead===0)break}if(U.match_length=0,U.lookahead>=z&&0<U.strstart&&(F=K[Q=U.strstart-1])===K[++Q]&&F===K[++Q]&&F===K[++Q]){H=U.strstart+D;do;while(F===K[++Q]&&F===K[++Q]&&F===K[++Q]&&F===K[++Q]&&F===K[++Q]&&F===K[++Q]&&F===K[++Q]&&F===K[++Q]&&Q<H);U.match_length=D-(H-Q),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=z?(R=r._tr_tally(U,1,U.match_length-z),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(R=r._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),R&&(P(U,!1),U.strm.avail_out===0))return d}return U.insert=0,$===v?(P(U,!0),U.strm.avail_out===0?ot:Z):U.last_lit&&(P(U,!1),U.strm.avail_out===0)?d:M}(k,W):a[k.level].func(k,W);if(G!==ot&&G!==Z||(k.status=666),G===d||G===ot)return o.avail_out===0&&(k.last_flush=-1),u;if(G===M&&(W===1?r._tr_align(k):W!==5&&(r._tr_stored_block(k,0,0,!1),W===3&&(lt(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),B(o),o.avail_out===0))return k.last_flush=-1,u}return W!==v?u:k.wrap<=0?1:(k.wrap===2?(N(k,255&o.adler),N(k,o.adler>>8&255),N(k,o.adler>>16&255),N(k,o.adler>>24&255),N(k,255&o.total_in),N(k,o.total_in>>8&255),N(k,o.total_in>>16&255),N(k,o.total_in>>24&255)):(tt(k,o.adler>>>16),tt(k,65535&o.adler)),B(o),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?u:1)},l.deflateEnd=function(o){var W;return o&&o.state?(W=o.state.status)!==x&&W!==69&&W!==73&&W!==91&&W!==103&&W!==L&&W!==666?ct(o,w):(o.state=null,W===L?ct(o,-3):u):w},l.deflateSetDictionary=function(o,W){var T,k,_,I,q,G,U,$,R=W.length;if(!o||!o.state||(I=(T=o.state).wrap)===2||I===1&&T.status!==x||T.lookahead)return w;for(I===1&&(o.adler=c(o.adler,W,R,0)),T.wrap=0,R>=T.w_size&&(I===0&&(lt(T.head),T.strstart=0,T.block_start=0,T.insert=0),$=new i.Buf8(T.w_size),i.arraySet($,W,R-T.w_size,T.w_size,0),W=$,R=T.w_size),q=o.avail_in,G=o.next_in,U=o.input,o.avail_in=R,o.next_in=0,o.input=W,dt(T);T.lookahead>=z;){for(k=T.strstart,_=T.lookahead-(z-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[k+z-1])&T.hash_mask,T.prev[k&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=k,k++,--_;);T.strstart=k,T.lookahead=z-1,dt(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=z-1,T.match_available=0,o.next_in=G,o.input=U,o.avail_in=q,T.wrap=I,u},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,l){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,l){s.exports=function(a,i){var r,c,h,p,g,v,u,w,f,y,m,b,S,A,C,O,E,j,z,D,J,x,L,d,M;r=a.state,c=a.next_in,d=a.input,h=c+(a.avail_in-5),p=a.next_out,M=a.output,g=p-(i-a.avail_out),v=p+(a.avail_out-257),u=r.dmax,w=r.wsize,f=r.whave,y=r.wnext,m=r.window,b=r.hold,S=r.bits,A=r.lencode,C=r.distcode,O=(1<<r.lenbits)-1,E=(1<<r.distbits)-1;t:do{S<15&&(b+=d[c++]<<S,S+=8,b+=d[c++]<<S,S+=8),j=A[b&O];e:for(;;){if(b>>>=z=j>>>24,S-=z,(z=j>>>16&255)===0)M[p++]=65535&j;else{if(!(16&z)){if((64&z)==0){j=A[(65535&j)+(b&(1<<z)-1)];continue e}if(32&z){r.mode=12;break t}a.msg="invalid literal/length code",r.mode=30;break t}D=65535&j,(z&=15)&&(S<z&&(b+=d[c++]<<S,S+=8),D+=b&(1<<z)-1,b>>>=z,S-=z),S<15&&(b+=d[c++]<<S,S+=8,b+=d[c++]<<S,S+=8),j=C[b&E];n:for(;;){if(b>>>=z=j>>>24,S-=z,!(16&(z=j>>>16&255))){if((64&z)==0){j=C[(65535&j)+(b&(1<<z)-1)];continue n}a.msg="invalid distance code",r.mode=30;break t}if(J=65535&j,S<(z&=15)&&(b+=d[c++]<<S,(S+=8)<z&&(b+=d[c++]<<S,S+=8)),u<(J+=b&(1<<z)-1)){a.msg="invalid distance too far back",r.mode=30;break t}if(b>>>=z,S-=z,(z=p-g)<J){if(f<(z=J-z)&&r.sane){a.msg="invalid distance too far back",r.mode=30;break t}if(L=m,(x=0)===y){if(x+=w-z,z<D){for(D-=z;M[p++]=m[x++],--z;);x=p-J,L=M}}else if(y<z){if(x+=w+y-z,(z-=y)<D){for(D-=z;M[p++]=m[x++],--z;);if(x=0,y<D){for(D-=z=y;M[p++]=m[x++],--z;);x=p-J,L=M}}}else if(x+=y-z,z<D){for(D-=z;M[p++]=m[x++],--z;);x=p-J,L=M}for(;2<D;)M[p++]=L[x++],M[p++]=L[x++],M[p++]=L[x++],D-=3;D&&(M[p++]=L[x++],1<D&&(M[p++]=L[x++]))}else{for(x=p-J;M[p++]=M[x++],M[p++]=M[x++],M[p++]=M[x++],2<(D-=3););D&&(M[p++]=M[x++],1<D&&(M[p++]=M[x++]))}break}}break}}while(c<h&&p<v);c-=D=S>>3,b&=(1<<(S-=D<<3))-1,a.next_in=c,a.next_out=p,a.avail_in=c<h?h-c+5:5-(c-h),a.avail_out=p<v?v-p+257:257-(p-v),r.hold=b,r.bits=S}},{}],49:[function(e,s,l){var a=e("../utils/common"),i=e("./adler32"),r=e("./crc32"),c=e("./inffast"),h=e("./inftrees"),p=1,g=2,v=0,u=-2,w=1,f=852,y=592;function m(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(x){var L;return x&&x.state?(L=x.state,x.total_in=x.total_out=L.total=0,x.msg="",L.wrap&&(x.adler=1&L.wrap),L.mode=w,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new a.Buf32(f),L.distcode=L.distdyn=new a.Buf32(y),L.sane=1,L.back=-1,v):u}function A(x){var L;return x&&x.state?((L=x.state).wsize=0,L.whave=0,L.wnext=0,S(x)):u}function C(x,L){var d,M;return x&&x.state?(M=x.state,L<0?(d=0,L=-L):(d=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?u:(M.window!==null&&M.wbits!==L&&(M.window=null),M.wrap=d,M.wbits=L,A(x))):u}function O(x,L){var d,M;return x?(M=new b,(x.state=M).window=null,(d=C(x,L))!==v&&(x.state=null),d):u}var E,j,z=!0;function D(x){if(z){var L;for(E=new a.Buf32(512),j=new a.Buf32(32),L=0;L<144;)x.lens[L++]=8;for(;L<256;)x.lens[L++]=9;for(;L<280;)x.lens[L++]=7;for(;L<288;)x.lens[L++]=8;for(h(p,x.lens,0,288,E,0,x.work,{bits:9}),L=0;L<32;)x.lens[L++]=5;h(g,x.lens,0,32,j,0,x.work,{bits:5}),z=!1}x.lencode=E,x.lenbits=9,x.distcode=j,x.distbits=5}function J(x,L,d,M){var ot,Z=x.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new a.Buf8(Z.wsize)),M>=Z.wsize?(a.arraySet(Z.window,L,d-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(M<(ot=Z.wsize-Z.wnext)&&(ot=M),a.arraySet(Z.window,L,d-M,ot,Z.wnext),(M-=ot)?(a.arraySet(Z.window,L,d-M,M,0),Z.wnext=M,Z.whave=Z.wsize):(Z.wnext+=ot,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=ot))),0}l.inflateReset=A,l.inflateReset2=C,l.inflateResetKeep=S,l.inflateInit=function(x){return O(x,15)},l.inflateInit2=O,l.inflate=function(x,L){var d,M,ot,Z,ct,Y,lt,B,P,N,tt,V,dt,at,ut,ht,wt,bt,Tt,Ot,o,W,T,k,_=0,I=new a.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return u;(d=x.state).mode===12&&(d.mode=13),ct=x.next_out,ot=x.output,lt=x.avail_out,Z=x.next_in,M=x.input,Y=x.avail_in,B=d.hold,P=d.bits,N=Y,tt=lt,W=v;t:for(;;)switch(d.mode){case w:if(d.wrap===0){d.mode=13;break}for(;P<16;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(2&d.wrap&&B===35615){I[d.check=0]=255&B,I[1]=B>>>8&255,d.check=r(d.check,I,2,0),P=B=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&B)<<8)+(B>>8))%31){x.msg="incorrect header check",d.mode=30;break}if((15&B)!=8){x.msg="unknown compression method",d.mode=30;break}if(P-=4,o=8+(15&(B>>>=4)),d.wbits===0)d.wbits=o;else if(o>d.wbits){x.msg="invalid window size",d.mode=30;break}d.dmax=1<<o,x.adler=d.check=1,d.mode=512&B?10:12,P=B=0;break;case 2:for(;P<16;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(d.flags=B,(255&d.flags)!=8){x.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){x.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=B>>8&1),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=r(d.check,I,2,0)),P=B=0,d.mode=3;case 3:for(;P<32;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}d.head&&(d.head.time=B),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,I[2]=B>>>16&255,I[3]=B>>>24&255,d.check=r(d.check,I,4,0)),P=B=0,d.mode=4;case 4:for(;P<16;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}d.head&&(d.head.xflags=255&B,d.head.os=B>>8),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=r(d.check,I,2,0)),P=B=0,d.mode=5;case 5:if(1024&d.flags){for(;P<16;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}d.length=B,d.head&&(d.head.extra_len=B),512&d.flags&&(I[0]=255&B,I[1]=B>>>8&255,d.check=r(d.check,I,2,0)),P=B=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(Y<(V=d.length)&&(V=Y),V&&(d.head&&(o=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),a.arraySet(d.head.extra,M,Z,V,o)),512&d.flags&&(d.check=r(d.check,M,V,Z)),Y-=V,Z+=V,d.length-=V),d.length))break t;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(Y===0)break t;for(V=0;o=M[Z+V++],d.head&&o&&d.length<65536&&(d.head.name+=String.fromCharCode(o)),o&&V<Y;);if(512&d.flags&&(d.check=r(d.check,M,V,Z)),Y-=V,Z+=V,o)break t}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(Y===0)break t;for(V=0;o=M[Z+V++],d.head&&o&&d.length<65536&&(d.head.comment+=String.fromCharCode(o)),o&&V<Y;);if(512&d.flags&&(d.check=r(d.check,M,V,Z)),Y-=V,Z+=V,o)break t}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;P<16;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(B!==(65535&d.check)){x.msg="header crc mismatch",d.mode=30;break}P=B=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),x.adler=d.check=0,d.mode=12;break;case 10:for(;P<32;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}x.adler=d.check=m(B),P=B=0,d.mode=11;case 11:if(d.havedict===0)return x.next_out=ct,x.avail_out=lt,x.next_in=Z,x.avail_in=Y,d.hold=B,d.bits=P,2;x.adler=d.check=1,d.mode=12;case 12:if(L===5||L===6)break t;case 13:if(d.last){B>>>=7&P,P-=7&P,d.mode=27;break}for(;P<3;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}switch(d.last=1&B,P-=1,3&(B>>>=1)){case 0:d.mode=14;break;case 1:if(D(d),d.mode=20,L!==6)break;B>>>=2,P-=2;break t;case 2:d.mode=17;break;case 3:x.msg="invalid block type",d.mode=30}B>>>=2,P-=2;break;case 14:for(B>>>=7&P,P-=7&P;P<32;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if((65535&B)!=(B>>>16^65535)){x.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&B,P=B=0,d.mode=15,L===6)break t;case 15:d.mode=16;case 16:if(V=d.length){if(Y<V&&(V=Y),lt<V&&(V=lt),V===0)break t;a.arraySet(ot,M,Z,V,ct),Y-=V,Z+=V,lt-=V,ct+=V,d.length-=V;break}d.mode=12;break;case 17:for(;P<14;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(d.nlen=257+(31&B),B>>>=5,P-=5,d.ndist=1+(31&B),B>>>=5,P-=5,d.ncode=4+(15&B),B>>>=4,P-=4,286<d.nlen||30<d.ndist){x.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;P<3;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}d.lens[q[d.have++]]=7&B,B>>>=3,P-=3}for(;d.have<19;)d.lens[q[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,T={bits:d.lenbits},W=h(0,d.lens,0,19,d.lencode,0,d.work,T),d.lenbits=T.bits,W){x.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;ht=(_=d.lencode[B&(1<<d.lenbits)-1])>>>16&255,wt=65535&_,!((ut=_>>>24)<=P);){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(wt<16)B>>>=ut,P-=ut,d.lens[d.have++]=wt;else{if(wt===16){for(k=ut+2;P<k;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(B>>>=ut,P-=ut,d.have===0){x.msg="invalid bit length repeat",d.mode=30;break}o=d.lens[d.have-1],V=3+(3&B),B>>>=2,P-=2}else if(wt===17){for(k=ut+3;P<k;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}P-=ut,o=0,V=3+(7&(B>>>=ut)),B>>>=3,P-=3}else{for(k=ut+7;P<k;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}P-=ut,o=0,V=11+(127&(B>>>=ut)),B>>>=7,P-=7}if(d.have+V>d.nlen+d.ndist){x.msg="invalid bit length repeat",d.mode=30;break}for(;V--;)d.lens[d.have++]=o}}if(d.mode===30)break;if(d.lens[256]===0){x.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,T={bits:d.lenbits},W=h(p,d.lens,0,d.nlen,d.lencode,0,d.work,T),d.lenbits=T.bits,W){x.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,T={bits:d.distbits},W=h(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,T),d.distbits=T.bits,W){x.msg="invalid distances set",d.mode=30;break}if(d.mode=20,L===6)break t;case 20:d.mode=21;case 21:if(6<=Y&&258<=lt){x.next_out=ct,x.avail_out=lt,x.next_in=Z,x.avail_in=Y,d.hold=B,d.bits=P,c(x,tt),ct=x.next_out,ot=x.output,lt=x.avail_out,Z=x.next_in,M=x.input,Y=x.avail_in,B=d.hold,P=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;ht=(_=d.lencode[B&(1<<d.lenbits)-1])>>>16&255,wt=65535&_,!((ut=_>>>24)<=P);){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(ht&&(240&ht)==0){for(bt=ut,Tt=ht,Ot=wt;ht=(_=d.lencode[Ot+((B&(1<<bt+Tt)-1)>>bt)])>>>16&255,wt=65535&_,!(bt+(ut=_>>>24)<=P);){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}B>>>=bt,P-=bt,d.back+=bt}if(B>>>=ut,P-=ut,d.back+=ut,d.length=wt,ht===0){d.mode=26;break}if(32&ht){d.back=-1,d.mode=12;break}if(64&ht){x.msg="invalid literal/length code",d.mode=30;break}d.extra=15&ht,d.mode=22;case 22:if(d.extra){for(k=d.extra;P<k;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}d.length+=B&(1<<d.extra)-1,B>>>=d.extra,P-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;ht=(_=d.distcode[B&(1<<d.distbits)-1])>>>16&255,wt=65535&_,!((ut=_>>>24)<=P);){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if((240&ht)==0){for(bt=ut,Tt=ht,Ot=wt;ht=(_=d.distcode[Ot+((B&(1<<bt+Tt)-1)>>bt)])>>>16&255,wt=65535&_,!(bt+(ut=_>>>24)<=P);){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}B>>>=bt,P-=bt,d.back+=bt}if(B>>>=ut,P-=ut,d.back+=ut,64&ht){x.msg="invalid distance code",d.mode=30;break}d.offset=wt,d.extra=15&ht,d.mode=24;case 24:if(d.extra){for(k=d.extra;P<k;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}d.offset+=B&(1<<d.extra)-1,B>>>=d.extra,P-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){x.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(lt===0)break t;if(V=tt-lt,d.offset>V){if((V=d.offset-V)>d.whave&&d.sane){x.msg="invalid distance too far back",d.mode=30;break}dt=V>d.wnext?(V-=d.wnext,d.wsize-V):d.wnext-V,V>d.length&&(V=d.length),at=d.window}else at=ot,dt=ct-d.offset,V=d.length;for(lt<V&&(V=lt),lt-=V,d.length-=V;ot[ct++]=at[dt++],--V;);d.length===0&&(d.mode=21);break;case 26:if(lt===0)break t;ot[ct++]=d.length,lt--,d.mode=21;break;case 27:if(d.wrap){for(;P<32;){if(Y===0)break t;Y--,B|=M[Z++]<<P,P+=8}if(tt-=lt,x.total_out+=tt,d.total+=tt,tt&&(x.adler=d.check=d.flags?r(d.check,ot,tt,ct-tt):i(d.check,ot,tt,ct-tt)),tt=lt,(d.flags?B:m(B))!==d.check){x.msg="incorrect data check",d.mode=30;break}P=B=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;P<32;){if(Y===0)break t;Y--,B+=M[Z++]<<P,P+=8}if(B!==(4294967295&d.total)){x.msg="incorrect length check",d.mode=30;break}P=B=0}d.mode=29;case 29:W=1;break t;case 30:W=-3;break t;case 31:return-4;case 32:default:return u}return x.next_out=ct,x.avail_out=lt,x.next_in=Z,x.avail_in=Y,d.hold=B,d.bits=P,(d.wsize||tt!==x.avail_out&&d.mode<30&&(d.mode<27||L!==4))&&J(x,x.output,x.next_out,tt-x.avail_out)?(d.mode=31,-4):(N-=x.avail_in,tt-=x.avail_out,x.total_in+=N,x.total_out+=tt,d.total+=tt,d.wrap&&tt&&(x.adler=d.check=d.flags?r(d.check,ot,tt,x.next_out-tt):i(d.check,ot,tt,x.next_out-tt)),x.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(N==0&&tt===0||L===4)&&W===v&&(W=-5),W)},l.inflateEnd=function(x){if(!x||!x.state)return u;var L=x.state;return L.window&&(L.window=null),x.state=null,v},l.inflateGetHeader=function(x,L){var d;return x&&x.state?(2&(d=x.state).wrap)==0?u:((d.head=L).done=!1,v):u},l.inflateSetDictionary=function(x,L){var d,M=L.length;return x&&x.state?(d=x.state).wrap!==0&&d.mode!==11?u:d.mode===11&&i(1,L,M,0)!==d.check?-3:J(x,L,M,M)?(d.mode=31,-4):(d.havedict=1,v):u},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,l){var a=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(p,g,v,u,w,f,y,m){var b,S,A,C,O,E,j,z,D,J=m.bits,x=0,L=0,d=0,M=0,ot=0,Z=0,ct=0,Y=0,lt=0,B=0,P=null,N=0,tt=new a.Buf16(16),V=new a.Buf16(16),dt=null,at=0;for(x=0;x<=15;x++)tt[x]=0;for(L=0;L<u;L++)tt[g[v+L]]++;for(ot=J,M=15;1<=M&&tt[M]===0;M--);if(M<ot&&(ot=M),M===0)return w[f++]=20971520,w[f++]=20971520,m.bits=1,0;for(d=1;d<M&&tt[d]===0;d++);for(ot<d&&(ot=d),x=Y=1;x<=15;x++)if(Y<<=1,(Y-=tt[x])<0)return-1;if(0<Y&&(p===0||M!==1))return-1;for(V[1]=0,x=1;x<15;x++)V[x+1]=V[x]+tt[x];for(L=0;L<u;L++)g[v+L]!==0&&(y[V[g[v+L]]++]=L);if(E=p===0?(P=dt=y,19):p===1?(P=i,N-=257,dt=r,at-=257,256):(P=c,dt=h,-1),x=d,O=f,ct=L=B=0,A=-1,C=(lt=1<<(Z=ot))-1,p===1&&852<lt||p===2&&592<lt)return 1;for(;;){for(j=x-ct,D=y[L]<E?(z=0,y[L]):y[L]>E?(z=dt[at+y[L]],P[N+y[L]]):(z=96,0),b=1<<x-ct,d=S=1<<Z;w[O+(B>>ct)+(S-=b)]=j<<24|z<<16|D|0,S!==0;);for(b=1<<x-1;B&b;)b>>=1;if(b!==0?(B&=b-1,B+=b):B=0,L++,--tt[x]==0){if(x===M)break;x=g[v+y[L]]}if(ot<x&&(B&C)!==A){for(ct===0&&(ct=ot),O+=d,Y=1<<(Z=x-ct);Z+ct<M&&!((Y-=tt[Z+ct])<=0);)Z++,Y<<=1;if(lt+=1<<Z,p===1&&852<lt||p===2&&592<lt)return 1;w[A=B&C]=ot<<24|Z<<16|O-f|0}}return B!==0&&(w[O+B]=x-ct<<24|64<<16|0),m.bits=ot,0}},{"../utils/common":41}],51:[function(e,s,l){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,l){var a=e("../utils/common"),i=0,r=1;function c(_){for(var I=_.length;0<=--I;)_[I]=0}var h=0,p=29,g=256,v=g+1+p,u=30,w=19,f=2*v+1,y=15,m=16,b=7,S=256,A=16,C=17,O=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(v+2));c(J);var x=new Array(2*u);c(x);var L=new Array(512);c(L);var d=new Array(256);c(d);var M=new Array(p);c(M);var ot,Z,ct,Y=new Array(u);function lt(_,I,q,G,U){this.static_tree=_,this.extra_bits=I,this.extra_base=q,this.elems=G,this.max_length=U,this.has_stree=_&&_.length}function B(_,I){this.dyn_tree=_,this.max_code=0,this.stat_desc=I}function P(_){return _<256?L[_]:L[256+(_>>>7)]}function N(_,I){_.pending_buf[_.pending++]=255&I,_.pending_buf[_.pending++]=I>>>8&255}function tt(_,I,q){_.bi_valid>m-q?(_.bi_buf|=I<<_.bi_valid&65535,N(_,_.bi_buf),_.bi_buf=I>>m-_.bi_valid,_.bi_valid+=q-m):(_.bi_buf|=I<<_.bi_valid&65535,_.bi_valid+=q)}function V(_,I,q){tt(_,q[2*I],q[2*I+1])}function dt(_,I){for(var q=0;q|=1&_,_>>>=1,q<<=1,0<--I;);return q>>>1}function at(_,I,q){var G,U,$=new Array(y+1),R=0;for(G=1;G<=y;G++)$[G]=R=R+q[G-1]<<1;for(U=0;U<=I;U++){var F=_[2*U+1];F!==0&&(_[2*U]=dt($[F]++,F))}}function ut(_){var I;for(I=0;I<v;I++)_.dyn_ltree[2*I]=0;for(I=0;I<u;I++)_.dyn_dtree[2*I]=0;for(I=0;I<w;I++)_.bl_tree[2*I]=0;_.dyn_ltree[2*S]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function ht(_){8<_.bi_valid?N(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function wt(_,I,q,G){var U=2*I,$=2*q;return _[U]<_[$]||_[U]===_[$]&&G[I]<=G[q]}function bt(_,I,q){for(var G=_.heap[q],U=q<<1;U<=_.heap_len&&(U<_.heap_len&&wt(I,_.heap[U+1],_.heap[U],_.depth)&&U++,!wt(I,G,_.heap[U],_.depth));)_.heap[q]=_.heap[U],q=U,U<<=1;_.heap[q]=G}function Tt(_,I,q){var G,U,$,R,F=0;if(_.last_lit!==0)for(;G=_.pending_buf[_.d_buf+2*F]<<8|_.pending_buf[_.d_buf+2*F+1],U=_.pending_buf[_.l_buf+F],F++,G===0?V(_,U,I):(V(_,($=d[U])+g+1,I),(R=E[$])!==0&&tt(_,U-=M[$],R),V(_,$=P(--G),q),(R=j[$])!==0&&tt(_,G-=Y[$],R)),F<_.last_lit;);V(_,S,I)}function Ot(_,I){var q,G,U,$=I.dyn_tree,R=I.stat_desc.static_tree,F=I.stat_desc.has_stree,Q=I.stat_desc.elems,H=-1;for(_.heap_len=0,_.heap_max=f,q=0;q<Q;q++)$[2*q]!==0?(_.heap[++_.heap_len]=H=q,_.depth[q]=0):$[2*q+1]=0;for(;_.heap_len<2;)$[2*(U=_.heap[++_.heap_len]=H<2?++H:0)]=1,_.depth[U]=0,_.opt_len--,F&&(_.static_len-=R[2*U+1]);for(I.max_code=H,q=_.heap_len>>1;1<=q;q--)bt(_,$,q);for(U=Q;q=_.heap[1],_.heap[1]=_.heap[_.heap_len--],bt(_,$,1),G=_.heap[1],_.heap[--_.heap_max]=q,_.heap[--_.heap_max]=G,$[2*U]=$[2*q]+$[2*G],_.depth[U]=(_.depth[q]>=_.depth[G]?_.depth[q]:_.depth[G])+1,$[2*q+1]=$[2*G+1]=U,_.heap[1]=U++,bt(_,$,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(K,gt){var pt,it,vt,nt,St,It,Dt=gt.dyn_tree,Ft=gt.max_code,Bt=gt.stat_desc.static_tree,Mt=gt.stat_desc.has_stree,Zt=gt.stat_desc.extra_bits,ne=gt.stat_desc.extra_base,Nt=gt.stat_desc.max_length,Vt=0;for(nt=0;nt<=y;nt++)K.bl_count[nt]=0;for(Dt[2*K.heap[K.heap_max]+1]=0,pt=K.heap_max+1;pt<f;pt++)Nt<(nt=Dt[2*Dt[2*(it=K.heap[pt])+1]+1]+1)&&(nt=Nt,Vt++),Dt[2*it+1]=nt,Ft<it||(K.bl_count[nt]++,St=0,ne<=it&&(St=Zt[it-ne]),It=Dt[2*it],K.opt_len+=It*(nt+St),Mt&&(K.static_len+=It*(Bt[2*it+1]+St)));if(Vt!==0){do{for(nt=Nt-1;K.bl_count[nt]===0;)nt--;K.bl_count[nt]--,K.bl_count[nt+1]+=2,K.bl_count[Nt]--,Vt-=2}while(0<Vt);for(nt=Nt;nt!==0;nt--)for(it=K.bl_count[nt];it!==0;)Ft<(vt=K.heap[--pt])||(Dt[2*vt+1]!==nt&&(K.opt_len+=(nt-Dt[2*vt+1])*Dt[2*vt],Dt[2*vt+1]=nt),it--)}}(_,I),at($,H,_.bl_count)}function o(_,I,q){var G,U,$=-1,R=I[1],F=0,Q=7,H=4;for(R===0&&(Q=138,H=3),I[2*(q+1)+1]=65535,G=0;G<=q;G++)U=R,R=I[2*(G+1)+1],++F<Q&&U===R||(F<H?_.bl_tree[2*U]+=F:U!==0?(U!==$&&_.bl_tree[2*U]++,_.bl_tree[2*A]++):F<=10?_.bl_tree[2*C]++:_.bl_tree[2*O]++,$=U,H=(F=0)===R?(Q=138,3):U===R?(Q=6,3):(Q=7,4))}function W(_,I,q){var G,U,$=-1,R=I[1],F=0,Q=7,H=4;for(R===0&&(Q=138,H=3),G=0;G<=q;G++)if(U=R,R=I[2*(G+1)+1],!(++F<Q&&U===R)){if(F<H)for(;V(_,U,_.bl_tree),--F!=0;);else U!==0?(U!==$&&(V(_,U,_.bl_tree),F--),V(_,A,_.bl_tree),tt(_,F-3,2)):F<=10?(V(_,C,_.bl_tree),tt(_,F-3,3)):(V(_,O,_.bl_tree),tt(_,F-11,7));$=U,H=(F=0)===R?(Q=138,3):U===R?(Q=6,3):(Q=7,4)}}c(Y);var T=!1;function k(_,I,q,G){tt(_,(h<<1)+(G?1:0),3),function(U,$,R,F){ht(U),N(U,R),N(U,~R),a.arraySet(U.pending_buf,U.window,$,R,U.pending),U.pending+=R}(_,I,q)}l._tr_init=function(_){T||(function(){var I,q,G,U,$,R=new Array(y+1);for(U=G=0;U<p-1;U++)for(M[U]=G,I=0;I<1<<E[U];I++)d[G++]=U;for(d[G-1]=U,U=$=0;U<16;U++)for(Y[U]=$,I=0;I<1<<j[U];I++)L[$++]=U;for($>>=7;U<u;U++)for(Y[U]=$<<7,I=0;I<1<<j[U]-7;I++)L[256+$++]=U;for(q=0;q<=y;q++)R[q]=0;for(I=0;I<=143;)J[2*I+1]=8,I++,R[8]++;for(;I<=255;)J[2*I+1]=9,I++,R[9]++;for(;I<=279;)J[2*I+1]=7,I++,R[7]++;for(;I<=287;)J[2*I+1]=8,I++,R[8]++;for(at(J,v+1,R),I=0;I<u;I++)x[2*I+1]=5,x[2*I]=dt(I,5);ot=new lt(J,E,g+1,v,y),Z=new lt(x,j,0,u,y),ct=new lt(new Array(0),z,0,w,b)}(),T=!0),_.l_desc=new B(_.dyn_ltree,ot),_.d_desc=new B(_.dyn_dtree,Z),_.bl_desc=new B(_.bl_tree,ct),_.bi_buf=0,_.bi_valid=0,ut(_)},l._tr_stored_block=k,l._tr_flush_block=function(_,I,q,G){var U,$,R=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(F){var Q,H=4093624447;for(Q=0;Q<=31;Q++,H>>>=1)if(1&H&&F.dyn_ltree[2*Q]!==0)return i;if(F.dyn_ltree[18]!==0||F.dyn_ltree[20]!==0||F.dyn_ltree[26]!==0)return r;for(Q=32;Q<g;Q++)if(F.dyn_ltree[2*Q]!==0)return r;return i}(_)),Ot(_,_.l_desc),Ot(_,_.d_desc),R=function(F){var Q;for(o(F,F.dyn_ltree,F.l_desc.max_code),o(F,F.dyn_dtree,F.d_desc.max_code),Ot(F,F.bl_desc),Q=w-1;3<=Q&&F.bl_tree[2*D[Q]+1]===0;Q--);return F.opt_len+=3*(Q+1)+5+5+4,Q}(_),U=_.opt_len+3+7>>>3,($=_.static_len+3+7>>>3)<=U&&(U=$)):U=$=q+5,q+4<=U&&I!==-1?k(_,I,q,G):_.strategy===4||$===U?(tt(_,2+(G?1:0),3),Tt(_,J,x)):(tt(_,4+(G?1:0),3),function(F,Q,H,K){var gt;for(tt(F,Q-257,5),tt(F,H-1,5),tt(F,K-4,4),gt=0;gt<K;gt++)tt(F,F.bl_tree[2*D[gt]+1],3);W(F,F.dyn_ltree,Q-1),W(F,F.dyn_dtree,H-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,R+1),Tt(_,_.dyn_ltree,_.dyn_dtree)),ut(_),G&&ht(_)},l._tr_tally=function(_,I,q){return _.pending_buf[_.d_buf+2*_.last_lit]=I>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&I,_.pending_buf[_.l_buf+_.last_lit]=255&q,_.last_lit++,I===0?_.dyn_ltree[2*q]++:(_.matches++,I--,_.dyn_ltree[2*(d[q]+g+1)]++,_.dyn_dtree[2*P(I)]++),_.last_lit===_.lit_bufsize-1},l._tr_align=function(_){tt(_,2,3),V(_,S,J),function(I){I.bi_valid===16?(N(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(e,s,l){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,l){(function(a){(function(i,r){if(!i.setImmediate){var c,h,p,g,v=1,u={},w=!1,f=i.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(i);y=y&&y.setTimeout?y:i,c={}.toString.call(i.process)==="[object process]"?function(A){process.nextTick(function(){b(A)})}:function(){if(i.postMessage&&!i.importScripts){var A=!0,C=i.onmessage;return i.onmessage=function(){A=!1},i.postMessage("","*"),i.onmessage=C,A}}()?(g="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",S,!1):i.attachEvent("onmessage",S),function(A){i.postMessage(g+A,"*")}):i.MessageChannel?((p=new MessageChannel).port1.onmessage=function(A){b(A.data)},function(A){p.port2.postMessage(A)}):f&&"onreadystatechange"in f.createElement("script")?(h=f.documentElement,function(A){var C=f.createElement("script");C.onreadystatechange=function(){b(A),C.onreadystatechange=null,h.removeChild(C),C=null},h.appendChild(C)}):function(A){setTimeout(b,0,A)},y.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var C=new Array(arguments.length-1),O=0;O<C.length;O++)C[O]=arguments[O+1];var E={callback:A,args:C};return u[v]=E,c(v),v++},y.clearImmediate=m}function m(A){delete u[A]}function b(A){if(w)setTimeout(b,0,A);else{var C=u[A];if(C){w=!0;try{(function(O){var E=O.callback,j=O.args;switch(j.length){case 0:E();break;case 1:E(j[0]);break;case 2:E(j[0],j[1]);break;case 3:E(j[0],j[1],j[2]);break;default:E.apply(r,j)}})(C)}finally{m(A),w=!1}}}}function S(A){A.source===i&&typeof A.data=="string"&&A.data.indexOf(g)===0&&b(+A.data.slice(g.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof De<"u"?De:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(rn)),rn.exports}var ga=ha();const Br=fa(ga);async function ma(t,n={includeMetadata:!0,includeImages:!0,generateM3U:!0,includeHTML:!0}){try{const e=new Br,s=await Ti(t.songIds),l=Yn("",t.title),a=e.folder(l),i=a.folder("data"),r={playlist:{id:t.id,title:t.title,description:t.description||"",createdAt:new Date(t.createdAt).toISOString(),updatedAt:new Date(t.updatedAt).toISOString(),songCount:s.length,totalDuration:s.reduce((v,u)=>v+(u.duration||0),0),imageExtension:t.imageData?le(t.imageType||"image/jpeg"):null,imageBase64:t.imageData?Xn(t.imageData):null,imageMimeType:t.imageType||null},songs:s.map(v=>({id:v.id,title:v.title,artist:v.artist,album:v.album,duration:v.duration||0,originalFilename:v.originalFilename||"",safeFilename:v.originalFilename?Qn(v.originalFilename):"",fileSize:v.fileSize||v.audioData?.byteLength,mimeType:v.mimeType||"audio/mpeg",imageExtension:v.imageData?le(v.imageType||"image/jpeg"):null,imageBase64:v.imageData?Xn(v.imageData):null,imageMimeType:v.imageType||null}))};if(i.file("playlist.json",JSON.stringify(r,null,2)),n.includeImages&&t.imageData&&t.imageType){const v=le(t.imageType);i.file(`playlist-cover${v}`,t.imageData)}const c=[];for(const v of s)if(v.audioData&&v.originalFilename){const u=Qn(v.originalFilename),w=u.replace(/\.[^.]+$/,"");if(i.file(u,v.audioData),c.push(u),n.includeImages&&v.imageData&&v.imageType){const f=le(v.imageType),y=`${w}-cover${f}`;i.file(y,v.imageData)}}if(n.generateM3U){const v=pa(t,s,c);i.file(`${Yn("",t.title)}.m3u8`,v)}if(n.includeHTML)try{const v=await va(r);a.file("playlistz.html",v);try{const u=await fetch("./sw.js");if(u.ok){const w=await u.text();a.file("sw.js",w)}}catch(u){console.warn(" Could not include service worker in bundle:",u)}}catch(v){console.error(" Error generating HTML:",v),console.error(" Error stack:",v instanceof Error?v.stack:"Unknown error")}const h=await e.generateAsync({type:"blob"}),p=URL.createObjectURL(h),g=document.createElement("a");g.href=p,g.download=`${l}.zip`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(p)}catch(e){throw console.error("Error downloading playlist:",e),new Error("Failed to download playlist")}}function pa(t,n,e){let s=`#EXTM3U
`;if(s+=`# Playlist: ${t.title}
`,t.description&&(s+=`# Description: ${t.description}
`),t.imageData){const l=le(t.imageType||"image/jpeg");s+=`# PlaylistImage: data/playlist-cover${l}
`}return s+=`
`,n.forEach((l,a)=>{const i=Math.round(l.duration||0),r=e[a];if(r){if(s+=`#EXTINF:${i}, ${l.artist} - ${l.title}
`,s+=`# Title: ${l.title}
`,s+=`# Artist: ${l.artist}
`,s+=`# Album: ${l.album}
`,l.imageData&&l.originalFilename){const c=l.originalFilename.replace(/\.[^.]+$/,""),h=le(l.imageType);s+=`# Image: data/${c}-cover${h}
`}s+=`data/${r}

`}}),s}function Yn(t,n){return(n||t||"untitled").replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").toLowerCase().substring(0,100)}function le(t){return{"audio/mpeg":".mp3","audio/mp4":".m4a","audio/wav":".wav","audio/flac":".flac","audio/ogg":".ogg","audio/webm":".webm","image/jpeg":".jpg","image/png":".png","image/gif":".gif","image/webp":".webp"}[t]||".bin"}async function ya(t){try{const e=await new Br().loadAsync(t);let s=null,l,a;const i=[];let r=null,c=e.file(/^[^/]+\/data\/playlist\.json$/i);if(c.length===0){const u=e.file("data/playlist.json");u&&(c=[u])}if(c.length>0){const u=await c[0].async("string");r=JSON.parse(u),s=r.playlist}else{const u=e.file("playlist-info.json");if(u){const w=await u.async("string");s=JSON.parse(w)}}let h=e.file(/^[^/]+\/data\/playlist-cover\.(jpg|jpeg|png|gif|webp)$/i);h.length===0&&(h=e.file(/^data\/playlist-cover\.(jpg|jpeg|png|gif|webp)$/i)),h.length===0&&(h=e.file(/^playlist-cover\.(jpg|jpeg|png|gif|webp)$/i)),h.length>0?(l=await h[0].async("arraybuffer"),a=an(h[0].name)):r&&r.playlist.imageBase64&&(l=Jn(r.playlist.imageBase64),a=r.playlist.imageMimeType);const p=e.file(/\.m3u8?$/i);p.length>0&&await p[0].async("string");let g=e.file(/^[^/]+\/data\/[^/]+\.(mp3|m4a|wav|flac|ogg|webm)$/i);g.length===0&&(g=e.file(/^data\/[^/]+\.(mp3|m4a|wav|flac|ogg|webm)$/i)),g.length===0&&(g=e.file(/^[^/]+\.(mp3|m4a|wav|flac|ogg|webm)$/i));for(const u of g){const w=await u.async("arraybuffer"),f=u.name.split("/").pop()||"",y=f.replace(/\.[^.]+$/,"");let m={};if(r&&r.songs){const E=r.songs.find(j=>j.safeFilename===f||j.originalFilename===f);E&&(m={id:E.id,title:E.title,artist:E.artist,album:E.album,duration:E.duration,originalFilename:E.originalFilename,imageBase64:E.imageBase64,imageMimeType:E.imageMimeType})}else{const E=e.file(`${y}-metadata.json`);if(E){const j=await E.async("string");m=JSON.parse(j)}}let b,S;if(m.imageBase64)b=Jn(m.imageBase64),S=m.imageMimeType;else{let E=e.file(new RegExp(`^[^/]+/data/${y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}-cover\\.(jpg|jpeg|png|gif|webp)$`,"i"));E.length===0&&(E=e.file(new RegExp(`^data/${y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}-cover\\.(jpg|jpeg|png|gif|webp)$`,"i"))),E.length===0&&(E=e.file(new RegExp(`^${y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}-cover\\.(jpg|jpeg|png|gif|webp)$`,"i"))),E.length>0&&(b=await E[0].async("arraybuffer"),S=an(E[0].name))}const[A,C]=y.includes(" - ")?y.split(" - ",2):["Unknown Artist",y],O={audioData:w,mimeType:an(f),originalFilename:m.originalFilename||f,title:m.title||C.replace(/_/g," "),artist:m.artist||A.replace(/_/g," "),album:m.album||"Unknown Album",duration:m.duration||0,position:i.length,imageData:b,imageType:S};i.push(O)}return{playlist:{title:s?.title||t.name.replace(/\.zip$/i,""),description:s?.description||"",imageData:l,imageType:a,songIds:[]},songs:i}}catch(n){throw console.error("Error parsing playlist ZIP:",n),new Error("Failed to parse playlist ZIP file")}}function an(t){const n=t.toLowerCase().split(".").pop();return{mp3:"audio/mpeg",m4a:"audio/mp4",wav:"audio/wav",flac:"audio/flac",ogg:"audio/ogg",webm:"audio/webm",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp"}[n||""]||"application/octet-stream"}function Jn(t){const n=atob(t),e=new Uint8Array(n.length);for(let s=0;s<n.length;s++)e[s]=n.charCodeAt(s);return e.buffer}async function va(t){const e=await(await fetch(window.location.href)).text(),s=t.playlist,l=t.songs.length,a=s.description||`a playlist with ${l} song${l===1?"":"z"}`;let i="";s.imageMimeType&&(i=`/data/playlist-cover${le(s.imageMimeType)}`);const r=`
    <!-- Open Graph meta tags for rich link previews -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="${s.title.replace(/"/g,"&quot;")}" />
    <meta property="og:description" content="${a.replace(/"/g,"&quot;")}" />
    <meta property="og:site_name" content="playlistz" />
    ${i?`<meta property="og:image" content="${i}" />`:""}
    ${i?'<meta property="og:image:width" content="512" />':""}
    ${i?'<meta property="og:image:height" content="512" />':""}

    <!-- standard meta tags -->
    <meta name="description" content="${a.replace(/"/g,"&quot;")}" />`,c=`
    <script>
      // Flag to indicate this is a standalone version
      window.STANDALONE_MODE = true;

      // Load playlist data from data/ directory instead of embedding
      async function loadPlaylistData() {
        try {
          const dataResponse = await fetch('data/playlist.json');
          if (!dataResponse.ok) {
            throw new Error('Failed to load playlist data: ' + dataResponse.status);
          }
          return await dataResponse.json();
        } catch (error) {
          console.error('Error loading playlist data:', error);
          throw error;
        }
      }

      // Wait for the function to be available and then initialize
      async function waitForInitialization() {
        let attempts = 0;
        const maxAttempts = 50; // Wait up to 5 seconds

        while (attempts < maxAttempts) {
          if (window.initializeStandalonePlaylist) {
            try {
              const loadedPlaylistData = await loadPlaylistData();

              window.initializeStandalonePlaylist(loadedPlaylistData);
              return; // Success, exit
            } catch (error) {
              console.error('Failed to initialize playlist:', error);
              showError('Failed to initialize playlist: ' + error.message);
              return;
            }
          }

          // Wait 100ms before trying again
          await new Promise(resolve => setTimeout(resolve, 100));
          attempts++;
        }

        // Function never became available
        console.error('initializeStandalonePlaylist function not found after waiting');
        showError('Playlist initialization function not found. The app may not have loaded properly.');
      }

      // Start waiting after DOM is loaded
      window.addEventListener('DOMContentLoaded', waitForInitialization);

      // Show dismissable error message
      function showError(message) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(220, 20, 60, 0.95); color: white; padding: 15px 25px; border-radius: 8px; z-index: 10000; text-align: center; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);';
        errorDiv.innerHTML = '<div style="margin-bottom: 10px;">' + message + '</div><button onclick="this.parentElement.remove()" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">Dismiss</button>';
        document.body.appendChild(errorDiv);
      }
    <\/script>
  `;let h=e.replace(/<title>.*?<\/title>/i,`<title>${s.title.replace(/"/g,"&quot;")} - playlistz</title>`);return h=h.replace("</head>",`${r}
${c}
</head>`),h}function Xn(t){const n=new Uint8Array(t);let e="";for(let s=0;s<n.byteLength;s++)e+=String.fromCharCode(n[s]);return btoa(e)}function Qn(t){return t.replace(/\$/g,"_DOLLAR_").replace(/\[/g,"_LBRACKET_").replace(/\]/g,"_RBRACKET_").replace(/\(/g,"_LPAREN_").replace(/\)/g,"_RPAREN_").replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g," ").trim()}const[ro,ba]=rt(navigator.onLine),[io,wa]=rt(!1),[sn,tr]=rt(!1),Rr="playlistz-cache-v1";async function _a(){try{if("storage"in navigator&&"persist"in navigator.storage){const t=await navigator.storage.persist();return tr(!!t),t}else return!1}catch(t){return console.error(" Error requesting persistent storage:",t),!1}}function Fr(t,n){const e=t||"playlistz";let s,l;n?(s=n,n.endsWith(".png")?l="image/png":n.endsWith(".webp")?l="image/webp":l="image/jpeg"):(s=`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" viewBox="0 0 192 192"><rect width="192" height="192" fill="#000000"/><text x="96" y="125" text-anchor="middle" font-size="100" font-family="Arial,sans-serif" font-weight="bold" fill="magenta">z</text></svg>')}`,l="image/svg+xml");const a={name:e,short_name:e.length>12?e.substring(0,12):e,description:"Offline music playlist manager",start_url:"./",display:"standalone",background_color:"#000000",theme_color:"#000000",icons:[{src:s,sizes:"192x192",type:l}]},i=document.querySelector('link[rel="manifest"]');i&&i.remove(),document.querySelectorAll('link[rel="apple-touch-icon"]').forEach(y=>y.remove());const c=JSON.stringify(a),h=new Blob([c],{type:"application/manifest+json"}),p=URL.createObjectURL(h),g=document.createElement("link");g.rel="manifest",g.href=`${p}?v=${Date.now()}`,document.head.appendChild(g),[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"},{name:"apple-mobile-web-app-title",content:e},{name:"theme-color",content:"#000000"}].forEach(({name:y,content:m})=>{let b=document.querySelector(`meta[name="${y}"]`);b||(b=document.createElement("meta"),b.setAttribute("name",y),document.head.appendChild(b)),b.setAttribute("content",m)});const u=["57x57","60x60","72x72","76x76","114x114","120x120","144x144","152x152","180x180"],w=n||`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 180 180"><rect width="180" height="180" fill="#000000"/><text x="90" y="117" text-anchor="middle" font-size="94" font-family="Arial,sans-serif" font-weight="bold" fill="magenta">z</text></svg>')}`;u.forEach(y=>{const m=document.createElement("link");m.rel="apple-touch-icon",m.sizes=y,m.href=`${w}#${Date.now()}`,document.head.appendChild(m)});const f=document.createElement("link");f.rel="apple-touch-icon",f.href=`${w}#${Date.now()}`,document.head.appendChild(f)}function jr(t){if(!t.imageData||!t.imageType)return;let n=".jpg";return t.imageType==="image/png"?n=".png":t.imageType==="image/webp"?n=".webp":t.imageType==="image/gif"&&(n=".gif"),`/data/playlist-cover${n}`}function xa(t,n){const e=n?jr(n):void 0;Fr(t,e)}async function ka(){return setTimeout(async()=>{try{if(!("serviceWorker"in navigator))return;const n=await navigator.serviceWorker.register("./sw.js");if(await navigator.serviceWorker.ready,wa(!0),navigator.serviceWorker.addEventListener("message",e=>{const{type:s}=e.data;s==="SW_READY"&&er()}),navigator.serviceWorker.controller)er();else{const e=n.active||n.installing||n.waiting;e&&e.postMessage({type:"CLAIM_CLIENTS"})}}catch(t){console.warn(" Service worker registration failed:",t)}},100),!1}async function er(){try{const t=await caches.open(Rr),n=window.location.href;await t.match(n)||await t.add(n)}catch(t){console.warn(" Failed to auto-cache page:",t)}}async function nr(t,n){try{if(!("caches"in window))throw new Error("Cache API not supported");if(window.location.protocol==="file:")return;if(navigator.serviceWorker&&navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage({type:"CACHE_URL",data:{url:t}});return}await(await caches.open(Rr)).add(t)}catch(e){throw console.error(` Failed to cache audio file ${n}:`,e),e}}async function Sa(t,n){const e=()=>{ba(navigator.onLine)};window.addEventListener("online",e),window.addEventListener("offline",e);const s=n?jr(n):void 0;Fr(t,s),await _a(),ka()}async function $a(){try{const t={};if("storage"in navigator&&navigator.storage){if("estimate"in navigator.storage){const n=await navigator.storage.estimate();t.quota=n.quota,t.usage=n.usage,n.quota&&(t.quotaFormatted=Math.round(n.quota/1024/1024)+" MB"),n.usage&&(t.usageFormatted=Math.round(n.usage/1024/1024)+" MB"),n.quota&&n.usage&&(t.usagePercent=Math.round(n.usage/n.quota*100))}"persisted"in navigator.storage&&(t.persistent=await navigator.storage.persisted())}return t}catch(t){return console.error(" Error getting storage info:",t),{error:t instanceof Error?t.message:String(t)}}}var Ca=et('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4">'),Ea=et('<div class="p-4 space-y-2">'),Aa=et('<div class=text-center><div class="text-magenta-400 font-mono font-semibold text-[10px]">%</div><div>storage'),Ia=et('<div><div class=text-center><div class="text-magenta-400 font-mono font-semibold"></div><div>playlistz</div></div><div class=text-center><div class="text-magenta-400 font-mono font-semibold"></div><div>songz'),za=et('<div class="text-center text-[10px] text-gray-500"> filtered'),Da=et('<div><div><div class="flex items-center justify-between mb-4"><h1>playlist<span class=text-magenta-500>z</span></h1><div class="flex items-center gap-2"><div class="text-sm text-magenta-400 font-mono">&nbsp;</div></div></div><div class=relative><input type=text placeholder=search... class="w-full bg-black text-white px-4 py-2 pl-10 text-sm border border-magenta-200 focus:border-magenta-500 focus:outline-none focus:ring-1 focus:ring-magenta-500"><div class="absolute left-3 top-2.5 text-gray-400"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div></div><button class="w-full mt-4 px-4 py-3 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 disabled:cursor-not-allowed text-white transition-colors font-medium flex items-center justify-center gap-2"><span></span></button></div><div class="flex-1 overflow-y-auto"></div><div class="p-4 bg-gray-900 bg-opacity-30"><div class="text-xs text-gray-400 space-y-1">'),Ta=et('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin">'),La=et('<div class="p-6 text-center"><div class="inline-block w-6 h-6 border-2 border-magenta-500 border-t-transparent rounded-full animate-spin mb-3"></div><p class="text-gray-400 text-sm">loading playlistz...'),Pa=et('<div class=text-gray-400><div class="text-lg mb-2">no matchez</div><p class=text-sm>...try a different search?'),Ua=et('<div class="p-6 text-center">'),Oa=et('<div class=text-gray-400><div class="text-lg mb-2">no playlistz yet</div><p class=text-sm>create your first playlist (if u want)'),Ba=et("<div>"),Ra=et('<button><div class="flex items-start gap-3"><div class="flex-shrink-0 w-12 h-12 overflow-hidden bg-transparent"></div><div class="flex-1 min-w-0"><div></div><div class="flex items-center justify-between text-xs"><span></span><span>'),rr=et('<div class="w-full h-full flex items-center justify-center"><svg width=100 height=100 viewBox="0 0 100 100"fill=none xmlns=http://www.w3.org/2000/svg><path d="M50 81L25 31L75 31L60.7222 68.1429L50 81Z"fill=#FF00FF>'),Fa=et('<img class="w-full h-full object-cover">'),ja=et('<div class="text-center text-[10px] text-gray-500"> / ');function Ma(t){const[n,e]=rt(!1),[s,l]=rt(""),[a,i]=rt({}),r=()=>{const p=s().toLowerCase();return p?t.playlists.filter(g=>g.title.toLowerCase().includes(p)||(g.description||"").toLowerCase().includes(p)):t.playlists},c=async()=>{if(!n()){e(!0);try{await t.onCreatePlaylist()}finally{e(!1)}}},h=p=>{const g=p.songIds?.length||0;return g===1?"1 song":`${g} songs`};return ve(async()=>{const p=async()=>{const v=await $a();i(v)};await p();const g=setInterval(p,3e4);return()=>clearInterval(g)}),(()=>{var p=Da(),g=p.firstChild,v=g.firstChild,u=v.firstChild,w=v.nextSibling,f=w.firstChild,y=w.nextSibling,m=y.firstChild,b=g.nextSibling,S=b.nextSibling,A=S.firstChild;return f.$$input=C=>l(C.currentTarget.value),y.$$click=c,X(y,st(ft,{get when(){return!n()},get fallback(){return Ta()},get children(){return Ca()}}),m),X(m,()=>n()?"creating...":"new playlist"),X(b,st(ft,{get when(){return!t.isLoading},get fallback(){return La()},get children(){return st(ft,{get when(){return r().length>0},get fallback(){return(()=>{var C=Ua();return X(C,st(ft,{get when(){return s()},get fallback(){return Oa()},get children(){return Pa()}})),C})()},get children(){var C=Ea();return X(C,st(pr,{get each(){return r()},children:O=>{const E=()=>t.selectedPlaylist?.id===O.id,j=Or(O.updatedAt);return(()=>{var z=Ra(),D=z.firstChild,J=D.firstChild,x=J.nextSibling,L=x.firstChild,d=L.nextSibling,M=d.firstChild,ot=M.nextSibling;return z.$$click=()=>t.onPlaylistSelect(O),X(J,st(ft,{get when(){return O.imageType},get fallback(){return rr()},get children(){return(()=>{const Z=se(O.thumbnailData,O.imageData,O.imageType,"thumbnail");return Z?(()=>{var ct=Fa();return At(ct,"src",Z),yt(()=>At(ct,"alt",O.title)),ct})():rr()})()}})),X(L,()=>O.title),X(x,st(ft,{get when(){return O.description},get children(){var Z=Ba();return X(Z,()=>O.description),yt(()=>_t(Z,`text-sm mb-2 line-clamp-2 ${E()?"text-magenta-100":"text-gray-400 group-hover:text-white"}`)),Z}}),d),X(M,()=>h(O)),X(ot,()=>j.signal()),yt(Z=>{var ct=`w-full text-left p-4 transition-all duration-500 group ${E()?"bg-magenta-500 bg-opacity-20 shadow-lg":"bg-black bg-opacity-50 hover:bg-magenta-500"}`,Y=`font-medium mb-1 truncate ${E()?"text-white":"text-gray-200 group-hover:text-white"}`,lt=E()?"text-magenta-200":"text-gray-500 group-hover:text-white",B=E()?"text-magenta-300":"text-gray-500 group-hover:text-white";return ct!==Z.e&&_t(z,Z.e=ct),Y!==Z.t&&_t(L,Z.t=Y),lt!==Z.a&&_t(M,Z.a=lt),B!==Z.o&&_t(ot,Z.o=B),Z},{e:void 0,t:void 0,a:void 0,o:void 0}),z})()}})),C}})}})),X(A,st(ft,{get when(){return!s()},get children(){var C=Ia(),O=C.firstChild,E=O.firstChild,j=O.nextSibling,z=j.firstChild;return X(E,()=>t.playlists.length),X(z,()=>t.playlists.reduce((D,J)=>D+(J.songIds?.length||0),0)),X(C,st(ft,{get when(){return jt(()=>!!sn())()&&a().usageFormatted},get children(){var D=Aa(),J=D.firstChild,x=J.firstChild;return X(J,()=>a().usagePercent,x),D}}),null),yt(()=>_t(C,`grid gap-2 ${sn()&&a().usageFormatted&&!s()?"grid-cols-3":"grid-cols-2"}`)),C}}),null),X(A,st(ft,{get when(){return s()},get fallback(){return st(ft,{get when(){return jt(()=>!!sn())()&&a().usageFormatted},get children(){var C=ja(),O=C.firstChild;return X(C,()=>a().usageFormatted,O),X(C,()=>a().quotaFormatted,null),C}})},get children(){var C=za(),O=C.firstChild;return X(C,()=>r().length,O),C}}),null),yt(C=>{var O=`${t.isMobile?"w-full":"w-80"} bg-black/50 backdrop-blur-sm flex flex-col h-full`,E=`p-6 ${t.isMobile?"text-center":""}`,j=`text-2xl font-mono font-stretch-expanded font-bold text-white ${t.isMobile?"text-3xl":""}`,z=n();return O!==C.e&&_t(p,C.e=O),E!==C.t&&_t(g,C.t=E),j!==C.a&&_t(u,C.a=j),z!==C.o&&(y.disabled=C.o=z),C},{e:void 0,t:void 0,a:void 0,o:void 0}),yt(()=>f.value=s()),p})()}$e(["input","click"]);var Na=et('<div class="flex items-center p-3 bg-gray-800 bg-opacity-30 animate-pulse"><div class="w-12 h-12 bg-gray-700 mr-4"></div><div class=flex-1><div class="h-4 bg-gray-700 rounded mb-2 w-3/4"></div><div class="h-3 bg-gray-700 rounded w-1/2"></div></div><div class="w-16 h-4 bg-gray-700 rounded">'),Wa=et('<div class="flex items-center p-3 bg-red-900 bg-opacity-20 border border-red-500 border-opacity-30"><div class="w-12 h-12 bg-red-800 mr-4 flex items-center justify-center"><svg class="w-6 h-6 text-red-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class=flex-1><div class="text-red-400 font-medium">song not found</div><div class="text-red-300 text-sm">id: '),Za=et('<svg class="absolute inset-0 w-8 h-8 transform -rotate-90"viewBox="0 0 32 32"><circle cx=16 cy=16 r=14 stroke="rgba(255, 255, 255, 0.2)"stroke-width=2 fill=none></circle><circle cx=16 cy=16 r=14 stroke-width=2 fill=none stroke-linecap=round class="transition-all duration-300">'),Ha=et('<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1"><div class="relative w-8 h-8"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),Va=et('<svg class="w-5 h-5"fill=currentColor viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z">'),qa=et('<button class="absolute inset-0 bg-transparent flex items-center justify-center transition-opacity hover:bg-opacity-80 text-magenta-300 hover:text-magenta-100">'),Ga=et('<span class="font-mono w-12 text-right tabular-nums">'),Ka=et('<div class="text-xs mt-1 text-magenta-200 flex items-center"><span class="font-mono w-12 text-left tabular-nums"></span><div class="flex-1 relative h-4 flex items-center seek-bar-container"><input type=range min=0 class="w-full h-2 bg-gray-700 rounded-full appearance-none cursor-pointer hover:bg-gray-600 transition-colors seek-slider">'),Ya=et('<div class="text-xs mt-1 text-magenta-200">added '),Ja=et('<button class="p-1 text-red-400 hover:text-red-300 transition-colors hover:bg-red-600 hover:bg-opacity-30"title="remove from playlist"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),Xa=et('<div class="absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center gap-1 bg-black bg-opacity-80 px-2 py-1 z-50"><button class="p-1 text-gray-400 hover:text-white transition-colors hover:bg-gray-600"title="edit song"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button><div title="drag to reorder"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 12h16M4 18h16">'),Qa=et('<div><div class="absolute inset-0 transition-all duration-200"></div><div class="relative flex items-center w-full"><div class="relative w-12 h-12 mr-4 flex-shrink-0 bg-black"><div class="absolute inset-0 flex justify-center items-center font-mono group-hover:text-transparent"><span class=bg-black></span></div></div><div class="flex-1 min-w-0 text-lg"><div></div><div></div></div></div><div>'),ir=et('<div class="w-12 h-12 bg-transparent flex items-center justify-center">'),ts=et('<img class="w-12 h-12 object-cover">'),es=et('<svg class="w-5 h-5"fill=currentColor viewBox="0 0 24 24"><path d="M8 5v14l11-7z">'),ns=et("<span class=mx-2>");function rs(t){const[n,e]=rt(!1),[s,l]=rt(!1),[a,i]=rt(!1),[r,c]=rt(!1),[h,p]=rt(!1);ve(()=>{c("ontouchstart"in window||navigator.maxTouchPoints>0)});const[g]=Kr(()=>[t.songId,gn()],async([D,J])=>{try{const x=await Di(D);return x||null}catch(x){return console.error(`Error fetching song ${D}:`,x),null}}),v=()=>{const D=Et.currentSong(),J=Et.isPlaying();return D?.id===t.songId&&J},u=()=>Et.selectedSongId()===t.songId,w=()=>Et.loadingSongIds().has(t.songId),f=()=>Et.preloadingSongId()===t.songId,y=()=>Xi(t.songId),m=()=>Qi(t.songId),b=D=>{if(!D)return"0:00";const J=Math.floor(D/60),x=Math.floor(D%60);return`${J}:${x.toString().padStart(2,"0")}`},S=D=>{const J=Math.floor(D/60),x=Math.floor(D%60);return`${J}:${x.toString().padStart(2,"0")}`},A=()=>{const D=g();D&&(v()?t.onPause?.():t.onPlay?.(D))},C=D=>{l(!0),D.dataTransfer.effectAllowed="move",D.dataTransfer.setData("text/plain",t.index.toString())},O=()=>{l(!1),i(!1)},E=D=>{D.preventDefault(),D.stopPropagation(),D.dataTransfer.dropEffect="move",i(!0)},j=D=>{D.stopPropagation(),D.currentTarget===D.target&&i(!1)},z=D=>{D.preventDefault(),D.stopPropagation(),i(!1);const J=parseInt(D.dataTransfer.getData("text/plain"),10),x=t.index;J!==x&&t.onReorder&&t.onReorder(J,x)};return st(ft,{get when(){return!g.loading},get fallback(){return Na()},get children(){return st(ft,{get when(){return g()},get fallback(){return(()=>{var D=Wa(),J=D.firstChild,x=J.nextSibling,L=x.firstChild,d=L.nextSibling;return d.firstChild,X(d,()=>t.songId,null),D})()},children:D=>{const J=Or(D().createdAt),x=()=>{const L=Et.currentSong();if(!L||L.id!==D().id)return 0;const d=Et.duration(),M=Et.currentTime();return d>0?M/d*100:0};return(()=>{var L=Qa(),d=L.firstChild,M=d.nextSibling,ot=M.firstChild,Z=ot.firstChild,ct=Z.firstChild,Y=ot.nextSibling,lt=Y.firstChild,B=lt.nextSibling,P=M.nextSibling;return Rn(L,"dblclick",r()?void 0:A),Rn(L,"click",r()?A:void 0),L.addEventListener("mouseleave",()=>!r()&&e(!1)),L.addEventListener("mouseenter",()=>!r()&&e(!0)),L.addEventListener("drop",z),L.addEventListener("dragleave",j),L.addEventListener("dragover",E),L.addEventListener("dragend",O),L.addEventListener("dragstart",C),L.style.setProperty("-webkit-tap-highlight-color","transparent"),d.style.setProperty("pointer-events","none"),X(ct,()=>t.index.toString().padStart(3,"0")),X(ot,st(ft,{get when(){return D().imageType},get fallback(){return ir()},get children(){return(()=>{const N=se(D().thumbnailData,D().imageData,D().imageType,"thumbnail");return N?(()=>{var tt=ts();return At(tt,"src",N),yt(()=>At(tt,"alt",`${D().title} album art`)),tt})():ir()})()}}),null),X(ot,st(ft,{get when(){return w()||f()||m()},get children(){var N=Ha(),tt=N.firstChild,V=tt.firstChild;return X(tt,st(ft,{get when(){return jt(()=>y()>0)()&&y()<100},get children(){var dt=Za(),at=dt.firstChild,ut=at.nextSibling;return yt(ht=>{var wt=f()?"#9ca3af":"#ec4899",bt=`${y()/100*87.96} 87.96`;return wt!==ht.e&&At(ut,"stroke",ht.e=wt),bt!==ht.t&&At(ut,"stroke-dasharray",ht.t=bt),ht},{e:void 0,t:void 0}),dt}}),V),yt(()=>At(V,"class",`w-4 h-4 animate-spin absolute inset-0 m-auto ${f()?"text-gray-400":"text-magenta-300"}`)),N}}),null),X(ot,st(ft,{get when(){return jt(()=>!!(!w()&&!f()&&!m()&&n()))()&&!r()},get children(){var N=qa();return N.$$click=A,X(N,st(ft,{get when(){return v()},get fallback(){return es()},get children(){return Va()}})),N}}),null),X(lt,()=>D().title),X(B,()=>D().artist,null),X(B,(()=>{var N=jt(()=>!!D().album);return()=>N()&&ns()})(),null),X(B,()=>D().album,null),X(Y,st(ft,{get when(){return jt(()=>!!u())()&&(n()||r())},get children(){var N=Ka(),tt=N.firstChild,V=tt.nextSibling,dt=V.firstChild;return X(tt,(()=>{var at=jt(()=>!!u());return()=>at()?S(Et.currentTime()):"0:00"})()),V.addEventListener("mouseleave",()=>p(!1)),V.$$mouseup=()=>p(!1),V.$$mousedown=()=>p(!0),dt.$$mouseup=()=>p(!1),dt.$$mousedown=()=>p(!0),dt.$$input=at=>{if(u()){const ut=parseFloat(at.currentTarget.value);Tr(ut)}},X(N,st(ft,{get when(){return!r()},get children(){var at=Ga();return X(at,()=>b(D().duration)),at}}),null),yt(at=>{var ut=D().duration||0,ht=u()?`linear-gradient(to right, #ec4899 0%, #ec4899 ${Et.currentTime()/(D().duration||1)*100}%, #374151 ${Et.currentTime()/(D().duration||1)*100}%, #374151 100%)`:"#374151";return ut!==at.e&&At(dt,"max",at.e=ut),ht!==at.t&&((at.t=ht)!=null?dt.style.setProperty("background",ht):dt.style.removeProperty("background")),at},{e:void 0,t:void 0}),yt(()=>dt.value=u()?Et.currentTime():0),N}}),null),X(Y,st(ft,{get when(){return jt(()=>!!(v()||u()))()&&!n()},get children(){var N=Ya();return N.firstChild,X(N,()=>J.signal(),null),N}}),null),X(P,()=>b(D().duration)),X(L,st(ft,{get when(){return jt(()=>!!n())()&&!r()},get children(){var N=Xa(),tt=N.firstChild,V=tt.nextSibling;return tt.$$click=dt=>{dt.stopPropagation(),dt.preventDefault();const at=g();at&&t.onEdit?.(at)},X(N,st(ft,{get when(){return t.showRemoveButton},get children(){var dt=Ja();return dt.$$click=at=>{at.stopPropagation(),at.preventDefault(),t.onRemove?.(t.songId)},dt}}),V),yt(()=>_t(V,`p-1 text-gray-400 transition-colors cursor-grab ${s()?"cursor-grabbing text-magenta-400":"hover:text-gray-300"}`)),N}}),null),yt(N=>{var tt=`group relative flex items-center p-3 group-hover:bg-opacity-70 hover:bg-magenta-500 transition-all duration-200 overflow-hidden ${v()||u()?"sticky top-0 bottom-0 bg-black z-100":a()?"border border-magenta-400 border-dashed":s()?"border border-gray-500":"border border-transparent"}`,V=!h(),dt=v()?`linear-gradient(to right, rgba(236, 72, 153, 0.5) ${x()}%, transparent ${x()}%)`:u()?"rgba(236, 72, 153, 0.3)":a()?"rgba(220, 38, 127, 0.2)":s()?"rgba(107, 114, 128, 0.3)":"transparent",at=`break-words ${v()||u()?"text-magenta-200":"text-white"}`,ut=`text-sm break-words ${v()||u()?"text-magenta-200":"text-white"}`,ht=`text-sm font-mono mr-4 ${v()||u()?"text-magenta-200":"text-white"}`;return tt!==N.e&&_t(L,N.e=tt),V!==N.t&&At(L,"draggable",N.t=V),dt!==N.a&&((N.a=dt)!=null?d.style.setProperty("background",dt):d.style.removeProperty("background")),at!==N.o&&_t(lt,N.o=at),ut!==N.i&&_t(B,N.i=ut),ht!==N.n&&_t(P,N.n=ht),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),L})()}})}})}$e(["click","dblclick","mousedown","mouseup","input"]);var is=et('<img alt="Album art"class="w-full h-full object-cover">'),as=et('<button class="block px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white text-sm font-medium transition-colors">remove image'),ss=et("<div>size: <!> mb"),os=et('<div class="bg-red-900 bg-opacity-30 border border-red-500 p-3"><div class="text-red-400 text-sm">'),ls=et('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),cs=et('<div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"><div class="bg-gray-900 shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative"><div class="flex items-center justify-between p-6 border-b border-gray-700 relative"><h2 class="text-xl font-bold text-white font-mono">edit<span class=text-magenta-500>z</span></h2><button class="text-magenta-200 hover:text-magenta-500 p-1 rounded absolute top-4 right-4"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class="p-6 space-y-6"><div><label class="block text-sm font-medium text-gray-300 mb-3">album art</label><div class="flex items-center gap-4"><div class="w-20 h-20 overflow-hidden bg-gray-700 flex items-center justify-center"></div><div class="flex-1 space-y-2"><input type=file accept=image/* class=hidden id=image-upload><label for=image-upload class="inline-block px-4 py-2 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white cursor-pointer text-sm font-medium transition-colors">choose image</label></div></div></div><div><label class="block text-sm font-medium text-gray-300 mb-2">title</label><input type=text class="w-full bg-gray-800 text-white px-4 py-3 border border-gray-600 focus:border-magenta-500 focus:ring-1 focus:ring-magenta-500 focus:outline-none transition-colors"placeholder="song title"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">artist</label><input type=text class="w-full bg-gray-800 text-white px-4 py-3 border border-gray-600 focus:border-magenta-500 focus:ring-1 focus:ring-magenta-500 focus:outline-none transition-colors"placeholder="artist name"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">album</label><input type=text class="w-full bg-gray-800 text-white px-4 py-3 border border-gray-600 focus:border-magenta-500 focus:ring-1 focus:ring-magenta-500 focus:outline-none transition-colors"placeholder="album name"></div><div class="bg-gray-800 p-4"><h3 class="text-sm font-medium text-gray-300 mb-2">file information</h3><div class="text-sm text-gray-400 space-y-1"><div>filename: </div><div>duration: </div></div></div></div><div class="flex items-center justify-end gap-3 p-6 border-t border-gray-700"><button class="px-4 py-2 text-gray-400 hover:text-white disabled:text-gray-600 font-medium transition-colors">cancel</button><button class="px-6 py-2 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white font-medium transition-colors flex items-center gap-2">'),ds=et('<svg class="w-8 h-8 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3">'),us=et('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin">');function fs(t){const[n,e]=rt(""),[s,l]=rt(""),[a,i]=rt(""),[r,c]=rt(),[h,p]=rt(),[g,v]=rt(),[u,w]=rt(),[f,y]=rt(!1),[m,b]=rt(null);ve(()=>{if(t.isOpen&&t.song&&(e(t.song.title),l(t.song.artist||""),i(t.song.album||""),(t.song.imageData||t.song.thumbnailData)&&t.song.imageType)){c(t.song.imageData),p(t.song.thumbnailData),v(t.song.imageType);const E=t.song.imageData||t.song.thumbnailData,j=Wt(E,t.song.imageType);w(j)}});const S=async E=>{const z=E.target.files?.[0];if(!z)return;const D=Lr(z);if(!D.valid){b(D.error||"invalid image file");return}try{y(!0),b(null);const J=await $n(z);if(J.success&&J.imageData&&J.thumbnailData){const x=u();x&&URL.revokeObjectURL(x),c(J.imageData),p(J.thumbnailData),v(z.type);const L=Wt(J.imageData,z.type);w(L)}else b(J.error||"failed to process image")}catch(J){b("error uploading image"),console.error("image upload error:",J)}finally{y(!1)}},A=async()=>{if(!n().trim()){b("Title is required");return}try{y(!0),b(null);const E={title:n().trim(),artist:s().trim()||"Unknown Artist",album:a().trim()||"Unknown Album",imageData:r(),thumbnailData:h(),imageType:g(),updatedAt:Date.now()};await Ai(t.song.id,E);const j={...t.song,...E};t.onSave(j),t.onClose()}catch(E){b("failed to save"),console.error("Save error:",E)}finally{y(!1)}},C=()=>{const E=u();E&&URL.revokeObjectURL(E),b(null),t.onClose()},O=()=>{const E=u();E&&URL.revokeObjectURL(E),c(void 0),p(void 0),v(void 0),w(void 0)};return Ht(()=>{if(t.isOpen){const E=j=>{j.key==="Escape"&&C()};document.addEventListener("keydown",E),te(()=>document.removeEventListener("keydown",E))}}),t.isOpen?(()=>{var E=cs(),j=E.firstChild,z=j.firstChild,D=z.firstChild,J=D.nextSibling,x=z.nextSibling,L=x.firstChild,d=L.firstChild,M=d.nextSibling,ot=M.firstChild,Z=ot.nextSibling,ct=Z.firstChild;ct.nextSibling;var Y=L.nextSibling,lt=Y.firstChild,B=lt.nextSibling,P=Y.nextSibling,N=P.firstChild,tt=N.nextSibling,V=P.nextSibling,dt=V.firstChild,at=dt.nextSibling,ut=V.nextSibling,ht=ut.firstChild,wt=ht.nextSibling,bt=wt.firstChild;bt.firstChild;var Tt=bt.nextSibling;Tt.firstChild;var Ot=x.nextSibling,o=Ot.firstChild,W=o.nextSibling;return J.$$click=C,X(ot,st(ft,{get when(){return u()},get fallback(){return ds()},get children(){var T=is();return yt(()=>At(T,"src",u())),T}})),ct.addEventListener("change",S),X(Z,st(ft,{get when(){return r()},get children(){var T=as();return T.$$click=O,yt(()=>T.disabled=f()),T}}),null),B.$$input=T=>e(T.currentTarget.value),tt.$$input=T=>l(T.currentTarget.value),at.$$input=T=>i(T.currentTarget.value),X(bt,()=>t.song.originalFilename||"Unknown",null),X(wt,st(ft,{get when(){return t.song.fileSize},get children(){var T=ss(),k=T.firstChild,_=k.nextSibling;return _.nextSibling,X(T,()=>Math.round(t.song.fileSize/1024/1024*100)/100,_),T}}),Tt),X(Tt,()=>hs(t.song.duration),null),X(x,st(ft,{get when(){return m()},get children(){var T=os(),k=T.firstChild;return X(k,m),T}}),null),o.$$click=C,W.$$click=A,X(W,st(ft,{get when(){return!f()},get fallback(){return us()},get children(){return ls()}}),null),X(W,()=>f()?"saving...":"save changes",null),yt(T=>{var k=f(),_=f(),I=f(),q=f(),G=f(),U=f(),$=f()||!n().trim();return k!==T.e&&(J.disabled=T.e=k),_!==T.t&&(ct.disabled=T.t=_),I!==T.a&&(B.disabled=T.a=I),q!==T.o&&(tt.disabled=T.o=q),G!==T.i&&(at.disabled=T.i=G),U!==T.n&&(o.disabled=T.n=U),$!==T.s&&(W.disabled=T.s=$),T},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),yt(()=>B.value=n()),yt(()=>tt.value=s()),yt(()=>at.value=a()),E})():null}function hs(t){if(!t||isNaN(t))return"0:00";const n=Math.floor(t/60),e=Math.floor(t%60);return`${n}:${e.toString().padStart(2,"0")}`}$e(["click","input"]);var gs=et('<img alt="playlist cover"class="w-full h-full object-cover">'),ms=et('<button class="block w-full px-4 py-3 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-medium transition-colors">use album art from songz (<!> available)'),ps=et('<button class="block w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-medium transition-colors">remove cover image'),ys=et('<p class="text-sm text-gray-400 mt-2 text-center">+<!> more imagez available'),vs=et('<div><div class="grid grid-cols-4 gap-3">'),bs=et('<div class="bg-red-900 bg-opacity-30 border border-red-500 p-3"><div class="text-red-400 text-sm">'),ws=et('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),_s=et('<div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"><div class="bg-gray-900 shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto"><div class="flex items-center justify-between p-6 border-b border-gray-700"><h2 class="text-xl font-bold text-white font-mono">cover<span class=text-magenta-500>z</span></h2><button class="text-gray-400 hover:text-white p-1 rounded"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class="p-6 space-y-6"><div><div class="w-48 h-48 mx-auto overflow-hidden bg-gray-700 flex items-center justify-center"></div></div><div class=space-y-4><div><input type=file accept=image/* class=hidden id=cover-upload><label for=cover-upload class="block w-full px-4 py-3 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white cursor-pointer text-center font-medium transition-colors">upload image</label></div></div><div class="bg-gray-800 p-4"><h3 class="text-sm font-medium text-gray-300 mb-2">playlist information</h3><div class="text-sm text-gray-400 space-y-1"><div>title: </div><div>songz: </div><div>with album art: </div></div></div></div><div class="flex items-center justify-end gap-3 p-6 border-t border-gray-700"><button class="px-4 py-2 text-gray-400 hover:text-white disabled:text-gray-600 font-medium transition-colors">cancel</button><button class="px-6 py-2 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white font-medium transition-colors flex items-center gap-2">'),xs=et('<div class=text-center><svg class="w-16 h-16 text-gray-400 mx-auto mb-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg><p class="text-gray-400 text-sm">no cover image'),ks=et('<img class="w-full h-full object-cover">'),Ss=et('<button class="aspect-square overflow-hidden bg-gray-700 hover:ring-2 hover:ring-magenta-500 transition-all">'),$s=et('<div class="w-full h-full flex items-center justify-center"><svg class="w-6 h-6 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3">'),Cs=et('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin">');function Es(t){const[n,e]=rt(),[s,l]=rt(),[a,i]=rt(),[r,c]=rt(),[h,p]=rt(!1),[g,v]=rt(null);ve(()=>{if(t.isOpen&&t.playlist&&t.playlist.imageData&&t.playlist.imageType){e(t.playlist.imageData),l(t.playlist.thumbnailData),i(t.playlist.imageType);const S=t.playlist.thumbnailData||t.playlist.imageData,A=Wt(S,t.playlist.imageType);c(A)}});const u=async S=>{const C=S.target.files?.[0];if(!C)return;const O=Lr(C);if(!O.valid){v(O.error||"invalid image file");return}try{p(!0),v(null);const E=await $n(C);if(E.success&&E.thumbnailData&&E.imageData){const j=r();j&&URL.revokeObjectURL(j),e(E.imageData),l(E.thumbnailData),i(C.type);const z=Wt(E.thumbnailData,C.type);c(z)}else v(E.error||"failed to process image")}catch(E){v("error uploading image"),console.error("Image upload error:",E)}finally{p(!1)}},w=()=>{},f=async()=>{try{p(!0),v(null);const S={imageData:n(),thumbnailData:s(),imageType:a(),updatedAt:Date.now()};await wr(t.playlist.id,S);const{image:A,...C}=t.playlist,O={...C,...S};t.onSave(O),t.onClose()}catch(S){v("failed to save"),console.error("Save error:",S)}finally{p(!1)}},y=()=>{const S=r();S&&URL.revokeObjectURL(S),v(null),t.onClose()},m=()=>{const S=r();S&&URL.revokeObjectURL(S),e(void 0),l(void 0),i(void 0),c(void 0)};if(Ht(()=>{if(t.isOpen){const S=A=>{A.key==="Escape"&&y()};document.addEventListener("keydown",S),te(()=>document.removeEventListener("keydown",S))}}),!t.isOpen)return null;const b=t.playlistSongs.filter(S=>S.imageType&&(S.imageData||S.thumbnailData));return(()=>{var S=_s(),A=S.firstChild,C=A.firstChild,O=C.firstChild,E=O.nextSibling,j=C.nextSibling,z=j.firstChild,D=z.firstChild,J=z.nextSibling,x=J.firstChild,L=x.firstChild,d=J.nextSibling,M=d.firstChild,ot=M.nextSibling,Z=ot.firstChild;Z.firstChild;var ct=Z.nextSibling;ct.firstChild;var Y=ct.nextSibling;Y.firstChild;var lt=j.nextSibling,B=lt.firstChild,P=B.nextSibling;return E.$$click=y,X(D,st(ft,{get when(){return r()},get fallback(){return xs()},get children(){var N=gs();return yt(()=>At(N,"src",r())),N}})),L.addEventListener("change",u),X(J,st(ft,{get when(){return!1},get children(){var N=ms(),tt=N.firstChild,V=tt.nextSibling;return V.nextSibling,N.$$click=w,X(N,()=>b.length,V),yt(()=>N.disabled=h()),N}}),null),X(J,st(ft,{get when(){return n()},get children(){var N=ps();return N.$$click=m,yt(()=>N.disabled=h()),N}}),null),X(j,st(ft,{get when(){return b.length>0},get children(){var N=vs(),tt=N.firstChild;return X(tt,()=>b.slice(0,8).map(V=>(()=>{var dt=Ss();return dt.$$click=()=>{},X(dt,st(ft,{get when(){return V.imageType&&(V.imageData||V.thumbnailData)},get fallback(){return $s()},get children(){var at=ks();return yt(ut=>{var ht=Wt(V.thumbnailData||V.imageData,V.imageType),wt=V.title;return ht!==ut.e&&At(at,"src",ut.e=ht),wt!==ut.t&&At(at,"alt",ut.t=wt),ut},{e:void 0,t:void 0}),at}})),yt(at=>{var ut=h(),ht=`${V.title} - ${V.artist}`;return ut!==at.e&&(dt.disabled=at.e=ut),ht!==at.t&&At(dt,"title",at.t=ht),at},{e:void 0,t:void 0}),dt})())),X(N,st(ft,{get when(){return b.length>8},get children(){var V=ys(),dt=V.firstChild,at=dt.nextSibling;return at.nextSibling,X(V,()=>b.length-8,at),V}}),null),N}}),d),X(Z,()=>t.playlist.title,null),X(ct,()=>t.playlist.songIds.length,null),X(Y,()=>b.length,null),X(j,st(ft,{get when(){return g()},get children(){var N=bs(),tt=N.firstChild;return X(tt,g),N}}),null),B.$$click=y,P.$$click=f,X(P,st(ft,{get when(){return!h()},get fallback(){return Cs()},get children(){return ws()}}),null),X(P,()=>h()?"saving...":"save cover",null),yt(N=>{var tt=h(),V=h(),dt=h(),at=h();return tt!==N.e&&(E.disabled=N.e=tt),V!==N.t&&(L.disabled=N.t=V),dt!==N.a&&(B.disabled=N.a=dt),at!==N.o&&(P.disabled=N.o=at),N},{e:void 0,t:void 0,a:void 0,o:void 0}),S})()}$e(["click"]);const[Qt,Kt]=rt(null);function He(t){const n=atob(t),e=new Uint8Array(n.length);for(let s=0;s<n.length;s++)e[s]=n.charCodeAt(s);return e.buffer}function Mr(t,n,e,s,l,a="audio/mpeg"){const i={id:t.id,title:t.title,artist:t.artist,album:t.album,duration:t.duration,position:n,mimeType:a,originalFilename:t.originalFilename,fileSize:t.fileSize,audioData:l,blobUrl:void 0,file:void 0,imageData:void 0,thumbnailData:void 0,imageType:void 0,createdAt:Date.now(),updatedAt:Date.now(),playlistId:e,standaloneFilePath:s};return t.imageBase64&&(i.imageData=He(t.imageBase64),i.imageType=t.imageMimeType),i}function As(t){return t.standaloneFilePath&&t.mimeType?!0:!!(t.audioData&&t.audioData.byteLength>0&&t.mimeType)}async function Is(t,n,e){const s=[];for(let a=0;a<e.songs.length;a++){const i=e.songs[a],r=n.find(g=>g.id===i.id),c=`data/${i.safeFilename||i.originalFilename}`;Kt({current:a+1,total:e.songs.length,currentSong:i.title,phase:"updating"});let h;!r||!As(r)||r.mimeType!==i.mimeType||!r.standaloneFilePath||r.standaloneFilePath!==c?h=Mr(i,a,t.id,c,void 0,i.mimeType||"audio/mpeg"):(h={...r,title:i.title,artist:i.artist,album:i.album,standaloneFilePath:c,updatedAt:Date.now()},i.imageBase64&&(h.imageData=He(i.imageBase64),h.imageType=i.imageMimeType)),await Rt({dbName:zt,storeName:xt,key:h.id,updateFn:()=>h}),s.push(h)}const l={...t,title:e.playlist.title,description:e.playlist.description,songIds:e.songs.map(a=>a.id),updatedAt:Date.now()};return e.playlist.imageBase64&&(l.imageData=He(e.playlist.imageBase64),l.imageType=e.playlist.imageMimeType),await Rt({dbName:zt,storeName:Pt,key:l.id,updateFn:()=>l}),{updatedPlaylist:l,updatedSongs:s}}async function zs(t){const n={id:t.playlist.id,title:t.playlist.title,description:t.playlist.description,songIds:[],imageData:void 0,thumbnailData:void 0,imageType:void 0};t.playlist.imageBase64&&(n.imageData=He(t.playlist.imageBase64),n.imageType=t.playlist.imageMimeType);const e={...n,id:t.playlist.id,createdAt:Date.now(),updatedAt:Date.now(),songIds:[]};await Rt({dbName:zt,storeName:Pt,key:e.id,updateFn:()=>e});const s=[],l=[];for(let a=0;a<t.songs.length;a++){const i=t.songs[a],r=`data/${i.safeFilename||i.originalFilename}`,c=Mr(i,a,e.id,r,void 0,i.mimeType||"audio/mpeg");s.push(c),l.push(c.id)}e.songIds=l,await Rt({dbName:zt,storeName:Pt,key:e.id,updateFn:()=>e});for(const a of s)await Rt({dbName:zt,storeName:xt,key:a.id,updateFn:()=>a});return{playlist:e,songs:s}}async function ar(t,n){try{Kt({current:0,total:t.songs.length,currentSong:"initializing...",phase:"initializing"});const e=await Ut(),s=await e.get(Pt,t.playlist.id);let l,a;if(s){const c=(await e.getAll(xt)).filter(g=>g.playlistId===s.id);Kt({current:0,total:t.songs.length,currentSong:"checking for stale songs...",phase:"checking"});const{updatedPlaylist:h,updatedSongs:p}=await Is(s,c,t);l=h,a=p}else{const{playlist:r,songs:c}=await zs(t);l=r,a=c}const i=a.filter(r=>!r.audioData&&!r.standaloneFilePath);i.length>0&&(console.warn(`    ${i.length} songs failed to load audio data:`),i.forEach(r=>console.warn(`      - ${r.title}`)),i.length===a.length&&window.location.protocol!=="file:"?n.setError("All songs failed to load. This usually means the audio files are missing or the playlist needs to be served from a web server."):i.length>0&&window.location.protocol),n.setSelectedPlaylist(l),n.setPlaylistSongs(a),setTimeout(()=>Kt(null),500)}catch(e){console.error("Error initializing standalone playlist:",e),n.setError("Failed to load standalone playlist"),Kt(null)}}async function Ds(t){try{const e=await(await Ut()).get(xt,t);if(!e)return console.error(`Song ${t} not found in database`),!1;if(e.audioData&&e.audioData.byteLength>0)return!0;if(!e.standaloneFilePath)return console.error(`Song ${t} has no standalone file path`),!1;if(window.location.protocol==="file:")return!0;const s=await fetch(e.standaloneFilePath);if(!s.ok)throw new Error(`Failed to fetch: ${s.status} ${s.statusText}`);const l=await s.arrayBuffer(),a={...e,audioData:l,mimeType:e.mimeType||"audio/mpeg",updatedAt:Date.now()};return await Rt({dbName:zt,storeName:xt,key:t,updateFn:()=>a}),!0}catch(n){return console.error(`Error loading standalone song audio data for ${t}:`,n),!1}}async function sr(t){if(!t.standaloneFilePath)return!1;try{const e=await(await Ut()).get(xt,t.id);return!e||window.location.protocol==="file:"?!1:!e.audioData||e.audioData.byteLength===0}catch(n){return console.error(`Error checking song audio data status for ${t.id}:`,n),!!(t.standaloneFilePath&&(!t.audioData||t.audioData.byteLength===0))}}function Ts(){Kt(null)}var Ls=et('<div class="absolute inset-0 bg-cover bg-top bg-no-repeat transition-opacity duration-1000 ease-out">'),Ps=et('<div class="absolute inset-0 bg-black/20">'),Us=et('<div class="absolute inset-0 opacity-5">'),Os=et('<div class="fixed bottom-0 left-0 right-0 bg-gray-900/95 backdrop-blur-sm border-t border-gray-700 p-3"><div class="max-w-4xl mx-auto"><div class="flex items-center gap-4"><div class=w-1/2><div class="flex items-center justify-between text-xs text-gray-300 mb-1"><span></span><span> / </span></div><div class="w-full bg-gray-700 rounded-full h-1.5"><div class="bg-magenta-500 h-1.5 rounded-full transition-all duration-300"></div></div></div><div class="text-right min-w-0 flex-1"><div class="text-xs text-gray-300 truncate max-w-48"></div><div class="text-xs text-gray-500">'),Bs=et("<div><div><div></div></div><div>"),Rs=et('<div class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm"><div class=text-center><div class="text-4xl mb-6 font-bold">drop zone</div><h2 class="text-4xl font-light mb-4 text-magenta-400">drop your filez here</h2><p class="text-xl text-gray-300">release to add filez to '),Fs=et('<div class="fixed top-4 right-4 z-50"><div class="bg-red-500 text-white px-6 py-3 shadow-lg max-w-sm"><div class="flex items-center"><div class=flex-shrink-0><svg class="w-5 h-5"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg></div><div class=ml-3><p class="text-sm font-medium"></p></div><div class="ml-4 flex-shrink-0"><button class="text-white hover:text-gray-200 focus:outline-none">'),js=et('<div class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50"><button class="absolute top-6 right-4 z-51 hover:text-magenta-500"title="close (ESC)"><svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Ms=et('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-gray-800 p-6 border border-gray-600 max-w-md w-full mx-4"><h3 class="text-lg font-semibold text-white mb-4">delete playlist</h3><p class="text-gray-300 mb-6">are you sure you want to delete "<!>"? no take-backz!</p><div class="flex justify-end gap-3"><button class="px-4 py-2 text-gray-300 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors">cancel</button><button class="px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded transition-colors">delete'),Ns=et('<div><div><button class="p-2 text-magenta-200 hover:text-magenta-500 hover:bg-gray-800 transition-colors bg-black bg-opacity-80"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">'),Ws=et('<div class="flex items-center justify-center h-full"><div class=text-center><div class="inline-block animate-spin rounded-full h-8 w-8 mb-4"></div><p class=text-lg>loading playlistz...'),or=et('<img alt="playlist cover"class="w-full h-full object-cover">'),Zs=et('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">'),Hs=et('<button class="p-2 text-gray-400 hover:text-green-400 hover:bg-gray-700 transition-colors bg-black bg-opacity-80 disabled:opacity-50 disabled:cursor-not-allowed"title="download playlist as zip">'),Vs=et('<button class="ml-4 p-2 text-gray-400 hover:text-magenta-400 hover:bg-gray-700 transition-colors bg-black bg-opacity-80 disabled:opacity-50 disabled:cursor-not-allowed"title="download songz for offline use">'),qs=et('<div><div><div><button class="w-full h-full overflow-hidden hover:bg-gray-900 flex items-center justify-center transition-colors group"title="view playlist images"></button></div><div class="flex items-center gap-4 w-full"><div class=flex-1><div class="bg-black bg-opacity-80"><input type=text class="text-3xl font-bold text-white bg-transparent border-none outline-none focus:bg-gray-800 px-2 py-1 rounded w-full"placeholder="playlist title"></div><div class="mt-2 bg-black bg-opacity-80"><input type=text placeholder="add description..."class="text-white bg-transparent border-none focus:bg-gray-800 px-2 py-1 rounded w-full"></div><div><div class="flex items-center gap-2"><button class="p-2 text-gray-400 hover:text-white hover:bg-gray-700 transition-colors bg-black bg-opacity-80"title="change playlist cover"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button><button class="p-2 text-gray-400 hover:text-red-400 hover:bg-gray-700 transition-colors bg-black bg-opacity-80"title="delete playlist"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div><div><span class="bg-black bg-opacity-80 p-2"> song</span><span class="bg-black bg-opacity-80 p-2"></span></div></div></div></div><div><button class="w-32 h-32 overflow-hidden hover:bg-gray-900 flex items-center justify-center transition-colors group"title="view playlist imagez"></button></div></div><div><div>'),lr=et('<div class=text-center><svg width=100 height=100 viewBox="0 0 100 100"fill=none xmlns=http://www.w3.org/2000/svg><path d="M50 81L25 31L75 31L60.7222 68.1429L50 81Z"fill=#FF00FF>'),cr=et('<svg class="w-4 h-4 animate-spin"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),Gs=et('<div class="text-center py-16"><div class="text-gray-400 text-xl mb-4">no songz yet</div><p class="text-gray-400 mb-4">drag and drop audio filez (or a .zip file!) here to add them to this playlist</p><div class="text-xs text-gray-500 space-y-1"><div>playlist id: </div><div>supported formatz: mp3, wav, flac, aiff, ogg, mp4'),Ks=et('<div class="text-white text-center"><p class="text-lg mb-2">no imagez available</p><p class="text-sm text-gray-400">add a playlist cover or songz with album art'),Ys=et('<div class="relative w-full h-full flex items-center justify-center p-4"><button class="absolute inset-0 cursor-pointer z-50"title="next image"></button><img class="w-full h-full object-contain pointer-events-none"><div class="absolute top-4 right-16 text-white text-center bg-black bg-opacity-50 p-3"><div class="text-sm font-medium"> '),Js=et('<span class="text-xs text-gray-300 mt-1">(<!> of <!>)');typeof window<"u"&&window.STANDALONE_MODE&&(window.initializeStandalonePlaylist=function(t){window.DEFERRED_PLAYLIST_DATA=t});function Xs(){const[t,n]=rt(null),[e,s]=rt(!1),[l,a]=rt(!1),[i,r]=rt(null),[c,h]=rt(window.STANDALONE_MODE||!1),[p,g]=rt(!1),[v,u]=rt(null),[w,f]=rt(null),[y,m]=rt(!1),[b,S]=rt(!1),[A,C]=rt(!1),[O,E]=rt([]),[j,z]=rt(0),[D,J]=rt(!1),[x,L]=rt(!1),[d,M]=rt(!1),[ot,Z]=rt([]);ve(()=>{const R=zi().subscribe(F=>{Z([...F]);const Q=t();if(Q){const H=F.find(K=>K.id===Q.id);H&&JSON.stringify(H.songIds)!==JSON.stringify(Q.songIds)&&n(H)}});te(R)}),Ht(async()=>{const $=t();if($&&$.songIds.length>0)try{const F=(await xe()).filter(Q=>$.songIds.includes(Q.id)).sort((Q,H)=>{const K=$.songIds.indexOf(Q.id),gt=$.songIds.indexOf(H.id);return K-gt});E(F)}catch(R){console.error("error loading playlist songz:",R)}else E([])});const[ct]=rt(new Map);Ht(()=>{const $=Et.currentSong(),R=Et.currentPlaylist(),F=t(),Q=ct();let H=null,K=null;$?.imageType?(K=`song-${$.id}`,Q.has(K)?H=Q.get(K):(H=se($.thumbnailData,$.imageData,$.imageType,"background"),H&&Q.set(K,H))):$&&R?.imageType?(K=`playlist-${R.id}`,Q.has(K)?H=Q.get(K):(H=se(R.thumbnailData,R.imageData,R.imageType,"background"),H&&Q.set(K,H))):F?.imageType&&(K=`playlist-${F.id}`,Q.has(K)?H=Q.get(K):(H=se(F.thumbnailData,F.imageData,F.imageType,"background"),H&&Q.set(K,H))),v()!==H&&u(H)}),Ht(()=>{if(i()){const R=setTimeout(()=>r(null),5e3);return()=>clearTimeout(R)}}),ve(async()=>{window.initializeStandalonePlaylist=$=>{ar($,{setSelectedPlaylist:n,setPlaylistSongs:E,setSidebarCollapsed:h,setError:r})},window.DEFERRED_PLAYLIST_DATA&&(await ar(window.DEFERRED_PLAYLIST_DATA,{setSelectedPlaylist:n,setPlaylistSongs:E,setSidebarCollapsed:h,setError:r}),delete window.DEFERRED_PLAYLIST_DATA);try{await Ut();try{const R=t();await Sa(R?.title,R||void 0)}catch(R){console.warn("offline support initialization failed:",R)}a(!0);const $=()=>{const R=window.innerWidth<900;g(R),R&&t()&&h(!0)};$(),window.addEventListener("resize",$),te(()=>{window.removeEventListener("resize",$),Ts()})}catch($){r($ instanceof Error?$.message:"failed to initialize")}}),Ht(()=>{const $=t();$&&xa($.title,$)});const Y=$=>{b()?$.key==="Escape"?S(!1):$.key==="ArrowLeft"?($.preventDefault(),T()):$.key==="ArrowRight"&&($.preventDefault(),W()):A()&&$.key==="Escape"&&C(!1)};Ht(()=>{(b()||A())&&(document.addEventListener("keydown",Y),te(()=>document.removeEventListener("keydown",Y)))}),te(()=>{Ki(),ua();const $=ct();$.forEach(F=>{F.startsWith("blob:")&&URL.revokeObjectURL(F)}),$.clear();const R=v();R&&R.startsWith("blob:")&&URL.revokeObjectURL(R)});const lt=$=>{if(!$)return{type:"unknown",hasAudio:!1};const R=Array.from($.items||[]),F=Array.from($.files||[]);return R.some(K=>K.type==="text/plain")?{type:"song-reorder",hasAudio:!1}:F.filter(K=>K.type.startsWith("audio/")).length>0?{type:"audio-files",hasAudio:!0}:F.length>0?{type:"non-audio-files",hasAudio:!1}:{type:"unknown",hasAudio:!1}},B=$=>{$.preventDefault(),$.stopPropagation(),lt($.dataTransfer).type==="audio-files"&&s(!0)},P=$=>{$.preventDefault(),$.stopPropagation()},N=$=>{$.preventDefault(),$.stopPropagation(),$.target===$.currentTarget&&s(!1)},tt=async $=>{$.preventDefault(),$.stopPropagation(),s(!1);const R=lt($.dataTransfer);if(R.type==="song-reorder")return;const F=$.dataTransfer?.files;if(!F)return;const Q=Array.from(F).filter(K=>K.type==="application/zip"||K.name.toLowerCase().endsWith(".zip"));if(Q.length>0)try{for(const K of Q){const{playlist:gt,songs:pt}=await ya(K);if(ot().find(nt=>nt.title===gt.title&&nt.songIds.length===pt.length)){r(`playlist "${gt.title}" already existz`),setTimeout(()=>r(null),3e3);continue}const vt=await en(gt);for(const nt of pt){const St=new Blob([nt.audioData],{type:nt.mimeType}),It=new File([St],nt.originalFilename||`${nt.artist} - ${nt.title}`,{type:nt.mimeType});await Hn(vt.id,It,{title:nt.title,artist:nt.artist,album:nt.album,duration:nt.duration,imageData:nt.imageData,imageType:nt.imageType})}n(vt)}return}catch(K){console.error("error processing ZIP file:",K),r("failed to import playlist from ZIP file"),setTimeout(()=>r(null),3e3);return}const H=ca(F);if(H.length===0){R.type==="non-audio-files"?r("only audio filez and ZIP playlist filez can be added. supported formatz: MP3, WAV, M4A, FLAC, OGG, ZIP"):r("no audio filez or ZIP playlist filez found in the dropped item(z)"),setTimeout(()=>r(null),3e3);return}try{let K=t();K||(K=await en({title:"new playlist",description:`created from ${H.length} dropped file${H.length>1?"z":""}`,songIds:[]}),n(K));const gt=await la(H),pt=gt.filter(nt=>nt.success);for(const nt of pt)nt.song&&await Hn(K.id,nt.song.file,{title:nt.song.title,artist:nt.song.artist,album:nt.song.album,duration:nt.song.duration,imageData:nt.song.imageData,imageType:nt.song.imageType});const vt=ot().find(nt=>nt.id===K.id);if(vt&&n(vt),gt.some(nt=>!nt.success)){const nt=gt.filter(St=>!St.success).length;r(`${nt} file${nt>1?"z":""} could not be processed`)}}catch(K){console.error("Error handling dropped files:",K),r("failed to process dropped files")}};Ht(()=>{if(!l())return;const $=document.documentElement;$.addEventListener("dragenter",B),$.addEventListener("dragover",P),$.addEventListener("dragleave",N),$.addEventListener("drop",tt),te(()=>{$.removeEventListener("dragenter",B),$.removeEventListener("dragover",P),$.removeEventListener("dragleave",N),$.removeEventListener("drop",tt)})});const V=async()=>{try{const $=await en({title:"new playlist",description:"",songIds:[]});n($),p()&&h(!0)}catch($){console.error(" Error creating playlist:",$),r($ instanceof Error?$.message:"failed to create playlist")}};let dt;const at=async $=>{const R=t();if(!R)return;const F={...R,...$};n(F),clearTimeout(dt),dt=window.setTimeout(async()=>{try{await wr(R.id,$)}catch(Q){console.error(" Failed to save playlist:",Q),r("failed to save changes")}},1e3)},ut=async $=>{try{if(Et.currentSong()?.id===$.id)Ze();else{Ji($.id);const F=t();F?await We($,F):await We($)}}catch(R){console.error(" Error playing song:",R),r("failed to play song")}},ht=async $=>{const R=t();if(R)try{await Li(R.id,$);const F=Et.currentPlaylist();if(F&&F.id===R.id){const H=(await Vn()).find(K=>K.id===R.id);H&&await Gn(H)}}catch(F){console.error(" Error removing song:",F),r("failed to remove song")}},wt=async $=>{f($)},bt=async $=>{E(F=>F.map(Q=>Q.id===$.id?$:Q));const R=t();if(R&&R.songIds.length>0)try{const Q=(await xe()).filter(H=>R.songIds.includes(H.id)).sort((H,K)=>{const gt=R.songIds.indexOf(H.id),pt=R.songIds.indexOf(K.id);return gt-pt});E(Q)}catch(F){console.error("error refreshing songs:",F)}},Tt=$=>{n($)},Ot=async($,R)=>{const F=t();if(F)try{await Ii(F.id,$,R);const H=(await Vn()).find(K=>K.id===F.id);if(H){n(H);const K=Et.currentPlaylist();K&&K.id===H.id&&await Gn(H)}}catch(Q){console.error("error reordering songs:",Q),r("failed to reorder songz")}},o=()=>{Ze()},W=()=>{const $=k();$.length>0&&z(R=>(R+1)%$.length)},T=()=>{const $=k();$.length>0&&z(R=>(R-1+$.length)%$.length)},k=()=>{const $=t(),R=[];if($?.imageType){const F=se($.thumbnailData,$.imageData,$.imageType,"modal");F&&R.push({url:F,title:$.title})}return O().forEach(F=>{if(F.imageType){const Q=se(F.thumbnailData,F.imageData,F.imageType,"modal");Q&&R.push({url:Q,title:F.title})}}),R},_=async()=>{const $=t();if($)try{await Ei($.id),n(null),C(!1)}catch(R){console.error("rrror deleting playlist:",R),r("failed to delete playlist")}},I=async()=>{const $=t();if($){J(!0);try{await ma($,{includeMetadata:!0,includeImages:!0,generateM3U:!0,includeHTML:!0})}catch{r("failed to download playlist")}finally{J(!1)}}},q=async()=>{const $=t();if($&&$.songIds.length>0)try{const F=(await xe()).filter(Q=>$.songIds.includes(Q.id)).sort((Q,H)=>{const K=$.songIds.indexOf(Q.id),gt=$.songIds.indexOf(H.id);return K-gt});E(F)}catch(R){console.error("Error refreshing playlist songs:",R)}},G=async()=>{const $=O();if($.length===0){M(!1);return}if(window.location.protocol==="file:"){M(!0);return}let R=!0;for(const F of $)if(await sr(F)){R=!1;break}M(R)};Ht(()=>{O().length>0&&G()});const U=async()=>{const $=t(),R=O();if(!(!$||R.length===0)){L(!0),Kt({current:0,total:R.length,currentSong:"preparing...",phase:"checking"});try{let F=0,Q=0,H=0;const K=R.length;for(let gt=0;gt<R.length;gt++){const pt=R[gt];if(Kt({current:gt+1,total:K,currentSong:pt.title,phase:"updating"}),await sr(pt))try{if(await Ds(pt.id))H++,F++;else{Q++;continue}}catch{Q++;continue}else F++;if(!window.STANDALONE_MODE){if(pt.blobUrl)try{await nr(pt.blobUrl,pt.title)}catch{}else if(pt.audioData)try{const it=new Blob([pt.audioData],{type:pt.mimeType||"audio/mpeg"}),vt=URL.createObjectURL(it);await nr(vt,pt.title),URL.revokeObjectURL(vt)}catch{}}}H>0&&(await q(),await G()),Q>0&&F===0?r(`failed to cache any songz for offline use (${Q} of ${K} failed)`):Q>0?console.warn(`cached ${F} of ${K} songz (${Q} failed)`):F>0}catch{r("failed to cache playlist for offline use")}finally{L(!1),setTimeout(()=>Kt(null),500)}}};return(()=>{var $=Ns(),R=$.firstChild,F=R.firstChild,Q=F.firstChild;return X($,st(ft,{get when(){return v()},get children(){return[(()=>{var H=Ls();return H.style.setProperty("filter","blur(3px) contrast(3) brightness(0.4)"),H.style.setProperty("z-index","0"),yt(K=>(K=`url(${v()})`)!=null?H.style.setProperty("background-image",K):H.style.removeProperty("background-image")),H})(),(()=>{var H=Ps();return H.style.setProperty("z-index","1"),H})()]}}),R),X($,st(ft,{get when(){return!v()},get children(){var H=Us();return H.style.setProperty("background-image","radial-gradient(circle at 25% 25%, #ff00ff 2px, transparent 2px)"),H.style.setProperty("background-size","50px 50px"),H.style.setProperty("z-index","0"),H}}),R),X($,st(ft,{get when(){return Qt()},get children(){var H=Os(),K=H.firstChild,gt=K.firstChild,pt=gt.firstChild,it=pt.firstChild,vt=it.firstChild,nt=vt.nextSibling,St=nt.firstChild,It=it.nextSibling,Dt=It.firstChild,Ft=pt.nextSibling,Bt=Ft.firstChild,Mt=Bt.nextSibling;return H.style.setProperty("z-index","9999"),X(vt,()=>Qt().phase),X(nt,()=>Qt().current,St),X(nt,()=>Qt().total,null),X(Bt,()=>Qt().currentSong),X(Mt,()=>Qt().phase==="initializing"?"loading...":"updating..."),yt(Zt=>(Zt=`${Qt().current/Qt().total*100}%`)!=null?Dt.style.setProperty("width",Zt):Dt.style.removeProperty("width")),H}}),R),X($,st(ft,{get when(){return l()},get fallback(){return Ws()},get children(){var H=Bs(),K=H.firstChild,gt=K.firstChild,pt=K.nextSibling;return H.style.setProperty("z-index","2"),X(gt,st(Ma,{get playlists(){return ot()},get selectedPlaylist(){return t()},onPlaylistSelect:it=>{n(it),p()&&h(!0)},onCreatePlaylist:V,isLoading:!1,onCollapse:()=>h(!0),get collapsed(){return c()},get isMobile(){return p()}})),X(pt,st(ft,{get when(){return t()},children:it=>(()=>{var vt=qs(),nt=vt.firstChild,St=nt.firstChild,It=St.firstChild,Dt=St.nextSibling,Ft=Dt.firstChild,Bt=Ft.firstChild,Mt=Bt.firstChild,Zt=Bt.nextSibling,ne=Zt.firstChild,Nt=Zt.nextSibling,Vt=Nt.firstChild,Cn=Vt.firstChild,En=Cn.nextSibling,An=Vt.nextSibling,Ae=An.firstChild,Nr=Ae.firstChild,Wr=Ae.nextSibling,In=Dt.nextSibling,zn=In.firstChild,Dn=nt.nextSibling,Tn=Dn.firstChild;return It.$$click=()=>{z(0),S(!0)},X(It,st(ft,{get when(){return jt(()=>!!it().imageData)()&&it().imageType},get fallback(){return lr()},get children(){var mt=or();return yt(()=>At(mt,"src",Wt(it().imageData,it().imageType))),mt}})),Mt.$$input=mt=>{at({title:mt.currentTarget.value})},ne.$$input=mt=>{at({description:mt.currentTarget.value})},Cn.$$click=()=>m(!0),X(Vt,st(ft,{get when(){return window.location.protocol!=="file:"},get children(){var mt=Hs();return mt.$$click=I,X(mt,st(ft,{get when(){return!D()},get fallback(){return cr()},get children(){return Zs()}})),yt(()=>mt.disabled=D()),mt}}),En),En.$$click=()=>C(!0),X(Vt,st(ft,{get when(){return window.STANDALONE_MODE&&window.location.protocol!=="file:"},get children(){return st(ft,{get when(){return!d()},get children(){var mt=Vs();return mt.$$click=U,X(mt,st(ft,{get when(){return!x()},get fallback(){return cr()},children:"SAVE OFFLINE"})),yt(()=>mt.disabled=x()||O().length===0),mt}})}}),null),X(Ae,()=>it().songIds?.length||0,Nr),X(Ae,()=>(it().songIds?.length||0)!==1?"z":"",null),X(Wr,()=>{const mt=O().reduce((ae,Ie)=>ae+(Ie.duration||0),0),qt=Math.floor(mt/3600),re=Math.floor(mt%3600/60),ie=Math.floor(mt%60);return qt>0?`${qt}:${re.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`:`${re}:${ie.toString().padStart(2,"0")}`}),zn.$$click=()=>{z(0),S(!0)},X(zn,st(ft,{get when(){return jt(()=>!!it().imageData)()&&it().imageType},get fallback(){return lr()},get children(){var mt=or();return yt(()=>At(mt,"src",Wt(it().imageData,it().imageType))),mt}})),X(Tn,st(ft,{get when(){return jt(()=>!!it().songIds)()&&it().songIds.length>0},get fallback(){return(()=>{var mt=Gs(),qt=mt.firstChild,re=qt.nextSibling,ie=re.nextSibling,ae=ie.firstChild;return ae.firstChild,X(ae,()=>it().id,null),mt})()},get children(){return st(pr,{get each(){return it().songIds},children:(mt,qt)=>st(rs,{songId:mt,get index(){return qt()},showRemoveButton:!0,onRemove:ht,onPlay:ut,onPause:o,onEdit:wt,onReorder:Ot})})}})),yt(mt=>{var qt=`flex-1 flex flex-col ${p()?"p-2":"h-full p-6"}`,re=`flex items-center justify-between ${p()?"p-2 flex-col":"mb-2 p-6"}`,ie=`${p()?"":"hidden"}`,ae=`mt-3 flex justify-between ${p()?"gap-3":""}`,Ie=`flex items-center text-sm ${p()?"flex-wrap justify-end":""}`,Ln=`${p()?"hidden":"ml-4"}`,Pn=`${p()?"flex-1":"flex-1 overflow-y-auto"}`,Un=`${p()?"space-y-1":"p-6 space-y-2"}`;return qt!==mt.e&&_t(vt,mt.e=qt),re!==mt.t&&_t(nt,mt.t=re),ie!==mt.a&&_t(St,mt.a=ie),ae!==mt.o&&_t(Nt,mt.o=ae),Ie!==mt.i&&_t(An,mt.i=Ie),Ln!==mt.n&&_t(In,mt.n=Ln),Pn!==mt.s&&_t(Dn,mt.s=Pn),Un!==mt.h&&_t(Tn,mt.h=Un),mt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),yt(()=>Mt.value=it().title),yt(()=>ne.value=it().description||""),vt})()})),yt(it=>{var vt=`relative flex ${p()?"min-h-screen":"h-full"}`,nt=`transition-all duration-300 ease-out ${p()?"":"overflow-hidden"} ${c()?"w-0 opacity-0":p()?"w-full opacity-100":"w-80 opacity-100"}`,St=`${p()?"w-full":"w-80"} h-full transform transition-transform duration-300 ease-out ${c()?"-translate-x-full":"translate-x-0"}`,It=`${p()&&!c()?"hidden":"flex-1"} flex flex-col ${p()?"":"h-full"}`;return vt!==it.e&&_t(H,it.e=vt),nt!==it.t&&_t(K,it.t=nt),St!==it.a&&_t(gt,it.a=St),It!==it.o&&_t(pt,it.o=It),it},{e:void 0,t:void 0,a:void 0,o:void 0}),H}}),R),F.$$click=()=>h(H=>!H),X($,st(ft,{get when(){return e()},get children(){var H=Rs(),K=H.firstChild,gt=K.firstChild,pt=gt.nextSibling,it=pt.nextSibling;return it.firstChild,X(it,()=>t()?.title||"a new playlist",null),H}}),null),X($,st(ft,{get when(){return i()},get children(){var H=Fs(),K=H.firstChild,gt=K.firstChild,pt=gt.firstChild,it=pt.nextSibling,vt=it.firstChild,nt=it.nextSibling,St=nt.firstChild;return X(vt,i),St.$$click=()=>r(null),H}}),null),X($,st(ft,{get when(){return w()},get children(){return st(fs,{get song(){return w()},get isOpen(){return!!w()},onClose:()=>f(null),onSave:bt})}}),null),X($,st(ft,{get when(){return y()},get children(){return st(Es,{get playlist(){return t()},get playlistSongs(){return O()},get isOpen(){return y()},onClose:()=>m(!1),onSave:Tt})}}),null),X($,st(ft,{get when(){return b()},get children(){var H=js(),K=H.firstChild;return K.$$click=()=>S(!1),X(H,()=>{const gt=k(),pt=gt[j()];return pt?(()=>{var it=Ys(),vt=it.firstChild,nt=vt.nextSibling,St=nt.nextSibling,It=St.firstChild,Dt=It.firstChild;return vt.$$click=W,X(It,()=>pt.title,Dt),X(It,(()=>{var Ft=jt(()=>gt.length>1);return()=>Ft()&&(()=>{var Bt=Js(),Mt=Bt.firstChild,Zt=Mt.nextSibling,ne=Zt.nextSibling,Nt=ne.nextSibling;return Nt.nextSibling,X(Bt,j,Zt),X(Bt,()=>gt.length-1,Nt),Bt})()})(),null),yt(Ft=>{var Bt=pt.url,Mt=pt.title;return Bt!==Ft.e&&At(nt,"src",Ft.e=Bt),Mt!==Ft.t&&At(nt,"alt",Ft.t=Mt),Ft},{e:void 0,t:void 0}),it})():Ks()},null),H}}),null),X($,st(ft,{get when(){return A()},get children(){var H=Ms(),K=H.firstChild,gt=K.firstChild,pt=gt.nextSibling,it=pt.firstChild,vt=it.nextSibling;vt.nextSibling;var nt=pt.nextSibling,St=nt.firstChild,It=St.nextSibling;return X(pt,()=>t()?.title,vt),St.$$click=()=>C(!1),It.$$click=_,H}}),null),yt(H=>{var K=`relative bg-black text-white ${p()?"min-h-screen":"h-screen overflow-hidden"}`,gt=`fixed "top-0" inset-0 bg-black bg-opacity-80 flex items-center justify-center z-10 transition-all duration-300 ease-in-out w-10 h-10 ${c()?"left-0":p()?"left-[calc(100vw-40px)]":"left-72"}`,pt=`${c()?"show":"hide"} playlist sidebar`,it=`w-8 h-8 transform transition-transform duration-600 ease-in-out ${c()?"rotate-0":"rotate-180"}`;return K!==H.e&&_t($,H.e=K),gt!==H.t&&_t(R,H.t=gt),pt!==H.a&&At(F,"title",H.a=pt),it!==H.o&&At(Q,"class",H.o=it),H},{e:void 0,t:void 0,a:void 0,o:void 0}),$})()}$e(["click","input"]);function Qs(t){return st(Xs,{})}customElements.define("freqhole-playlistz",class extends HTMLElement{connectedCallback(){ai(()=>st(Qs,{}),this)}});

  </script>
</body>
</html>