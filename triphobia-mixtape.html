<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>triphobia mixtape - playlistz</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#000000">
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 16px;
      margin: 0;
      padding: 0;
      background-color: black;
      color: white;
    }
    /* Ensure proper text wrapping */
    .break-words {
      word-wrap: break-word;
      word-break: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }
    /*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-ordinal:initial;--tw-slashed-zero:initial;--tw-numeric-figure:initial;--tw-numeric-spacing:initial;--tw-numeric-fraction:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-300:oklch(80.8% .114 19.571);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-red-900:oklch(39.6% .141 25.723);--color-green-400:oklch(79.2% .209 151.711);--color-fuchsia-300:oklch(83.3% .145 321.434);--color-fuchsia-400:oklch(74% .238 322.16);--color-fuchsia-500:oklch(66.7% .295 322.15);--color-fuchsia-600:oklch(59.1% .293 322.896);--color-fuchsia-700:oklch(51.8% .253 323.949);--color-fuchsia-800:oklch(45.2% .211 324.591);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-sm:24rem;--container-md:28rem;--container-lg:32rem;--container-2xl:42rem;--container-4xl:56rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-6xl:3.75rem;--text-6xl--line-height:1;--font-weight-light:300;--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--tracking-wider:.05em;--leading-relaxed:1.625;--radius-md:.375rem;--radius-lg:.5rem;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--blur-sm:8px;--blur-xl:24px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono);--color-magenta-100:#fae8ff;--color-magenta-200:#f5d0fe;--color-magenta-300:#f0abfc;--color-magenta-400:#e879f9;--color-magenta-500:#d946ef;--color-magenta-600:#c026d3;--color-magenta-700:#a21caf;--color-magenta-800:#86198f;--color-magenta-900:#701a75;--color-magenta-950:#4a044e;--color-dark-100:#1a1a1a;--color-dark-200:#2a2a2a;--color-dark-300:#3a3a3a;--color-dark-400:#4a4a4a}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}*{box-sizing:border-box}body{color:#fff;background-color:#000;margin:0;padding:0;font-family:system-ui,-apple-system,sans-serif}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background-color:#2a2a2a}::-webkit-scrollbar-thumb{background-color:#4a4a4a;border-radius:4px}::-webkit-scrollbar-thumb:hover{background-color:#d946ef}*{scrollbar-width:thin;scrollbar-color:#4a4a4a #2a2a2a}}@layer components{.playlist-button-hover{transition:all .2s ease-out;position:relative;overflow:hidden}.playlist-button-hover:hover{transform:scale(1.02);box-shadow:0 4px 12px #d946ef4d}.playlist-item-hover:hover{transform:translate(2px);box-shadow:-2px 0 8px #d946ef66}.glass{-webkit-backdrop-filter:blur(16px)saturate(180%);background-color:#1a1a1acc;border:1px solid #ffffff20}}@layer utilities{.pointer-events-none{pointer-events:none}.collapse{visibility:collapse}.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.inset-x-0{inset-inline:calc(var(--spacing)*0)}.-top-1{top:calc(var(--spacing)*-1)}.top-0{top:calc(var(--spacing)*0)}.top-1\/2{top:50%}.top-2\.5{top:calc(var(--spacing)*2.5)}.top-4{top:calc(var(--spacing)*4)}.top-6{top:calc(var(--spacing)*6)}.top-\[-7px\]{top:-7px}.top-full{top:100%}.-right-1{right:calc(var(--spacing)*-1)}.right-0{right:calc(var(--spacing)*0)}.right-2{right:calc(var(--spacing)*2)}.right-4{right:calc(var(--spacing)*4)}.right-6{right:calc(var(--spacing)*6)}.right-16{right:calc(var(--spacing)*16)}.right-\[-7px\]{right:-7px}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-4{bottom:calc(var(--spacing)*4)}.bottom-6{bottom:calc(var(--spacing)*6)}.bottom-20{bottom:calc(var(--spacing)*20)}.bottom-\[-7px\]{bottom:-7px}.bottom-full{bottom:100%}.left-0{left:calc(var(--spacing)*0)}.left-1\/2{left:50%}.left-3{left:calc(var(--spacing)*3)}.left-72{left:calc(var(--spacing)*72)}.left-\[-7px\]{left:-7px}.left-\[calc\(100vw-40px\)\]{left:calc(100vw - 40px)}.z-0{z-index:0}.z-1{z-index:1}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.z-51{z-index:51}.z-100{z-index:100}.col-span-1{grid-column:span 1/span 1}.col-span-2{grid-column:span 2/span 2}.col-span-5{grid-column:span 5/span 5}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.m-0{margin:calc(var(--spacing)*0)}.m-auto{margin:auto}.mx-2{margin-inline:calc(var(--spacing)*2)}.mx-4{margin-inline:calc(var(--spacing)*4)}.mx-auto{margin-inline:auto}.my-1{margin-block:calc(var(--spacing)*1)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mr-4{margin-right:calc(var(--spacing)*4)}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.ml-0\.5{margin-left:calc(var(--spacing)*.5)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-3{margin-left:calc(var(--spacing)*3)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-12{margin-left:calc(var(--spacing)*12)}.line-clamp-2{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.aspect-square{aspect-ratio:1}.h-0{height:calc(var(--spacing)*0)}.h-1{height:calc(var(--spacing)*1)}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-32{height:calc(var(--spacing)*32)}.h-48{height:calc(var(--spacing)*48)}.h-full{height:100%}.h-screen{height:100vh}.max-h-64{max-height:calc(var(--spacing)*64)}.max-h-\[90vh\]{max-height:90vh}.max-h-\[95vh\]{max-height:95vh}.max-h-\[calc\(90vh-140px\)\]{max-height:calc(90vh - 140px)}.min-h-0{min-height:calc(var(--spacing)*0)}.min-h-16{min-height:calc(var(--spacing)*16)}.min-h-screen{min-height:100vh}.w-0{width:calc(var(--spacing)*0)}.w-1\.5{width:calc(var(--spacing)*1.5)}.w-1\/2{width:50%}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-3\/4{width:75%}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-15{width:calc(var(--spacing)*15)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-32{width:calc(var(--spacing)*32)}.w-48{width:calc(var(--spacing)*48)}.w-64{width:calc(var(--spacing)*64)}.w-70{width:calc(var(--spacing)*70)}.w-72{width:calc(var(--spacing)*72)}.w-80{width:calc(var(--spacing)*80)}.w-full{width:100%}.w-screen{width:100vw}.max-w-2xl{max-width:var(--container-2xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-48{max-width:calc(var(--spacing)*48)}.max-w-80{max-width:calc(var(--spacing)*80)}.max-w-96{max-width:calc(var(--spacing)*96)}.max-w-\[95vw\]{max-width:95vw}.max-w-full{max-width:100%}.max-w-lg{max-width:var(--container-lg)}.max-w-md{max-width:var(--container-md)}.max-w-sm{max-width:var(--container-sm)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-8{min-width:calc(var(--spacing)*8)}.min-w-10{min-width:calc(var(--spacing)*10)}.min-w-24{min-width:calc(var(--spacing)*24)}.min-w-48{min-width:calc(var(--spacing)*48)}.min-w-64{min-width:calc(var(--spacing)*64)}.min-w-72{min-width:calc(var(--spacing)*72)}.min-w-full{min-width:100%}.flex-1{flex:1}.flex-shrink{flex-shrink:1}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.-translate-x-1\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-full{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-\[-100\%\]{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-rotate-90{rotate:-90deg}.rotate-0{rotate:none}.rotate-45{rotate:45deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize{resize:both}.resize-none{resize:none}.appearance-none{appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-1{gap:calc(var(--spacing)*1)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-6{gap:calc(var(--spacing)*6)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-1>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*1)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-3>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*3)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-6>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*6)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-x-reverse)))}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-t-0{border-top-style:var(--tw-border-style);border-top-width:0}.border-t-2{border-top-style:var(--tw-border-style);border-top-width:2px}.border-t-4{border-top-style:var(--tw-border-style);border-top-width:4px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-r-0{border-right-style:var(--tw-border-style);border-right-width:0}.border-r-4{border-right-style:var(--tw-border-style);border-right-width:4px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-0{border-bottom-style:var(--tw-border-style);border-bottom-width:0}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-0{border-left-style:var(--tw-border-style);border-left-width:0}.border-l-4{border-left-style:var(--tw-border-style);border-left-width:4px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-none{--tw-border-style:none;border-style:none}.border-dark-300{border-color:var(--color-dark-300)}.border-dark-400{border-color:var(--color-dark-400)}.border-gray-300{border-color:var(--color-gray-300)}.border-gray-400{border-color:var(--color-gray-400)}.border-gray-500{border-color:var(--color-gray-500)}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.border-gray-800\/50{border-color:#1e293980}@supports (color:color-mix(in lab,red,red)){.border-gray-800\/50{border-color:color-mix(in oklab,var(--color-gray-800)50%,transparent)}}.border-magenta-200{border-color:var(--color-magenta-200)}.border-magenta-400{border-color:var(--color-magenta-400)}.border-magenta-400\/50{border-color:#e879f980}@supports (color:color-mix(in lab,red,red)){.border-magenta-400\/50{border-color:color-mix(in oklab,var(--color-magenta-400)50%,transparent)}}.border-magenta-500{border-color:var(--color-magenta-500)}.border-magenta-600\/30{border-color:#c026d34d}@supports (color:color-mix(in lab,red,red)){.border-magenta-600\/30{border-color:color-mix(in oklab,var(--color-magenta-600)30%,transparent)}}.border-magenta-800\/30{border-color:#86198f4d}@supports (color:color-mix(in lab,red,red)){.border-magenta-800\/30{border-color:color-mix(in oklab,var(--color-magenta-800)30%,transparent)}}.border-red-500{border-color:var(--color-red-500)}.border-red-500\/20{border-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.border-red-500\/20{border-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.border-red-500\/30{border-color:#fb2c364d}@supports (color:color-mix(in lab,red,red)){.border-red-500\/30{border-color:color-mix(in oklab,var(--color-red-500)30%,transparent)}}.border-transparent{border-color:#0000}.border-white{border-color:var(--color-white)}.border-white\/10{border-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.border-white\/10{border-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.border-white\/20{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.border-white\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.border-white\/30{border-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.border-white\/30{border-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.border-t-magenta-800\/30{border-top-color:#86198f4d}@supports (color:color-mix(in lab,red,red)){.border-t-magenta-800\/30{border-top-color:color-mix(in oklab,var(--color-magenta-800)30%,transparent)}}.border-t-transparent{border-top-color:#0000}.border-t-white{border-top-color:var(--color-white)}.border-r-transparent{border-right-color:#0000}.border-l-transparent{border-left-color:#0000}.bg-black{background-color:var(--color-black)}.bg-black\/20{background-color:#0003}@supports (color:color-mix(in lab,red,red)){.bg-black\/20{background-color:color-mix(in oklab,var(--color-black)20%,transparent)}}.bg-black\/30{background-color:#0000004d}@supports (color:color-mix(in lab,red,red)){.bg-black\/30{background-color:color-mix(in oklab,var(--color-black)30%,transparent)}}.bg-black\/40{background-color:#0006}@supports (color:color-mix(in lab,red,red)){.bg-black\/40{background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.bg-black\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-black\/70{background-color:#000000b3}@supports (color:color-mix(in lab,red,red)){.bg-black\/70{background-color:color-mix(in oklab,var(--color-black)70%,transparent)}}.bg-black\/80{background-color:#000c}@supports (color:color-mix(in lab,red,red)){.bg-black\/80{background-color:color-mix(in oklab,var(--color-black)80%,transparent)}}.bg-black\/90{background-color:#000000e6}@supports (color:color-mix(in lab,red,red)){.bg-black\/90{background-color:color-mix(in oklab,var(--color-black)90%,transparent)}}.bg-black\/95{background-color:#000000f2}@supports (color:color-mix(in lab,red,red)){.bg-black\/95{background-color:color-mix(in oklab,var(--color-black)95%,transparent)}}.bg-dark-100{background-color:var(--color-dark-100)}.bg-dark-200{background-color:var(--color-dark-200)}.bg-dark-300{background-color:var(--color-dark-300)}.bg-fuchsia-600{background-color:var(--color-fuchsia-600)}.bg-fuchsia-800\/30{background-color:#8a01944d}@supports (color:color-mix(in lab,red,red)){.bg-fuchsia-800\/30{background-color:color-mix(in oklab,var(--color-fuchsia-800)30%,transparent)}}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-600\/50{background-color:#4a556580}@supports (color:color-mix(in lab,red,red)){.bg-gray-600\/50{background-color:color-mix(in oklab,var(--color-gray-600)50%,transparent)}}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-700\/30{background-color:#3641534d}@supports (color:color-mix(in lab,red,red)){.bg-gray-700\/30{background-color:color-mix(in oklab,var(--color-gray-700)30%,transparent)}}.bg-gray-700\/50{background-color:#36415380}@supports (color:color-mix(in lab,red,red)){.bg-gray-700\/50{background-color:color-mix(in oklab,var(--color-gray-700)50%,transparent)}}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-800\/30{background-color:#1e29394d}@supports (color:color-mix(in lab,red,red)){.bg-gray-800\/30{background-color:color-mix(in oklab,var(--color-gray-800)30%,transparent)}}.bg-gray-800\/50{background-color:#1e293980}@supports (color:color-mix(in lab,red,red)){.bg-gray-800\/50{background-color:color-mix(in oklab,var(--color-gray-800)50%,transparent)}}.bg-gray-900{background-color:var(--color-gray-900)}.bg-gray-900\/50{background-color:#10182880}@supports (color:color-mix(in lab,red,red)){.bg-gray-900\/50{background-color:color-mix(in oklab,var(--color-gray-900)50%,transparent)}}.bg-gray-900\/95{background-color:#101828f2}@supports (color:color-mix(in lab,red,red)){.bg-gray-900\/95{background-color:color-mix(in oklab,var(--color-gray-900)95%,transparent)}}.bg-magenta-400{background-color:var(--color-magenta-400)}.bg-magenta-500{background-color:var(--color-magenta-500)}.bg-magenta-500\/30{background-color:#d946ef4d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-500\/30{background-color:color-mix(in oklab,var(--color-magenta-500)30%,transparent)}}.bg-magenta-600{background-color:var(--color-magenta-600)}.bg-magenta-600\/10{background-color:#c026d31a}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/10{background-color:color-mix(in oklab,var(--color-magenta-600)10%,transparent)}}.bg-magenta-600\/20{background-color:#c026d333}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/20{background-color:color-mix(in oklab,var(--color-magenta-600)20%,transparent)}}.bg-magenta-600\/30{background-color:#c026d34d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/30{background-color:color-mix(in oklab,var(--color-magenta-600)30%,transparent)}}.bg-magenta-600\/40{background-color:#c026d366}@supports (color:color-mix(in lab,red,red)){.bg-magenta-600\/40{background-color:color-mix(in oklab,var(--color-magenta-600)40%,transparent)}}.bg-magenta-700{background-color:var(--color-magenta-700)}.bg-magenta-800\/30{background-color:#86198f4d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-800\/30{background-color:color-mix(in oklab,var(--color-magenta-800)30%,transparent)}}.bg-magenta-800\/50{background-color:#86198f80}@supports (color:color-mix(in lab,red,red)){.bg-magenta-800\/50{background-color:color-mix(in oklab,var(--color-magenta-800)50%,transparent)}}.bg-magenta-900\/50{background-color:#701a7580}@supports (color:color-mix(in lab,red,red)){.bg-magenta-900\/50{background-color:color-mix(in oklab,var(--color-magenta-900)50%,transparent)}}.bg-magenta-950\/30{background-color:#4a044e4d}@supports (color:color-mix(in lab,red,red)){.bg-magenta-950\/30{background-color:color-mix(in oklab,var(--color-magenta-950)30%,transparent)}}.bg-magenta-950\/50{background-color:#4a044e80}@supports (color:color-mix(in lab,red,red)){.bg-magenta-950\/50{background-color:color-mix(in oklab,var(--color-magenta-950)50%,transparent)}}.bg-red-500{background-color:var(--color-red-500)}.bg-red-500\/10{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.bg-red-500\/10{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.bg-red-600{background-color:var(--color-red-600)}.bg-red-600\/50{background-color:#e4001480}@supports (color:color-mix(in lab,red,red)){.bg-red-600\/50{background-color:color-mix(in oklab,var(--color-red-600)50%,transparent)}}.bg-red-800{background-color:var(--color-red-800)}.bg-red-900{background-color:var(--color-red-900)}.bg-red-900\/20{background-color:#82181a33}@supports (color:color-mix(in lab,red,red)){.bg-red-900\/20{background-color:color-mix(in oklab,var(--color-red-900)20%,transparent)}}.bg-transparent{background-color:#0000}.bg-white\/5{background-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.bg-white\/5{background-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.bg-white\/10{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.bg-white\/10{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.bg-white\/20{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.bg-white\/20{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-none{background-image:none}.from-gray-600{--tw-gradient-from:var(--color-gray-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-magenta-500{--tw-gradient-from:var(--color-magenta-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-magenta-800{--tw-gradient-from:var(--color-magenta-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-transparent{--tw-gradient-from:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-gray-700{--tw-gradient-to:var(--color-gray-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-magenta-600{--tw-gradient-to:var(--color-magenta-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-magenta-900{--tw-gradient-to:var(--color-magenta-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.bg-cover{background-size:cover}.bg-top{background-position:top}.bg-no-repeat{background-repeat:no-repeat}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-1{padding:calc(var(--spacing)*1)}.p-1\.5{padding:calc(var(--spacing)*1.5)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.p-12{padding:calc(var(--spacing)*12)}.p-20{padding:calc(var(--spacing)*20)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-8{padding-inline:calc(var(--spacing)*8)}.py-0\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.py-16{padding-block:calc(var(--spacing)*16)}.pt-4{padding-top:calc(var(--spacing)*4)}.pt-8{padding-top:calc(var(--spacing)*8)}.pr-3{padding-right:calc(var(--spacing)*3)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.pb-20{padding-bottom:calc(var(--spacing)*20)}.pl-10{padding-left:calc(var(--spacing)*10)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.font-sans{font-family:var(--font-sans)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-6xl{font-size:var(--text-6xl);line-height:var(--tw-leading,var(--text-6xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\[10px\]{font-size:10px}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-light{--tw-font-weight:var(--font-weight-light);font-weight:var(--font-weight-light)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.whitespace-nowrap{white-space:nowrap}.text-black{color:var(--color-black)}.text-fuchsia-400{color:var(--color-fuchsia-400)}.text-gray-200{color:var(--color-gray-200)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-magenta-100{color:var(--color-magenta-100)}.text-magenta-200{color:var(--color-magenta-200)}.text-magenta-300{color:var(--color-magenta-300)}.text-magenta-400{color:var(--color-magenta-400)}.text-magenta-500{color:var(--color-magenta-500)}.text-red-300{color:var(--color-red-300)}.text-red-400{color:var(--color-red-400)}.text-white{color:var(--color-white)}.text-white\/30{color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.text-white\/30{color:color-mix(in oklab,var(--color-white)30%,transparent)}}.text-white\/50{color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.text-white\/50{color:color-mix(in oklab,var(--color-white)50%,transparent)}}.text-white\/60{color:#fff9}@supports (color:color-mix(in lab,red,red)){.text-white\/60{color:color-mix(in oklab,var(--color-white)60%,transparent)}}.text-white\/70{color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.text-white\/70{color:color-mix(in oklab,var(--color-white)70%,transparent)}}.text-white\/90{color:#ffffffe6}@supports (color:color-mix(in lab,red,red)){.text-white\/90{color:color-mix(in oklab,var(--color-white)90%,transparent)}}.lowercase{text-transform:lowercase}.uppercase{text-transform:uppercase}.italic{font-style:italic}.font-stretch-expanded{font-stretch:125%}.tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.placeholder-gray-400::placeholder{color:var(--color-gray-400)}.placeholder-gray-500::placeholder{color:var(--color-gray-500)}.opacity-0{opacity:0}.opacity-5{opacity:.05}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-100{opacity:1}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-xl{--tw-backdrop-blur:blur(var(--blur-xl));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-100{--tw-duration:.1s;transition-duration:.1s}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-500{--tw-duration:.5s;transition-duration:.5s}.duration-600{--tw-duration:.6s;transition-duration:.6s}.duration-1000{--tw-duration:1s;transition-duration:1s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.outline-none{--tw-outline-style:none;outline-style:none}@media (hover:hover){.group-hover\:block:is(:where(.group):hover *){display:block}.group-hover\:hidden:is(:where(.group):hover *){display:none}.group-hover\:translate-x-0:is(:where(.group):hover *){--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.group-hover\:scale-105:is(:where(.group):hover *){--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.group-hover\:text-magenta-300:is(:where(.group):hover *){color:var(--color-magenta-300)}.group-hover\:text-transparent:is(:where(.group):hover *){color:#0000}.group-hover\:text-white:is(:where(.group):hover *){color:var(--color-white)}.group-hover\:opacity-100:is(:where(.group):hover *){opacity:1}}.last\:border-b-0:last-child{border-bottom-style:var(--tw-border-style);border-bottom-width:0}@media (hover:hover){.hover\:h-1\.5:hover{height:calc(var(--spacing)*1.5)}.hover\:h-2:hover{height:calc(var(--spacing)*2)}.hover\:w-2:hover{width:calc(var(--spacing)*2)}.hover\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\:scale-110:hover{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\:border-gray-400:hover{border-color:var(--color-gray-400)}.hover\:border-magenta-400:hover{border-color:var(--color-magenta-400)}.hover\:border-red-400:hover{border-color:var(--color-red-400)}.hover\:border-red-600:hover{border-color:var(--color-red-600)}.hover\:bg-black\/70:hover{background-color:#000000b3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-black\/70:hover{background-color:color-mix(in oklab,var(--color-black)70%,transparent)}}.hover\:bg-dark-200:hover{background-color:var(--color-dark-200)}.hover\:bg-dark-300:hover{background-color:var(--color-dark-300)}.hover\:bg-fuchsia-700:hover{background-color:var(--color-fuchsia-700)}.hover\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\:bg-gray-600:hover{background-color:var(--color-gray-600)}.hover\:bg-gray-600\/70:hover{background-color:#4a5565b3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-gray-600\/70:hover{background-color:color-mix(in oklab,var(--color-gray-600)70%,transparent)}}.hover\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\:bg-gray-800:hover{background-color:var(--color-gray-800)}.hover\:bg-gray-900:hover{background-color:var(--color-gray-900)}.hover\:bg-magenta-500:hover{background-color:var(--color-magenta-500)}.hover\:bg-magenta-600:hover{background-color:var(--color-magenta-600)}.hover\:bg-magenta-600\/20:hover{background-color:#c026d333}@supports (color:color-mix(in lab,red,red)){.hover\:bg-magenta-600\/20:hover{background-color:color-mix(in oklab,var(--color-magenta-600)20%,transparent)}}.hover\:bg-magenta-600\/30:hover{background-color:#c026d34d}@supports (color:color-mix(in lab,red,red)){.hover\:bg-magenta-600\/30:hover{background-color:color-mix(in oklab,var(--color-magenta-600)30%,transparent)}}.hover\:bg-magenta-600\/50:hover{background-color:#c026d380}@supports (color:color-mix(in lab,red,red)){.hover\:bg-magenta-600\/50:hover{background-color:color-mix(in oklab,var(--color-magenta-600)50%,transparent)}}.hover\:bg-magenta-700:hover{background-color:var(--color-magenta-700)}.hover\:bg-magenta-800:hover{background-color:var(--color-magenta-800)}.hover\:bg-red-500\/10:hover{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/10:hover{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.hover\:bg-red-500\/20:hover{background-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/20:hover{background-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.hover\:bg-red-500\/80:hover{background-color:#fb2c36cc}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-500\/80:hover{background-color:color-mix(in oklab,var(--color-red-500)80%,transparent)}}.hover\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\:bg-red-600\/30:hover{background-color:#e400144d}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-600\/30:hover{background-color:color-mix(in oklab,var(--color-red-600)30%,transparent)}}.hover\:bg-red-600\/70:hover{background-color:#e40014b3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-red-600\/70:hover{background-color:color-mix(in oklab,var(--color-red-600)70%,transparent)}}.hover\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\:bg-red-900:hover{background-color:var(--color-red-900)}.hover\:bg-white\/10:hover{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/10:hover{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.hover\:bg-white\/20:hover{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/20:hover{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.hover\:text-fuchsia-300:hover{color:var(--color-fuchsia-300)}.hover\:text-gray-200:hover{color:var(--color-gray-200)}.hover\:text-gray-300:hover{color:var(--color-gray-300)}.hover\:text-green-400:hover{color:var(--color-green-400)}.hover\:text-magenta-100:hover{color:var(--color-magenta-100)}.hover\:text-magenta-300:hover{color:var(--color-magenta-300)}.hover\:text-magenta-400:hover{color:var(--color-magenta-400)}.hover\:text-magenta-500:hover{color:var(--color-magenta-500)}.hover\:text-red-300:hover{color:var(--color-red-300)}.hover\:text-red-400:hover{color:var(--color-red-400)}.hover\:text-white:hover{color:var(--color-white)}.hover\:opacity-100:hover{opacity:1}.hover\:ring-2:hover{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\:ring-magenta-500:hover{--tw-ring-color:var(--color-magenta-500)}}.focus\:border-magenta-300:focus{border-color:var(--color-magenta-300)}.focus\:border-magenta-400:focus{border-color:var(--color-magenta-400)}.focus\:border-magenta-500:focus{border-color:var(--color-magenta-500)}.focus\:border-transparent:focus{border-color:#0000}.focus\:bg-gray-700:focus{background-color:var(--color-gray-700)}.focus\:bg-gray-800:focus{background-color:var(--color-gray-800)}.focus\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-fuchsia-500:focus{--tw-ring-color:var(--color-fuchsia-500)}.focus\:ring-gray-500:focus{--tw-ring-color:var(--color-gray-500)}.focus\:ring-magenta-500:focus{--tw-ring-color:var(--color-magenta-500)}.focus\:ring-offset-2:focus{--tw-ring-offset-width:2px;--tw-ring-offset-shadow:var(--tw-ring-inset,)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color)}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}.active\:cursor-grabbing:active{cursor:grabbing}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:bg-gray-400:disabled{background-color:var(--color-gray-400)}.disabled\:bg-gray-600:disabled{background-color:var(--color-gray-600)}.disabled\:bg-magenta-400:disabled{background-color:var(--color-magenta-400)}.disabled\:bg-magenta-800:disabled{background-color:var(--color-magenta-800)}.disabled\:bg-red-400:disabled{background-color:var(--color-red-400)}.disabled\:text-gray-600:disabled{color:var(--color-gray-600)}.disabled\:opacity-40:disabled{opacity:.4}.disabled\:opacity-50:disabled{opacity:.5}@media (hover:hover){.disabled\:hover\:scale-100:disabled:hover{--tw-scale-x:100%;--tw-scale-y:100%;--tw-scale-z:100%;scale:var(--tw-scale-x)var(--tw-scale-y)}}@media (min-width:40rem){.sm\:inline{display:inline}}@media (min-width:48rem){.md\:block{display:block}.md\:flex{display:flex}.md\:grid{display:grid}.md\:hidden{display:none}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:p-4{padding:calc(var(--spacing)*4)}.md\:py-2{padding-block:calc(var(--spacing)*2)}}@media (min-width:64rem){.lg\:flex{display:flex}.lg\:hidden{display:none}.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width:80rem){.xl\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}}@media (min-width:96rem){.\32xl\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}}.\[\&\>\*\:nth-child\(1\)\]\:col-span-3>:first-child{grid-column:span 3/span 3}.\[\&\>\*\:nth-child\(1\)\]\:col-span-4>:first-child{grid-column:span 4/span 4}.\[\&\>\*\:nth-child\(2\)\]\:col-span-6>:nth-child(2){grid-column:span 6/span 6}.\[\&\>\*\:nth-child\(2\)\]\:col-span-8>:nth-child(2){grid-column:span 8/span 8}.\[\&\>\*\:nth-child\(2\)\]\:col-span-9>:nth-child(2){grid-column:span 9/span 9}.\[\&\>\*\:nth-child\(3\)\]\:col-span-3>:nth-child(3){grid-column:span 3/span 3}.no-select{-webkit-user-select:none;user-select:none}.focus-outline:focus{outline:none;box-shadow:0 0 0 2px #d946ef80}}.loading-shimmer{background:linear-gradient(90deg,#1a1a1a 25%,#2a2a2a,#1a1a1a 75%) 0 0/200% 100%;animation:1.5s infinite shimmer}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width:900px){.mobile-full-width{width:100%!important}.mobile-hidden{display:none!important}.mobile-flex-col{flex-direction:column!important}.mobile-text-center{text-align:center!important}.mobile-gap-2{gap:.5rem!important}.mobile-p-4{padding:1rem!important}}.dynamic-background{will-change:background-image,filter;background-position:50%;background-repeat:no-repeat;background-size:cover;background-attachment:fixed;transition:all 1s cubic-bezier(.4,0,.2,1)}.dynamic-background:before{content:"";filter:blur(12px)saturate(1.2);z-index:-1;position:absolute;inset:-20px}.sidebar-collapse-enter{animation:.3s cubic-bezier(.4,0,.2,1) slideInLeft}.sidebar-collapse-exit{animation:.3s cubic-bezier(.4,0,.2,1) slideOutLeft}@keyframes slideInLeft{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}@keyframes slideOutLeft{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(-100%)}}.bg-fade-enter{animation:1s ease-out fadeIn}.bg-fade-exit{animation:.5s ease-out fadeOut}@keyframes fadeIn{0%{opacity:0;filter:blur(20px)brightness(.1)}to{opacity:.2;filter:blur(8px)brightness(.3)}}@keyframes fadeOut{0%{opacity:.2;filter:blur(8px)brightness(.3)}to{opacity:0;filter:blur(20px)brightness(.1)}}@media (max-width:900px){.touch-target{min-width:44px!important;min-height:44px!important}.mobile-text-lg{font-size:1.125rem!important}.mobile-text-base{font-size:1rem!important}.mobile-p-6{padding:1.5rem!important}.mobile-px-4{padding-left:1rem!important;padding-right:1rem!important}.mobile-overlay-buttons{-webkit-backdrop-filter:blur(8px)!important;backdrop-filter:blur(8px)!important;background:#000000e6!important;border-radius:12px!important;padding:8px!important}}.seek-slider::-webkit-slider-thumb{-webkit-appearance:none;cursor:pointer;background-color:#000;background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23ec4899'/%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:contain;border:none;border-radius:3px;outline:none;width:20px;height:20px}.seek-slider::-webkit-slider-thumb:hover{background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23f472b6'/%3E%3C/svg%3E");transform:scale(1.1)}.seek-slider::-moz-range-thumb{cursor:pointer;background-color:#000;background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23ec4899'/%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:contain;border:none;border-radius:3px;outline:none;width:20px;height:20px}.seek-slider::-moz-range-thumb:hover{background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 500 500' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M250 405L125 155L375 155L303.611 340.714L250 405Z' fill='%23f472b6'/%3E%3C/svg%3E");transform:scale(1.1)}.seek-slider:focus{outline:none}.seek-slider:focus::-webkit-slider-thumb{outline:none}.seek-slider:focus::-moz-range-thumb{outline:none}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-ordinal{syntax:"*";inherits:false}@property --tw-slashed-zero{syntax:"*";inherits:false}@property --tw-numeric-figure{syntax:"*";inherits:false}@property --tw-numeric-spacing{syntax:"*";inherits:false}@property --tw-numeric-fraction{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:.5}}
/*$vite$:1*/
  </style>

    <!-- Open Graph meta tags for rich link previews -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="triphobia mixtape" />
    <meta property="og:description" content="+ ppl we know && <3" />
    <meta property="og:site_name" content="playlistz" />
    <meta property="og:image" content="/data/playlist-cover.jpg" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />

    <!-- standard meta tags -->
    <meta name="description" content="+ ppl we know && <3" />

    <script>
      // Flag to indicate this is a standalone version
      window.STANDALONE_MODE = true;

      // Show early loading indicator
      function showLoadingIndicator() {
        const loadingDiv = document.createElement('div');
        loadingDiv.id = 'early-loading';
        loadingDiv.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.9); color: white; padding: 30px; border-radius: 12px; z-index: 10000; text-align: center; font-family: monospace;';
        loadingDiv.innerHTML = '<div style="margin-bottom: 15px; font-size: 18px;">loading playlist...</div><div style="width: 40px; height: 40px; border: 3px solid rgba(255,255,255,0.3); border-top: 3px solid #ff00ff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div><style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>';
        document.body.appendChild(loadingDiv);
        return loadingDiv;
      }

      // Remove early loading indicator
      function hideLoadingIndicator(indicator) {
        if (indicator && indicator.parentNode) {
          indicator.parentNode.removeChild(indicator);
        }
      }

      // Load playlist data from data/ directory asynchronously
      async function loadPlaylistData() {
        try {
          const response = await fetch('data/playlist.json');
          if (!response.ok) {
            throw new Error('Failed to load playlist data: ' + response.status);
          }
          return await response.json();
        } catch (error) {
          console.error('Error loading playlist data:', error);
          throw error;
        }
      }

      // Wait for the function to be available and then initialize
      async function waitForInitialization() {
        let loadingIndicator = null;
        let attempts = 0;
        const maxAttempts = 50; // Wait up to 5 seconds

        while (attempts < maxAttempts) {
          if (window.initializeStandalonePlaylist) {
            try {
              // Show loading indicator during data fetch
              loadingIndicator = showLoadingIndicator();

              // Load playlist data asynchronously
              const playlistData = await loadPlaylistData();

              // Hide early loading indicator before initializing
              hideLoadingIndicator(loadingIndicator);

              // Initialize playlist (this will show its own loading progress)
              window.initializeStandalonePlaylist(playlistData);
              return; // Success, exit
            } catch (error) {
              hideLoadingIndicator(loadingIndicator);
              console.error('Failed to initialize playlist:', error);
              showError('Failed to initialize playlist: ' + error.message);
              return;
            }
          }

          // Wait 100ms before trying again
          await new Promise(resolve => setTimeout(resolve, 100));
          attempts++;
        }

        // Function never became available
        hideLoadingIndicator(loadingIndicator);
        console.error('initializeStandalonePlaylist function not found after waiting');
        showError('Playlist initialization function not found. The app may not have loaded properly.');
      }

      // Start waiting after DOM is loaded
      window.addEventListener('DOMContentLoaded', waitForInitialization);

      // Show dismissable error message
      function showError(message) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(220, 20, 60, 0.95); color: white; padding: 15px 25px; border-radius: 8px; z-index: 10000; text-align: center; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);';
        errorDiv.innerHTML = '<div style="margin-bottom: 10px;">' + message + '</div><button onclick="this.parentElement.remove()" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">Dismiss</button>';
        document.body.appendChild(errorDiv);
      }
    </script>
  
</head>
<body>
  <freqhole-playlistz ></freqhole-playlistz>
  <script type="module">
const Hr=(t,n)=>t===n,Vr=Symbol("solid-track"),Me={equals:Hr};let dr=gr;const Xt=1,je=2,ur={owned:null,cleanups:null,context:null,owner:null},Qe={};var $t=null;let tn=null,qr=null,kt=null,Ot=null,Yt=null,qe=0;function Ue(t,n){const e=kt,o=$t,s=t.length===0,a=n===void 0?o:n,i=s?ur:{owned:null,cleanups:null,context:a?a.context:null,owner:a},r=s?t:()=>t(()=>Jt(()=>Ce(i)));$t=i,kt=null;try{return ee(r,!0)}finally{kt=e,$t=o}}function rt(t,n){n=n?Object.assign({},Me,n):Me;const e={value:t,observers:null,observerSlots:null,comparator:n.equals||void 0},o=s=>(typeof s=="function"&&(s=s(e.value)),hr(e,s));return[fr.bind(e),o]}function Gr(t,n,e){const o=Ge(t,n,!0,Xt);we(o)}function yt(t,n,e){const o=Ge(t,n,!1,Xt);we(o)}function Ht(t,n,e){dr=ei;const o=Ge(t,n,!1,Xt);o.user=!0,Yt?Yt.push(o):we(o)}function ye(t,n,e){e=e?Object.assign({},Me,e):Me;const o=Ge(t,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=e.equals||void 0,we(o),fr.bind(o)}function Kr(t){return t&&typeof t=="object"&&"then"in t}function Yr(t,n,e){let o,s,a;typeof n=="function"?(o=t,s=n,a={}):(o=!0,s=t,a=n||{});let i=null,r=Qe,c=!1,h="initialValue"in a,m=typeof o=="function"&&ye(o);const g=new Set,[v,u]=(a.storage||rt)(a.initialValue),[w,f]=rt(void 0),[y,p]=rt(void 0,{equals:!1}),[b,S]=rt(h?"ready":"unresolved");function A(z,T,J,x){return i===z&&(i=null,x!==void 0&&(h=!0),(z===r||T===r)&&a.onHydrated&&queueMicrotask(()=>a.onHydrated(x,{value:T})),r=Qe,C(T,J)),T}function C(z,T){ee(()=>{T===void 0&&u(()=>z),S(T!==void 0?"errored":h?"ready":"unresolved"),f(T);for(const J of g.keys())J.decrement();g.clear()},!1)}function U(){const z=Xr,T=v(),J=w();if(J!==void 0&&!i)throw J;return kt&&kt.user,T}function E(z=!0){if(z!==!1&&c)return;c=!1;const T=m?m():o;if(T==null||T===!1){A(i,Jt(v));return}let J;const x=r!==Qe?r:Jt(()=>{try{return s(T,{value:v(),refetching:z})}catch(L){J=L}});if(J!==void 0){A(i,void 0,Fe(J),T);return}else if(!Kr(x))return A(i,x,void 0,T),x;return i=x,"v"in x?(x.s===1?A(i,x.v,void 0,T):A(i,void 0,Fe(x.v),T),x):(c=!0,queueMicrotask(()=>c=!1),ee(()=>{S(h?"refreshing":"pending"),p()},!1),x.then(L=>A(x,L,void 0,T),L=>A(x,void 0,Fe(L),T)))}Object.defineProperties(U,{state:{get:()=>b()},error:{get:()=>w()},loading:{get(){const z=b();return z==="pending"||z==="refreshing"}},latest:{get(){if(!h)return U();const z=w();if(z&&!i)throw z;return v()}}});let M=$t;return m?Gr(()=>(M=$t,E(!1))):E(!1),[U,{refetch:z=>Jr(M,()=>E(z)),mutate:u}]}function Jt(t){if(kt===null)return t();const n=kt;kt=null;try{return t()}finally{kt=n}}function be(t){Ht(()=>Jt(t))}function te(t){return $t===null||($t.cleanups===null?$t.cleanups=[t]:$t.cleanups.push(t)),t}function Jr(t,n){const e=$t,o=kt;$t=t,kt=null;try{return ee(n,!0)}catch(s){pn(s)}finally{$t=e,kt=o}}const[io,ao]=rt(!1);let Xr;function fr(){if(this.sources&&this.state)if(this.state===Xt)we(this);else{const t=Ot;Ot=null,ee(()=>We(this),!1),Ot=t}if(kt){const t=this.observers?this.observers.length:0;kt.sources?(kt.sources.push(this),kt.sourceSlots.push(t)):(kt.sources=[this],kt.sourceSlots=[t]),this.observers?(this.observers.push(kt),this.observerSlots.push(kt.sources.length-1)):(this.observers=[kt],this.observerSlots=[kt.sources.length-1])}return this.value}function hr(t,n,e){let o=t.value;return(!t.comparator||!t.comparator(o,n))&&(t.value=n,t.observers&&t.observers.length&&ee(()=>{for(let s=0;s<t.observers.length;s+=1){const a=t.observers[s],i=tn&&tn.running;i&&tn.disposed.has(a),(i?!a.tState:!a.state)&&(a.pure?Ot.push(a):Yt.push(a),a.observers&&pr(a)),i||(a.state=Xt)}if(Ot.length>1e6)throw Ot=[],new Error},!1)),n}function we(t){if(!t.fn)return;Ce(t);const n=qe;Qr(t,t.value,n)}function Qr(t,n,e){let o;const s=$t,a=kt;kt=$t=t;try{o=t.fn(n)}catch(i){return t.pure&&(t.state=Xt,t.owned&&t.owned.forEach(Ce),t.owned=null),t.updatedAt=e+1,pn(i)}finally{kt=a,$t=s}(!t.updatedAt||t.updatedAt<=e)&&(t.updatedAt!=null&&"observers"in t?hr(t,o):t.value=o,t.updatedAt=e)}function Ge(t,n,e,o=Xt,s){const a={fn:t,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:$t,context:$t?$t.context:null,pure:e};return $t===null||$t!==ur&&($t.owned?$t.owned.push(a):$t.owned=[a]),a}function Ne(t){if(t.state===0)return;if(t.state===je)return We(t);if(t.suspense&&Jt(t.suspense.inFallback))return t.suspense.effects.push(t);const n=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<qe);)t.state&&n.push(t);for(let e=n.length-1;e>=0;e--)if(t=n[e],t.state===Xt)we(t);else if(t.state===je){const o=Ot;Ot=null,ee(()=>We(t,n[0]),!1),Ot=o}}function ee(t,n){if(Ot)return t();let e=!1;n||(Ot=[]),Yt?e=!0:Yt=[],qe++;try{const o=t();return ti(e),o}catch(o){e||(Yt=null),Ot=null,pn(o)}}function ti(t){if(Ot&&(gr(Ot),Ot=null),t)return;const n=Yt;Yt=null,n.length&&ee(()=>dr(n),!1)}function gr(t){for(let n=0;n<t.length;n++)Ne(t[n])}function ei(t){let n,e=0;for(n=0;n<t.length;n++){const o=t[n];o.user?t[e++]=o:Ne(o)}for(n=0;n<e;n++)Ne(t[n])}function We(t,n){t.state=0;for(let e=0;e<t.sources.length;e+=1){const o=t.sources[e];if(o.sources){const s=o.state;s===Xt?o!==n&&(!o.updatedAt||o.updatedAt<qe)&&Ne(o):s===je&&We(o,n)}}}function pr(t){for(let n=0;n<t.observers.length;n+=1){const e=t.observers[n];e.state||(e.state=je,e.pure?Ot.push(e):Yt.push(e),e.observers&&pr(e))}}function Ce(t){let n;if(t.sources)for(;t.sources.length;){const e=t.sources.pop(),o=t.sourceSlots.pop(),s=e.observers;if(s&&s.length){const a=s.pop(),i=e.observerSlots.pop();o<s.length&&(a.sourceSlots[i]=o,s[o]=a,e.observerSlots[o]=i)}}if(t.tOwned){for(n=t.tOwned.length-1;n>=0;n--)Ce(t.tOwned[n]);delete t.tOwned}if(t.owned){for(n=t.owned.length-1;n>=0;n--)Ce(t.owned[n]);t.owned=null}if(t.cleanups){for(n=t.cleanups.length-1;n>=0;n--)t.cleanups[n]();t.cleanups=null}t.state=0}function Fe(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function pn(t,n=$t){throw Fe(t)}const ni=Symbol("fallback");function Un(t){for(let n=0;n<t.length;n++)t[n]()}function ri(t,n,e={}){let o=[],s=[],a=[],i=0,r=n.length>1?[]:null;return te(()=>Un(a)),()=>{let c=t()||[],h=c.length,m,g;return c[Vr],Jt(()=>{let u,w,f,y,p,b,S,A,C;if(h===0)i!==0&&(Un(a),a=[],o=[],s=[],i=0,r&&(r=[])),e.fallback&&(o=[ni],s[0]=Ue(U=>(a[0]=U,e.fallback())),i=1);else if(i===0){for(s=new Array(h),g=0;g<h;g++)o[g]=c[g],s[g]=Ue(v);i=h}else{for(f=new Array(h),y=new Array(h),r&&(p=new Array(h)),b=0,S=Math.min(i,h);b<S&&o[b]===c[b];b++);for(S=i-1,A=h-1;S>=b&&A>=b&&o[S]===c[A];S--,A--)f[A]=s[S],y[A]=a[S],r&&(p[A]=r[S]);for(u=new Map,w=new Array(A+1),g=A;g>=b;g--)C=c[g],m=u.get(C),w[g]=m===void 0?-1:m,u.set(C,g);for(m=b;m<=S;m++)C=o[m],g=u.get(C),g!==void 0&&g!==-1?(f[g]=s[m],y[g]=a[m],r&&(p[g]=r[m]),g=w[g],u.set(C,g)):a[m]();for(g=b;g<h;g++)g in f?(s[g]=f[g],a[g]=y[g],r&&(r[g]=p[g],r[g](g))):s[g]=Ue(v);s=s.slice(0,i=h),o=c.slice(0)}return s});function v(u){if(a[g]=u,r){const[w,f]=rt(g);return r[g]=f,n(c[g],w)}return n(c[g])}}}function st(t,n){return Jt(()=>t(n||{}))}const ii=t=>`Stale read from <${t}>.`;function mr(t){const n="fallback"in t&&{fallback:()=>t.fallback};return ye(ri(()=>t.each,t.children,n||void 0))}function ft(t){const n=t.keyed,e=ye(()=>t.when,void 0,void 0),o=n?e:ye(e,void 0,{equals:(s,a)=>!s==!a});return ye(()=>{const s=o();if(s){const a=t.children;return typeof a=="function"&&a.length>0?Jt(()=>a(n?s:()=>{if(!Jt(o))throw ii("Show");return e()})):a}return t.fallback},void 0,void 0)}const Mt=t=>ye(()=>t());function ai(t,n,e){let o=e.length,s=n.length,a=o,i=0,r=0,c=n[s-1].nextSibling,h=null;for(;i<s||r<a;){if(n[i]===e[r]){i++,r++;continue}for(;n[s-1]===e[a-1];)s--,a--;if(s===i){const m=a<o?r?e[r-1].nextSibling:e[a-r]:c;for(;r<a;)t.insertBefore(e[r++],m)}else if(a===r)for(;i<s;)(!h||!h.has(n[i]))&&n[i].remove(),i++;else if(n[i]===e[a-1]&&e[r]===n[s-1]){const m=n[--s].nextSibling;t.insertBefore(e[r++],n[i++].nextSibling),t.insertBefore(e[--a],m),n[s]=e[a]}else{if(!h){h=new Map;let g=r;for(;g<a;)h.set(e[g],g++)}const m=h.get(n[i]);if(m!=null)if(r<m&&m<a){let g=i,v=1,u;for(;++g<s&&g<a&&!((u=h.get(n[g]))==null||u!==m+v);)v++;if(v>m-r){const w=n[i];for(;r<m;)t.insertBefore(e[r++],w)}else t.replaceChild(e[r++],n[i++])}else i++;else n[i++].remove()}}}const Fn="_$DX_DELEGATE";function si(t,n,e,o={}){let s;return Ue(a=>{s=a,n===document?t():X(n,t(),n.firstChild?null:void 0,e)},o.owner),()=>{s(),n.textContent=""}}function et(t,n,e,o){let s;const a=()=>{const r=document.createElement("template");return r.innerHTML=t,r.content.firstChild},i=()=>(s||(s=a())).cloneNode(!0);return i.cloneNode=i,i}function Ae(t,n=window.document){const e=n[Fn]||(n[Fn]=new Set);for(let o=0,s=t.length;o<s;o++){const a=t[o];e.has(a)||(e.add(a),n.addEventListener(a,oi))}}function At(t,n,e){e==null?t.removeAttribute(n):t.setAttribute(n,e)}function _t(t,n){n==null?t.removeAttribute("class"):t.className=n}function Bn(t,n,e,o){Array.isArray(e)?(t[`$$${n}`]=e[0],t[`$$${n}Data`]=e[1]):t[`$$${n}`]=e}function X(t,n,e,o){if(e!==void 0&&!o&&(o=[]),typeof n!="function")return Ze(t,n,o,e);yt(s=>Ze(t,n(),s,e),o)}function oi(t){let n=t.target;const e=`$$${t.type}`,o=t.target,s=t.currentTarget,a=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),i=()=>{const c=n[e];if(c&&!n.disabled){const h=n[`${e}Data`];if(h!==void 0?c.call(n,h,t):c.call(n,t),t.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(t.target)&&a(n.host),!0},r=()=>{for(;i()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),t.composedPath){const c=t.composedPath();a(c[0]);for(let h=0;h<c.length-2&&(n=c[h],!!i());h++){if(n._$host){n=n._$host,r();break}if(n.parentNode===s)break}}else r();a(o)}function Ze(t,n,e,o,s){for(;typeof e=="function";)e=e();if(n===e)return e;const a=typeof n,i=o!==void 0;if(t=i&&e[0]&&e[0].parentNode||t,a==="string"||a==="number"){if(a==="number"&&(n=n.toString(),n===e))return e;if(i){let r=e[0];r&&r.nodeType===3?r.data!==n&&(r.data=n):r=document.createTextNode(n),e=fe(t,e,o,r)}else e!==""&&typeof e=="string"?e=t.firstChild.data=n:e=t.textContent=n}else if(n==null||a==="boolean")e=fe(t,e,o);else{if(a==="function")return yt(()=>{let r=n();for(;typeof r=="function";)r=r();e=Ze(t,r,e,o)}),()=>e;if(Array.isArray(n)){const r=[],c=e&&Array.isArray(e);if(cn(r,n,e,s))return yt(()=>e=Ze(t,r,e,o,!0)),()=>e;if(r.length===0){if(e=fe(t,e,o),i)return e}else c?e.length===0?Rn(t,r,o):ai(t,e,r):(e&&fe(t),Rn(t,r));e=r}else if(n.nodeType){if(Array.isArray(e)){if(i)return e=fe(t,e,o,n);fe(t,e,null,n)}else e==null||e===""||!t.firstChild?t.appendChild(n):t.replaceChild(n,t.firstChild);e=n}}return e}function cn(t,n,e,o){let s=!1;for(let a=0,i=n.length;a<i;a++){let r=n[a],c=e&&e[t.length],h;if(!(r==null||r===!0||r===!1))if((h=typeof r)=="object"&&r.nodeType)t.push(r);else if(Array.isArray(r))s=cn(t,r,c)||s;else if(h==="function")if(o){for(;typeof r=="function";)r=r();s=cn(t,Array.isArray(r)?r:[r],Array.isArray(c)?c:[c])||s}else t.push(r),s=!0;else{const m=String(r);c&&c.nodeType===3&&c.data===m?t.push(c):t.push(document.createTextNode(m))}}return s}function Rn(t,n,e=null){for(let o=0,s=n.length;o<s;o++)t.insertBefore(n[o],e)}function fe(t,n,e,o){if(e===void 0)return t.textContent="";const s=o||document.createTextNode("");if(n.length){let a=!1;for(let i=n.length-1;i>=0;i--){const r=n[i];if(s!==r){const c=r.parentNode===t;!a&&!i?c?t.replaceChild(s,r):t.insertBefore(s,e):c&&r.remove()}else a=!0}}else t.insertBefore(s,e);return[s]}const dn=(t,n)=>n.some(e=>t instanceof e);let Mn,jn;function li(){return Mn||(Mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ci(){return jn||(jn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const un=new WeakMap,en=new WeakMap,Ke=new WeakMap;function di(t){const n=new Promise((e,o)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{e(ce(t.result)),s()},i=()=>{o(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return Ke.set(n,t),n}function ui(t){if(un.has(t))return;const n=new Promise((e,o)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{e(),s()},i=()=>{o(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});un.set(t,n)}let fn={get(t,n,e){if(t instanceof IDBTransaction){if(n==="done")return un.get(t);if(n==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ce(t[n])},set(t,n,e){return t[n]=e,!0},has(t,n){return t instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in t}};function yr(t){fn=t(fn)}function fi(t){return ci().includes(t)?function(...n){return t.apply(hn(this),n),ce(this.request)}:function(...n){return ce(t.apply(hn(this),n))}}function hi(t){return typeof t=="function"?fi(t):(t instanceof IDBTransaction&&ui(t),dn(t,li())?new Proxy(t,fn):t)}function ce(t){if(t instanceof IDBRequest)return di(t);if(en.has(t))return en.get(t);const n=hi(t);return n!==t&&(en.set(t,n),Ke.set(n,t)),n}const hn=t=>Ke.get(t);function gi(t,n,{blocked:e,upgrade:o,blocking:s,terminated:a}={}){const i=indexedDB.open(t,n),r=ce(i);return o&&i.addEventListener("upgradeneeded",c=>{o(ce(i.result),c.oldVersion,c.newVersion,ce(i.transaction),c)}),e&&i.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),r.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),r}const pi=["get","getKey","getAll","getAllKeys","count"],mi=["put","add","delete","clear"],nn=new Map;function Nn(t,n){if(!(t instanceof IDBDatabase&&!(n in t)&&typeof n=="string"))return;if(nn.get(n))return nn.get(n);const e=n.replace(/FromIndex$/,""),o=n!==e,s=mi.includes(e);if(!(e in(o?IDBIndex:IDBObjectStore).prototype)||!(s||pi.includes(e)))return;const a=async function(i,...r){const c=this.transaction(i,s?"readwrite":"readonly");let h=c.store;return o&&(h=h.index(r.shift())),(await Promise.all([h[e](...r),s&&c.done]))[0]};return nn.set(n,a),a}yr(t=>({...t,get:(n,e,o)=>Nn(n,e)||t.get(n,e,o),has:(n,e)=>!!Nn(n,e)||t.has(n,e)}));const yi=["continue","continuePrimaryKey","advance"],Wn={},gn=new WeakMap,vr=new WeakMap,vi={get(t,n){if(!yi.includes(n))return t[n];let e=Wn[n];return e||(e=Wn[n]=function(...o){gn.set(this,vr.get(this)[n](...o))}),e}};async function*bi(...t){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...t)),!n)return;n=n;const e=new Proxy(n,vi);for(vr.set(e,n),Ke.set(e,hn(n));n;)yield e,n=await(gn.get(e)||n.continue()),gn.delete(e)}function Zn(t,n){return n===Symbol.asyncIterator&&dn(t,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&dn(t,[IDBIndex,IDBObjectStore])}yr(t=>({...t,get(n,e,o){return Zn(n,e)?bi:t.get(n,e,o)},has(n,e){return Zn(n,e)||t.has(n,e)}}));const[br,wi]=rt(0),Ee=new Map,ve=new Map;function wr(t){wi(n=>n+1),t&&Ee.set(t,Date.now())}function _i(){return br()}function xi(t){ve.has(t)||ve.set(t,rt(0));const[n]=ve.get(t);return n}function ki(t){if(ve.has(t)){const[,n]=ve.get(t);n(e=>e+1)}Ee.set(t,Date.now())}function Si(){Ee.clear(),ve.clear()}function $i(){return{totalUpdates:br(),trackedSongs:Ee.size,recentUpdates:Array.from(Ee.entries()).sort(([,t],[,n])=>n-t).slice(0,10)}}function Ye(t){const{songId:n,specificOnly:e=!1}=t;n&&e?ki(n):wr(n)}typeof globalThis<"u"&&globalThis.__DEV__&&(globalThis.__songReactivity={getSongUpdateTrigger:_i,getUpdateStats:$i,clearUpdateHistory:Si,triggerSongUpdate:wr});function Ci(t){let n=t;const e=new Set;return{get:()=>n,set:o=>{n!==o&&(n=o,e.forEach(s=>s(n)))},subscribe:o=>(e.add(o),o(n),()=>e.delete(o))}}const It="musicPlaylistDB",Ei=3,Dt="playlists",xt="songs";let Le=null;async function Lt(){return Le||(Le=gi(It,Ei,{upgrade(t,n,e){t.objectStoreNames.contains(Dt)||t.createObjectStore(Dt,{keyPath:"id"}),t.objectStoreNames.contains(xt)||t.createObjectStore(xt,{keyPath:"id"}).createIndex("playlistId","playlistId",{unique:!1})}}),Le)}function Ai(t,n){return t.length!==n.length?!0:t.some((e,o)=>typeof e=="object"&&e!==null&&n[o]!==null?JSON.stringify(e)!==JSON.stringify(n[o]):e!==n[o])}const xe=new Map;function Ii({dbName:t,storeName:n,queryFn:e,fields:o=[],limit:s=null}){const a=Ci([]),i=new BroadcastChannel(`${t}-changes`);let r=[];async function c(){try{let u=await(await Lt()).getAll(n);e&&(u=u.filter(e)),s&&(u=u.slice(0,s));const w=u.map(f=>{if(o.length===0)return f;const y={id:f.id};for(const p of o)y[p]=f[p];return y});Ai(r,w)&&(r=w,a.set(w))}catch(v){console.error("Error in fetchAndUpdate:",v)}}const h=`${t}-${n}`;xe.has(h)||xe.set(h,new Set);const m=xe.get(h);m.add(c),i.onmessage=v=>{v.data?.type==="mutation"&&v.data.store===n&&c()},c();const g=a;return{...g,subscribe:v=>{const u=g.subscribe(v);return()=>{u(),m.delete(c),m.size===0&&xe.delete(h),i.close()}}}}async function Ut({dbName:t,storeName:n,key:e,updateFn:o}){const a=(await Lt()).transaction(n,"readwrite"),i=a.objectStore(n),r=await i.get(e),c=await o(r||{id:e});await i.put(c),await a.done;const h=`${t}-${n}`,m=xe.get(h);if(m)for(const u of Array.from(m))try{u()}catch(w){console.error("Error in direct query update:",w)}const g=new BroadcastChannel(`${t}-changes`),v={type:"mutation",store:n,id:e};g.postMessage(v),g.close()}async function rn(t){const n=crypto.randomUUID(),e=Date.now(),o={id:n,createdAt:e,updatedAt:e,...t,songIds:t.songIds||[]};return await Ut({dbName:It,storeName:Dt,key:n,updateFn:()=>o}),o}async function _r(t,n){await Ut({dbName:It,storeName:Dt,key:t,updateFn:e=>({...e,...n,updatedAt:Date.now()})})}async function zi(t){const n=await Lt(),e=n.transaction(xt,"readwrite");let a=await e.objectStore(xt).index("playlistId").openCursor(IDBKeyRange.only(t));for(;a;)await a.delete(),a=await a.continue();await e.done;const i=n.transaction(Dt,"readwrite");await i.objectStore(Dt).delete(t),await i.done;const r=new BroadcastChannel(`${It}-changes`);r.postMessage({type:"mutation",store:Dt,id:t}),r.postMessage({type:"mutation",store:xt,id:t})}async function Hn(t,n,e={}){const o=crypto.randomUUID(),s=Date.now(),a=await n.arrayBuffer(),i={id:o,file:n,mimeType:n.type,originalFilename:n.name,title:e.title||n.name.replace(/\.[^/.]+$/,""),artist:e.artist||"Unknown Artist",album:e.album||"Unknown Album",duration:e.duration||0,position:e.position||0,playlistId:t,createdAt:s,updatedAt:s,...e},r={...i,file:void 0,audioData:a,mimeType:n.type};return await Ut({dbName:It,storeName:xt,key:o,updateFn:()=>r}),await Ut({dbName:It,storeName:Dt,key:t,updateFn:c=>({...c,songIds:[...c.songIds||[],o],updatedAt:s})}),Ye({songId:i.id,metadata:{title:i.title}}),i}async function Ti(t,n){await Ut({dbName:It,storeName:xt,key:t,updateFn:e=>({...e,...n,updatedAt:Date.now()})}),Ye({songId:t})}async function Di(t,n,e){await Ut({dbName:It,storeName:Dt,key:t,updateFn:h=>{const m=[...h.songIds||[]],[g]=m.splice(n,1);return m.splice(e,0,g),{...h,songIds:m,updatedAt:Date.now()}}});const s=(await Lt()).transaction(xt,"readwrite"),i=s.objectStore(xt).index("playlistId"),r=[];let c=await i.openCursor(IDBKeyRange.only(t));for(;c;){const h=c.value;r.push(Ut({dbName:It,storeName:xt,key:h.id,updateFn:m=>({...m,position:0,updatedAt:Date.now()})})),c=await c.continue()}await s.done}function Li(){return Ii({dbName:It,storeName:Dt,fields:["title","description","imageData","thumbnailData","imageType","createdAt","updatedAt","songIds"]})}async function Pi(t){try{const e=await(await Lt()).get(xt,t);return e?{...e,audioData:void 0}:null}catch(n){return console.error(` Error fetching song ${t}:`,n),null}}async function xr(t){try{const e=await(await Lt()).get(xt,t);if(!e||!e.audioData||!e.mimeType)return null;const o=new Blob([e.audioData],{type:e.mimeType});return URL.createObjectURL(o)}catch(n){return console.error(` Error loading audio data for song ${t}:`,n),null}}async function Se(){try{return(await(await Lt()).getAll(xt)).map(e=>({...e,audioData:void 0}))||[]}catch(t){return console.error(" Error fetching all songs:",t),[]}}async function Oi(t){try{const n=await Lt(),e=[];for(const o of t){const s=await n.get(xt,o);s&&e.push(s)}return e.sort((o,s)=>{const a=t.indexOf(o.id),i=t.indexOf(s.id);return a-i})}catch(n){return console.error(" Error getting songs with audio data:",n),[]}}async function Vn(){try{return await(await Lt()).getAll(Dt)}catch(t){return console.error(" Error fetching all playlists:",t),[]}}async function Ui(t,n){const e=await Lt();await Ut({dbName:It,storeName:Dt,key:t,updateFn:i=>({...i,songIds:i.songIds.filter(r=>r!==n),updatedAt:Date.now()})});const o=e.transaction(xt,"readwrite");await o.objectStore(xt).delete(n),await o.done;const a=new BroadcastChannel(`${It}-changes`);a.postMessage({type:"mutation",store:xt,id:n}),a.close(),Ye({songId:n})}async function Fi(t,n,e){try{const o=n,s=kr(t,n,e);return{blobUrl:o,downloadPromise:s}}catch(o){throw console.error("Error in streamAudioWithCaching:",o),o}}async function kr(t,n,e){try{const s=await(await Lt()).get(xt,t.id);if(s?.audioData&&s.audioData.byteLength>0)return!0;const a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch: ${a.status} ${a.statusText}`);const i=a.headers.get("content-length"),r=i?parseInt(i,10):0;let c=0;const h=a.body?.getReader();if(!h)throw new Error("Response body is not readable");const m=[];for(;;){const{done:p,value:b}=await h.read();if(p)break;b&&(c+=b.length,m.push(b),e&&r>0&&e({loaded:c,total:r,percentage:Math.round(c/r*100)}))}const g=m.reduce((p,b)=>p+b.length,0),v=new ArrayBuffer(g),u=new Uint8Array(v);let w=0;for(const p of m)u.set(p,w),w+=p.length;const f=t.mimeType||a.headers.get("content-type")||"audio/mpeg",y={...t,audioData:v,mimeType:f,updatedAt:Date.now()};return await Ut({dbName:It,storeName:xt,key:t.id,updateFn:()=>y}),!0}catch(o){return console.error(`Error downloading and caching audio for ${t.id}:`,o),!1}}const Be=new Map;function Bi(t){return Be.has(t)}async function Sr(t,n,e){const o=Be.get(t.id);if(o)return o;try{const i=await(await Lt()).get(xt,t.id);if(i?.audioData&&i.audioData.byteLength>0)return!0}catch(a){console.error("Error checking cache status:",a)}const s=kr(t,n,e);return Be.set(t.id,s),s.finally(()=>{Be.delete(t.id)}),s}const[mn,$r]=rt(null),[Ie,yn]=rt(null),[de,vn]=rt([]),[bn,oe]=rt(!1),[Ri,wn]=rt(0),[Mi,_n]=rt(0),[ze,ue]=rt(-1),[Cr,so]=rt(1),[xn,he]=rt(!1),[Er,Gt]=rt(new Set),[Ar,Je]=rt(null),[kn,ke]=rt(null);let an=!1;const[Sn,ji]=rt("none"),[Ni,Wi]=rt(!1),[Ir,ge]=rt(new Map),[zr,pe]=rt(new Set);let Ct=null;function Zi(){return Ct||(Ct=new Audio,Ct.volume=Cr(),Ct.preload="metadata",Ct.addEventListener("loadstart",()=>{he(!0)}),Ct.addEventListener("canplay",()=>{he(!1)}),Ct.addEventListener("loadedmetadata",()=>{const t=Ct?.duration||0;_n(t),he(!1),Re()}),Ct.addEventListener("timeupdate",()=>{const t=Ct?.currentTime||0;wn(t);const n=Ct?.duration||0;n>0&&t/n>=.5&&!an&&(an=!0,Qi())}),Ct.addEventListener("play",()=>{oe(!0),an=!1,xn()||Re()}),Ct.addEventListener("pause",()=>{oe(!1),Re()}),Ct.addEventListener("ended",()=>{oe(!1),Ki()}),Ct.addEventListener("error",t=>{console.error("Audio error:",t),oe(!1),he(!1),Gt(new Set),Xe()}),Ct)}function Hi(t){return URL.createObjectURL(t)}function Tr(t){URL.revokeObjectURL(t)}function Xe(){const t=mn();t?document.title=`${t.title} - ${t.artist||"Unknown Artist"} | PLAYLISTZ`:document.title="P L A Y L I S T Z"}async function Re(){if(!("mediaSession"in navigator))return;const t=mn(),n=Ie(),e=xn();if(t){const o=await Vi(t,n);navigator.mediaSession.metadata=null,navigator.mediaSession.metadata=new MediaMetadata({title:e?`loading... ${t.title}`:t.title,artist:t.artist||"unknown artist",album:t.album||n?.title||"unknown album",artwork:o}),navigator.mediaSession.playbackState=e?"paused":bn()?"playing":"paused",navigator.mediaSession.setActionHandler("play",()=>{Ve()}),navigator.mediaSession.setActionHandler("pause",()=>{Ve()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{Yi()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{Dr()}),navigator.mediaSession.setActionHandler("seekto",i=>{i.seekTime!==void 0&&!e&&Lr(i.seekTime)});const s=Et.duration(),a=Et.currentTime();if(s>0&&!e)navigator.mediaSession.setPositionState({duration:s,playbackRate:1,position:a});else if(e)try{navigator.mediaSession.setPositionState({duration:0,playbackRate:1,position:0})}catch{}}else navigator.mediaSession.metadata=null,navigator.mediaSession.playbackState="none";Xe()}async function qn(t,n){return t.byteLength<5e5?t:new Promise(e=>{const o=new Blob([t],{type:n}),s=new Image,a=document.createElement("canvas"),i=a.getContext("2d");s.onload=()=>{let{width:c,height:h}=s;if(c>300||h>300){const m=Math.min(300/c,300/h);c*=m,h*=m}a.width=c,a.height=h,i?(i.drawImage(s,0,0,c,h),a.toBlob(m=>{m?m.arrayBuffer().then(e):e(t)},n,.8)):e(t)},s.onerror=()=>{e(t)},s.src=URL.createObjectURL(o)})}async function Vi(t,n){const e=[],o=t.thumbnailData||t.imageData;if(o&&t.imageType){const s=await qn(o,t.imageType),a=new Blob([s],{type:t.imageType}),i=URL.createObjectURL(a);e.push({src:i,sizes:"512x512",type:t.imageType}),e.push({src:i,sizes:"256x256",type:t.imageType}),e.push({src:i,sizes:"96x96",type:t.imageType})}else{const s=n?.thumbnailData||n?.imageData;if(s&&n?.imageType){const a=await qn(s,n.imageType),i=new Blob([a],{type:n.imageType}),r=URL.createObjectURL(i);e.push({src:r,sizes:"512x512",type:n.imageType}),e.push({src:r,sizes:"256x256",type:n.imageType}),e.push({src:r,sizes:"96x96",type:n.imageType})}}return e}async function qi(t){try{const e=(await Se()).filter(o=>t.songIds.includes(o.id)).sort((o,s)=>t.songIds.indexOf(o.id)-t.songIds.indexOf(s.id));vn(e),yn(t),ue(-1)}catch(n){throw console.error("Error loading playlist queue:",n),n}}async function Gn(t){try{const n=Et.currentSong(),o=(await Se()).filter(s=>t.songIds.includes(s.id)).sort((s,a)=>t.songIds.indexOf(s.id)-t.songIds.indexOf(a.id));if(vn(o),yn(t),n){const s=o.findIndex(a=>a.id===n.id);ue(s>=0?s:-1)}}catch(n){throw console.error("Error refreshing playlist queue:",n),n}}function Gi(){const t=de(),n=ze();if(t.length===0)return null;const e=Sn();if(e==="one")return n>=0&&t[n]||null;const o=n+1;return o<t.length?t[o]||null:e==="all"&&t[0]||null}async function Ki(){Gi()?await Dr():(oe(!1),Re())}async function He(t,n){const e=Zi();try{if(Je(t.id),Gt(s=>new Set(Array.from(s).concat([t.id]))),kn()===t.id&&ke(null),e.src&&e.src.startsWith("blob:")&&Tr(e.src),wn(0),_n(0),e.currentTime=0,he(!0),$r(t),"mediaSession"in navigator){navigator.mediaSession.playbackState="paused";try{navigator.mediaSession.setPositionState({duration:0,playbackRate:1,position:0})}catch{}}if(n){const s=Ie();(!s||s.id!==n.id||de().length===0)&&await qi(n);const i=de().findIndex(r=>r.id===t.id);ue(i>=0?i:0)}let o=t.blobUrl;if(!o&&t.file&&(o=Hi(t.file)),!o)if(window.location.protocol==="file:"&&t.standaloneFilePath){const s=t.standaloneFilePath;o=new URL(s,window.location.href).href;const a=document.createElement("audio");a.src=o,a.addEventListener("error",i=>{console.error("audio file test failed:",i),console.error("audio error:",a.error)}),a.load()}else{let s=await xr(t.id);if(s)o=s;else if(t.standaloneFilePath){const a=t.standaloneFilePath;if(window.location.protocol==="file:")o=new URL(a,window.location.href).href;else try{const{blobUrl:i,downloadPromise:r}=await Fi(t,a,c=>{ge(h=>{const m=new Map(h);return m.set(t.id,c.percentage),m})});pe(c=>new Set(Array.from(c).concat([t.id]))),o=i,r.then(c=>{c?console.log(`successfully cached ${t.title}`):console.warn(`failed to cache ${t.title}`)}).catch(c=>{console.error(`error caching ${t.title}:`,c)}).finally(()=>{ge(c=>{const h=new Map(c);return h.delete(t.id),h}),pe(c=>{const h=new Set(c);return h.delete(t.id),h})})}catch(i){console.error("streaming approach failed, using direct url:",i),o=a,pe(r=>new Set(Array.from(r).concat([t.id]))),Sr(t,a,r=>{ge(c=>{const h=new Map(c);return h.set(t.id,r.percentage),h})}).finally(()=>{ge(r=>{const c=new Map(r);return c.delete(t.id),c}),pe(r=>{const c=new Set(r);return c.delete(t.id),c})})}}}if(!o)throw new Error(`no audio source available for song: ${t.title}. check that audio files are accessible.`);if(Ar()!==t.id){Gt(s=>{const a=new Set(s);return a.delete(t.id),a});return}e.src=o,e.addEventListener("error",s=>{console.error("audio loading error:",s),console.error("audio error details:",e.error)},{once:!0}),await e.play(),Gt(s=>{const a=new Set(s);return a.delete(t.id),a})}catch(o){throw console.error("error playing song:",o),he(!1),Gt(s=>{const a=new Set(s);return a.delete(t.id),a}),Xe(),o}}async function Dr(){const t=de(),n=ze();if(t.length===0)return;const e=Sn();let o;if(e==="one")o=n;else if(n+1<t.length)o=n+1;else if(e==="all")o=0;else return;const s=t[o];s&&(ue(o),Je(s.id),await He(s,Ie()||void 0))}async function Yi(){const t=de(),n=ze();if(t.length===0||n<=0)return;const e=n-1,o=t[e];o&&(ue(e),Je(o.id),await He(o,Ie()||void 0))}async function Ve(){const t=Ct;if(t)try{bn()?t.pause():await t.play()}catch(n){console.error("Error toggling playback:",n)}}function Ji(){const t=Ct;t&&(t.pause(),t.currentTime=0,t.src&&t.src.startsWith("blob:")&&Tr(t.src),t.src=""),$r(null),yn(null),oe(!1),wn(0),_n(0),ue(0),Xe()}function Lr(t){const n=Ct;n&&!isNaN(n.duration)&&(n.currentTime=Math.max(0,Math.min(t,n.duration)))}const Et={currentSong:mn,currentPlaylist:Ie,playlistQueue:de,isPlaying:bn,currentTime:Ri,duration:Mi,currentIndex:ze,volume:Cr,isLoading:xn,loadingSongIds:Er,selectedSongId:Ar,preloadingSongId:kn,repeatMode:Sn,isShuffled:Ni,downloadProgress:Ir,cachingSongIds:zr};function Xi(){Ji();const t=Ct;t&&(t.removeEventListener("loadstart",()=>{}),t.removeEventListener("canplay",()=>{}),t.removeEventListener("loadedmetadata",()=>{}),t.removeEventListener("timeupdate",()=>{}),t.removeEventListener("play",()=>{}),t.removeEventListener("pause",()=>{}),t.removeEventListener("ended",()=>{}),t.removeEventListener("error",()=>{})),Ct=null,vn([]),ue(-1),ji("none"),Wi(!1)}async function Qi(){const t=de(),n=ze();if(t.length===0||n<0)return;const e=n+1;if(e>=t.length)return;const o=t[e];if(o&&!(Er().has(o.id)||kn()===o.id)){ke(o.id),Gt(s=>new Set(Array.from(s).concat([o.id])));try{if(await xr(o.id)){Gt(a=>{const i=new Set(a);return i.delete(o.id),i}),ke(null);return}if(Bi(o.id)){Gt(a=>{const i=new Set(a);return i.delete(o.id),i}),ke(null);return}o.standaloneFilePath&&(pe(a=>new Set(Array.from(a).concat([o.id]))),Sr(o,o.standaloneFilePath,a=>{ge(i=>{const r=new Map(i);return r.set(o.id,a.percentage),r})}).then(a=>{a?console.log(`successfully preloaded ${o.title}`):console.warn(`failed to preload ${o.title}`)}).catch(a=>{console.error(`error preloading ${o.title}:`,a)}).finally(()=>{ge(a=>{const i=new Map(a);return i.delete(o.id),i}),pe(a=>{const i=new Set(a);return i.delete(o.id),i})}))}catch{}finally{Gt(s=>{const a=new Set(s);return a.delete(o.id),a}),ke(null)}}}function ta(t){const n=Ct;n&&(n.pause(),oe(!1)),Je(t)}function ea(t){return Ir().get(t)||0}function na(t){return zr().has(t)}async function ra(t){try{const n=await t.arrayBuffer(),e=new DataView(n);if(n.byteLength<10)return{success:!1,error:"File too small to contain ID3 tags"};if(String.fromCharCode(e.getUint8(0),e.getUint8(1),e.getUint8(2))!=="ID3")return{success:!1,error:"No ID3v2 tag found"};const s=e.getUint8(3),a=(e.getUint8(6)&127)<<21|(e.getUint8(7)&127)<<14|(e.getUint8(8)&127)<<7|e.getUint8(9)&127;let i=10;const r=Math.min(10+a,n.byteLength);for(;i<r-10;){if(String.fromCharCode(e.getUint8(i),e.getUint8(i+1),e.getUint8(i+2),e.getUint8(i+3))==="APIC"){const m=s===4?(e.getUint8(i+4)&127)<<21|(e.getUint8(i+5)&127)<<14|(e.getUint8(i+6)&127)<<7|e.getUint8(i+7)&127:e.getUint8(i+4)<<24|e.getUint8(i+5)<<16|e.getUint8(i+6)<<8|e.getUint8(i+7);let g=i+10;g++;let v="";for(;g<r&&e.getUint8(g)!==0;)v+=String.fromCharCode(e.getUint8(g)),g++;for(g++,g++;g<r&&e.getUint8(g)!==0;)g++;g++;const u=m-(g-i-10);if(u>0&&g+u<=n.byteLength){const w=n.slice(g,g+u),f=new Blob([w],{type:v});return{success:!0,albumArt:URL.createObjectURL(f)}}}const h=s===4?(e.getUint8(i+4)&127)<<21|(e.getUint8(i+5)&127)<<14|(e.getUint8(i+6)&127)<<7|e.getUint8(i+7)&127:e.getUint8(i+4)<<24|e.getUint8(i+5)<<16|e.getUint8(i+6)<<8|e.getUint8(i+7);i+=10+h}return{success:!1,error:"No album art found in ID3 tags"}}catch(n){return console.error(" Error extracting album art:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function $n(t){try{if(!t.type.startsWith("image/"))return{success:!1,error:"File is not an image"};const n=10*1024*1024;if(t.size>n)return{success:!1,error:"Image file too large (max 10MB)"};const e=await t.arrayBuffer(),o=new Image,s=URL.createObjectURL(t);return new Promise(a=>{o.onload=async()=>{try{const i={width:o.width,height:o.height,format:t.type,size:t.size},r=await ia(o,300,300,t.type);URL.revokeObjectURL(s),a({success:!0,imageData:e,thumbnailData:r,metadata:i})}catch(i){URL.revokeObjectURL(s),a({success:!1,error:i instanceof Error?i.message:"Processing failed"})}},o.onerror=()=>{URL.revokeObjectURL(s),a({success:!1,error:"Invalid image file"})},o.src=s})}catch(n){return console.error(" Error processing playlist cover:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async function ia(t,n,e,o="image/jpeg"){const s=document.createElement("canvas"),a=s.getContext("2d");if(!a)throw new Error("Cannot create canvas context");let{width:i,height:r}=t;if(i>n||r>e){const c=Math.min(n/i,e/r);i*=c,r*=c}return s.width=i,s.height=r,a.drawImage(t,0,0,i,r),new Promise((c,h)=>{s.toBlob(async m=>{if(m){const g=await m.arrayBuffer();c(g)}else h(new Error("Failed to create thumbnail data"))},o,.8)})}function Pr(t){return["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)?t.size>10485760?{valid:!1,error:"Image file too large. Maximum size is 10MB."}:{valid:!0}:{valid:!1,error:"Unsupported image format. Use JPEG, PNG, GIF, or WebP."}}function Wt(t,n="image/jpeg"){const e=new Blob([t],{type:n});return URL.createObjectURL(e)}function se(t,n,e,o="thumbnail"){if(!e)return null;if(o==="background"||o==="modal"){if(n)return Wt(n,e);if(t)return Wt(t,e)}return t?Wt(t,e):n?Wt(n,e):null}function Or(t){return t.type.startsWith("audio/")}function aa(t,n=100){const e=n*1024*1024;return t.size<=e}function sa(t){const n=t.replace(/\.[^/.]+$/,""),e=n.split(" - ");return e.length===2?{artist:e[0]?.trim(),title:e[1]?.trim()}:e.length===3?{artist:e[0]?.trim(),album:e[1]?.trim(),title:e[2]?.trim()}:{title:n.trim()}}async function oa(t){return new Promise(n=>{try{const e=new Audio,o=URL.createObjectURL(t);e.addEventListener("loadedmetadata",()=>{URL.revokeObjectURL(o),n(e.duration||0)}),e.addEventListener("error",s=>{URL.revokeObjectURL(o),console.warn("Could not extract duration from audio file:",s),n(0)}),e.src=o}catch(e){console.warn("Failed to create blob URL for duration extraction:",e),n(0)}})}async function la(t){try{const n=await ra(t);if(n.success&&n.albumArt){const o=await(await fetch(n.albumArt)).arrayBuffer(),s=new Blob([o],{type:"image/jpeg"}),a=new File([s],"albumart.jpg",{type:"image/jpeg"});URL.revokeObjectURL(n.albumArt);const i=await $n(a);return i.success&&i.imageData&&i.thumbnailData?{fullSizeData:i.imageData,thumbnailData:i.thumbnailData,type:i.metadata?.format||"image/jpeg"}:{fullSizeData:o,thumbnailData:o,type:"image/jpeg"}}return}catch(n){console.warn(` Could not extract album art from ${t.name}:`,n);return}}async function ca(t){const n=sa(t.name);try{const e=await oa(t),o=await la(t);return{title:n.title||"Unknown Title",artist:n.artist||"Unknown Artist",album:n.album||"Unknown Album",duration:e,coverArtData:o?.fullSizeData,coverArtThumbnailData:o?.thumbnailData,coverArtType:o?.type}}catch(e){return console.error("Error extracting metadata:",e),{title:n.title||"Unknown Title",artist:n.artist||"Unknown Artist",album:n.album||"Unknown Album",duration:0}}}async function da(t){try{if(!Or(t))return{success:!1,error:`Unsupported file type: ${t.type}. Please upload an audio file.`};if(!aa(t))return{success:!1,error:`File too large: ${Math.round(t.size/1024/1024)}MB. Maximum size is 100MB.`};const n=await ca(t);let e;try{e=URL.createObjectURL(t)}catch(o){console.warn("Failed to create blob URL for file:",t.name,o)}return{success:!0,song:{id:"",file:t,blobUrl:e,title:n.title||"Unknown Title",artist:n.artist||"Unknown Artist",album:n.album||"Unknown Album",duration:n.duration||0,position:0,imageData:n.coverArtData,thumbnailData:n.coverArtThumbnailData,imageType:n.coverArtType,fileSize:t.size,createdAt:Date.now(),updatedAt:Date.now(),playlistId:""}}}catch(n){return console.error("Error processing audio file:",n),{success:!1,error:`Error processing file: ${n instanceof Error?n.message:"Unknown error"}`}}}async function ua(t){const n=Array.from(t),e=[],o=3;for(let s=0;s<n.length;s+=o){const a=n.slice(s,s+o),i=await Promise.all(a.map(r=>da(r)));e.push(...i)}return e}function fa(t){return Array.from(t).filter(Or)}const me=new Set;let $e=null;function ha(){$e||($e=window.setInterval(()=>{me.forEach(t=>t())},6e4))}function Ur(){$e&&(window.clearInterval($e),$e=null)}function Fr(t){const[n,e]=rt("");function o(){const i=Date.now()-t;let r;if(i<6e4)r="just now";else if(i<36e5){const c=Math.floor(i/6e4);r=`${c} ${c===1?"minute":"minutes"} ago`}else if(i<864e5){const c=Math.floor(i/36e5);r=`${c} ${c===1?"hour":"hours"} ago`}else if(i<6048e5){const c=Math.floor(i/864e5);r=`${c} ${c===1?"day":"days"} ago`}else if(i<2629746e3){const c=Math.floor(i/6048e5);r=`${c} ${c===1?"week":"weeks"} ago`}else if(i<31556952e3){const c=Math.floor(i/2629746e3);r=`${c} ${c===1?"month":"months"} ago`}else{const c=Math.floor(i/31556952e3);r=`${c} ${c===1?"year":"years"} ago`}e(r)}return o(),me.add(o),me.size===1&&ha(),{signal:n,destroy:()=>{me.delete(o),me.size===0&&Ur()},update:o}}function ga(){me.clear(),Ur()}var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Oe(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Kn;function ma(){return Kn||(Kn=1,function(t,n){(function(e){t.exports=e()})(function(){return function e(o,s,a){function i(h,m){if(!s[h]){if(!o[h]){var g=typeof Oe=="function"&&Oe;if(!m&&g)return g(h,!0);if(r)return r(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var u=s[h]={exports:{}};o[h][0].call(u.exports,function(w){var f=o[h][1][w];return i(f||w)},u,u.exports,e,o,s,a)}return s[h].exports}for(var r=typeof Oe=="function"&&Oe,c=0;c<a.length;c++)i(a[c]);return i}({1:[function(e,o,s){var a=e("./utils"),i=e("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var h,m,g,v,u,w,f,y=[],p=0,b=c.length,S=b,A=a.getTypeOf(c)!=="string";p<c.length;)S=b-p,g=A?(h=c[p++],m=p<b?c[p++]:0,p<b?c[p++]:0):(h=c.charCodeAt(p++),m=p<b?c.charCodeAt(p++):0,p<b?c.charCodeAt(p++):0),v=h>>2,u=(3&h)<<4|m>>4,w=1<S?(15&m)<<2|g>>6:64,f=2<S?63&g:64,y.push(r.charAt(v)+r.charAt(u)+r.charAt(w)+r.charAt(f));return y.join("")},s.decode=function(c){var h,m,g,v,u,w,f=0,y=0,p="data:";if(c.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var b,S=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===r.charAt(64)&&S--,c.charAt(c.length-2)===r.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=i.uint8array?new Uint8Array(0|S):new Array(0|S);f<c.length;)h=r.indexOf(c.charAt(f++))<<2|(v=r.indexOf(c.charAt(f++)))>>4,m=(15&v)<<4|(u=r.indexOf(c.charAt(f++)))>>2,g=(3&u)<<6|(w=r.indexOf(c.charAt(f++))),b[y++]=h,u!==64&&(b[y++]=m),w!==64&&(b[y++]=g);return b}},{"./support":30,"./utils":32}],2:[function(e,o,s){var a=e("./external"),i=e("./stream/DataWorker"),r=e("./stream/Crc32Probe"),c=e("./stream/DataLengthProbe");function h(m,g,v,u,w){this.compressedSize=m,this.uncompressedSize=g,this.crc32=v,this.compression=u,this.compressedContent=w}h.prototype={getContentWorker:function(){var m=new i(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),g=this;return m.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new i(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,g,v){return m.pipe(new r).pipe(new c("uncompressedSize")).pipe(g.compressWorker(v)).pipe(new c("compressedSize")).withStreamInfo("compression",g)},o.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,o,s){var a=e("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},s.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,o,s){var a=e("./utils"),i=function(){for(var r,c=[],h=0;h<256;h++){r=h;for(var m=0;m<8;m++)r=1&r?3988292384^r>>>1:r>>>1;c[h]=r}return c}();o.exports=function(r,c){return r!==void 0&&r.length?a.getTypeOf(r)!=="string"?function(h,m,g,v){var u=i,w=v+g;h^=-1;for(var f=v;f<w;f++)h=h>>>8^u[255&(h^m[f])];return-1^h}(0|c,r,r.length,0):function(h,m,g,v){var u=i,w=v+g;h^=-1;for(var f=v;f<w;f++)h=h>>>8^u[255&(h^m.charCodeAt(f))];return-1^h}(0|c,r,r.length,0):0}},{"./utils":32}],5:[function(e,o,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(e,o,s){var a=null;a=typeof Promise<"u"?Promise:e("lie"),o.exports={Promise:a}},{lie:37}],7:[function(e,o,s){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=e("pako"),r=e("./utils"),c=e("./stream/GenericWorker"),h=a?"uint8array":"array";function m(g,v){c.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=v,this.meta={}}s.magic="\b\0",r.inherits(m,c),m.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(h,g.data),!1)},m.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(v){g.push({data:v,meta:g.meta})}},s.compressWorker=function(g){return new m("Deflate",g)},s.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,o,s){function a(u,w){var f,y="";for(f=0;f<w;f++)y+=String.fromCharCode(255&u),u>>>=8;return y}function i(u,w,f,y,p,b){var S,A,C=u.file,U=u.compression,E=b!==h.utf8encode,M=r.transformTo("string",b(C.name)),z=r.transformTo("string",h.utf8encode(C.name)),T=C.comment,J=r.transformTo("string",b(T)),x=r.transformTo("string",h.utf8encode(T)),L=z.length!==C.name.length,d=x.length!==T.length,j="",ot="",Z="",ct=C.dir,Y=C.date,lt={crc32:0,compressedSize:0,uncompressedSize:0};w&&!f||(lt.crc32=u.crc32,lt.compressedSize=u.compressedSize,lt.uncompressedSize=u.uncompressedSize);var F=0;w&&(F|=8),E||!L&&!d||(F|=2048);var P=0,N=0;ct&&(P|=16),p==="UNIX"?(N=798,P|=function(V,dt){var at=V;return V||(at=dt?16893:33204),(65535&at)<<16}(C.unixPermissions,ct)):(N=20,P|=function(V){return 63&(V||0)}(C.dosPermissions)),S=Y.getUTCHours(),S<<=6,S|=Y.getUTCMinutes(),S<<=5,S|=Y.getUTCSeconds()/2,A=Y.getUTCFullYear()-1980,A<<=4,A|=Y.getUTCMonth()+1,A<<=5,A|=Y.getUTCDate(),L&&(ot=a(1,1)+a(m(M),4)+z,j+="up"+a(ot.length,2)+ot),d&&(Z=a(1,1)+a(m(J),4)+x,j+="uc"+a(Z.length,2)+Z);var tt="";return tt+=`
\0`,tt+=a(F,2),tt+=U.magic,tt+=a(S,2),tt+=a(A,2),tt+=a(lt.crc32,4),tt+=a(lt.compressedSize,4),tt+=a(lt.uncompressedSize,4),tt+=a(M.length,2),tt+=a(j.length,2),{fileRecord:g.LOCAL_FILE_HEADER+tt+M+j,dirRecord:g.CENTRAL_FILE_HEADER+a(N,2)+tt+a(J.length,2)+"\0\0\0\0"+a(P,4)+a(y,4)+M+j+J}}var r=e("../utils"),c=e("../stream/GenericWorker"),h=e("../utf8"),m=e("../crc32"),g=e("../signature");function v(u,w,f,y){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=f,this.encodeFileName=y,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(v,c),v.prototype.push=function(u){var w=u.meta.percent||0,f=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,c.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:f?(w+100*(f-y-1))/f:100}}))},v.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var w=this.streamFiles&&!u.file.dir;if(w){var f=i(u,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(u){this.accumulate=!1;var w=this.streamFiles&&!u.file.dir,f=i(u,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),w)this.push({data:function(y){return g.DATA_DESCRIPTOR+a(y.crc32,4)+a(y.compressedSize,4)+a(y.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var u=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var f=this.bytesWritten-u,y=function(p,b,S,A,C){var U=r.transformTo("string",C(A));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(p,2)+a(p,2)+a(b,4)+a(S,4)+a(U.length,2)+U}(this.dirRecords.length,f,u,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(u){this._sources.push(u);var w=this;return u.on("data",function(f){w.processChunk(f)}),u.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),u.on("error",function(f){w.error(f)}),this},v.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(u){var w=this._sources;if(!c.prototype.error.call(this,u))return!1;for(var f=0;f<w.length;f++)try{w[f].error(u)}catch{}return!0},v.prototype.lock=function(){c.prototype.lock.call(this);for(var u=this._sources,w=0;w<u.length;w++)u[w].lock()},o.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,o,s){var a=e("../compressions"),i=e("./ZipFileWorker");s.generateWorker=function(r,c,h){var m=new i(c.streamFiles,h,c.platform,c.encodeFileName),g=0;try{r.forEach(function(v,u){g++;var w=function(b,S){var A=b||S,C=a[A];if(!C)throw new Error(A+" is not a valid compression method !");return C}(u.options.compression,c.compression),f=u.options.compressionOptions||c.compressionOptions||{},y=u.dir,p=u.date;u._compressWorker(w,f).withStreamInfo("file",{name:v,dir:y,date:p,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(m)}),m.entriesCount=g}catch(v){m.error(v)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,o,s){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new a;for(var r in this)typeof this[r]!="function"&&(i[r]=this[r]);return i}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(i,r){return new a().loadAsync(i,r)},a.external=e("./external"),o.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,o,s){var a=e("./utils"),i=e("./external"),r=e("./utf8"),c=e("./zipEntries"),h=e("./stream/Crc32Probe"),m=e("./nodejsUtils");function g(v){return new i.Promise(function(u,w){var f=v.decompressed.getContentWorker().pipe(new h);f.on("error",function(y){w(y)}).on("end",function(){f.streamInfo.crc32!==v.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}o.exports=function(v,u){var w=this;return u=a.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),m.isNode&&m.isStream(v)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",v,!0,u.optimizedBinaryString,u.base64).then(function(f){var y=new c(u);return y.load(f),y}).then(function(f){var y=[i.Promise.resolve(f)],p=f.files;if(u.checkCRC32)for(var b=0;b<p.length;b++)y.push(g(p[b]));return i.Promise.all(y)}).then(function(f){for(var y=f.shift(),p=y.files,b=0;b<p.length;b++){var S=p[b],A=S.fileNameStr,C=a.resolve(S.fileNameStr);w.file(C,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:u.createFolders}),S.dir||(w.file(C).unsafeOriginalName=A)}return y.zipComment.length&&(w.comment=y.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,o,s){var a=e("../utils"),i=e("../stream/GenericWorker");function r(c,h){i.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(h)}a.inherits(r,i),r.prototype._bindStream=function(c){var h=this;(this._stream=c).pause(),c.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},r.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,o,s){var a=e("readable-stream").Readable;function i(r,c,h){a.call(this,c),this._helper=r;var m=this;r.on("data",function(g,v){m.push(g)||m._helper.pause(),h&&h(v)}).on("error",function(g){m.emit("error",g)}).on("end",function(){m.push(null)})}e("../utils").inherits(i,a),i.prototype._read=function(){this._helper.resume()},o.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,o,s){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,i);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,i)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var i=new Buffer(a);return i.fill(0),i},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(e,o,s){function a(C,U,E){var M,z=r.getTypeOf(U),T=r.extend(E||{},m);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(C=p(C)),T.createFolders&&(M=y(C))&&b.call(this,M,!0);var J=z==="string"&&T.binary===!1&&T.base64===!1;E&&E.binary!==void 0||(T.binary=!J),(U instanceof g&&U.uncompressedSize===0||T.dir||!U||U.length===0)&&(T.base64=!1,T.binary=!0,U="",T.compression="STORE",z="string");var x=null;x=U instanceof g||U instanceof c?U:w.isNode&&w.isStream(U)?new f(C,U):r.prepareContent(C,U,T.binary,T.optimizedBinaryString,T.base64);var L=new v(C,x,T);this.files[C]=L}var i=e("./utf8"),r=e("./utils"),c=e("./stream/GenericWorker"),h=e("./stream/StreamHelper"),m=e("./defaults"),g=e("./compressedObject"),v=e("./zipObject"),u=e("./generate"),w=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),y=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var U=C.lastIndexOf("/");return 0<U?C.substring(0,U):""},p=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},b=function(C,U){return U=U!==void 0?U:m.createFolders,C=p(C),this.files[C]||a.call(this,C,null,{dir:!0,createFolders:U}),this.files[C]};function S(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var U,E,M;for(U in this.files)M=this.files[U],(E=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&C(E,M)},filter:function(C){var U=[];return this.forEach(function(E,M){C(E,M)&&U.push(M)}),U},file:function(C,U,E){if(arguments.length!==1)return C=this.root+C,a.call(this,C,U,E),this;if(S(C)){var M=C;return this.filter(function(T,J){return!J.dir&&M.test(T)})}var z=this.files[this.root+C];return z&&!z.dir?z:null},folder:function(C){if(!C)return this;if(S(C))return this.filter(function(z,T){return T.dir&&C.test(z)});var U=this.root+C,E=b.call(this,U),M=this.clone();return M.root=E.name,M},remove:function(C){C=this.root+C;var U=this.files[C];if(U||(C.slice(-1)!=="/"&&(C+="/"),U=this.files[C]),U&&!U.dir)delete this.files[C];else for(var E=this.filter(function(z,T){return T.name.slice(0,C.length)===C}),M=0;M<E.length;M++)delete this.files[E[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var U,E={};try{if((E=r.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");r.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var M=E.comment||this.comment||"";U=u.generateWorker(this,E,M)}catch(z){(U=new c("error")).error(z)}return new h(U,E.type||"string",E.mimeType)},generateAsync:function(C,U){return this.generateInternalStream(C).accumulate(U)},generateNodeStream:function(C,U){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(U)}};o.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,o,s){o.exports=e("stream")},{stream:void 0}],17:[function(e,o,s){var a=e("./DataReader");function i(r){a.call(this,r);for(var c=0;c<this.data.length;c++)r[c]=255&r[c]}e("../utils").inherits(i,a),i.prototype.byteAt=function(r){return this.data[this.zero+r]},i.prototype.lastIndexOfSignature=function(r){for(var c=r.charCodeAt(0),h=r.charCodeAt(1),m=r.charCodeAt(2),g=r.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===c&&this.data[v+1]===h&&this.data[v+2]===m&&this.data[v+3]===g)return v-this.zero;return-1},i.prototype.readAndCheckSignature=function(r){var c=r.charCodeAt(0),h=r.charCodeAt(1),m=r.charCodeAt(2),g=r.charCodeAt(3),v=this.readData(4);return c===v[0]&&h===v[1]&&m===v[2]&&g===v[3]},i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},o.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,o,s){var a=e("../utils");function i(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var c,h=0;for(this.checkOffset(r),c=this.index+r-1;c>=this.index;c--)h=(h<<8)+this.byteAt(c);return this.index+=r,h},readString:function(r){return a.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},o.exports=i},{"../utils":32}],19:[function(e,o,s){var a=e("./Uint8ArrayReader");function i(r){a.call(this,r)}e("../utils").inherits(i,a),i.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},o.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,o,s){var a=e("./DataReader");function i(r){a.call(this,r)}e("../utils").inherits(i,a),i.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},i.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},i.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},i.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},o.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,o,s){var a=e("./ArrayReader");function i(r){a.call(this,r)}e("../utils").inherits(i,a),i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},o.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,o,s){var a=e("../utils"),i=e("../support"),r=e("./ArrayReader"),c=e("./StringReader"),h=e("./NodeBufferReader"),m=e("./Uint8ArrayReader");o.exports=function(g){var v=a.getTypeOf(g);return a.checkSupport(v),v!=="string"||i.uint8array?v==="nodebuffer"?new h(g):i.uint8array?new m(a.transformTo("uint8array",g)):new r(a.transformTo("array",g)):new c(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,o,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,o,s){var a=e("./GenericWorker"),i=e("../utils");function r(c){a.call(this,"ConvertWorker to "+c),this.destType=c}i.inherits(r,a),r.prototype.processChunk=function(c){this.push({data:i.transformTo(this.destType,c.data),meta:c.meta})},o.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(e,o,s){var a=e("./GenericWorker"),i=e("../crc32");function r(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(r,a),r.prototype.processChunk=function(c){this.streamInfo.crc32=i(c.data,this.streamInfo.crc32||0),this.push(c)},o.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,o,s){var a=e("../utils"),i=e("./GenericWorker");function r(c){i.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}a.inherits(r,i),r.prototype.processChunk=function(c){if(c){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+c.data.length}i.prototype.processChunk.call(this,c)},o.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(e,o,s){var a=e("../utils"),i=e("./GenericWorker");function r(c){i.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=a.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}a.inherits(r,i),r.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h)}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(e,o,s){function a(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,r){return this._listeners[i].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,r){if(this._listeners[i])for(var c=0;c<this._listeners[i].length;c++)this._listeners[i][c].call(this,r)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var r=this;return i.on("data",function(c){r.processChunk(c)}),i.on("end",function(){r.end()}),i.on("error",function(c){r.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,r){return this.extraStreamInfo[i]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},o.exports=a},{}],29:[function(e,o,s){var a=e("../utils"),i=e("./ConvertWorker"),r=e("./GenericWorker"),c=e("../base64"),h=e("../support"),m=e("../external"),g=null;if(h.nodestream)try{g=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(w,f){return new m.Promise(function(y,p){var b=[],S=w._internalType,A=w._outputType,C=w._mimeType;w.on("data",function(U,E){b.push(U),f&&f(E)}).on("error",function(U){b=[],p(U)}).on("end",function(){try{var U=function(E,M,z){switch(E){case"blob":return a.newBlob(a.transformTo("arraybuffer",M),z);case"base64":return c.encode(M);default:return a.transformTo(E,M)}}(A,function(E,M){var z,T=0,J=null,x=0;for(z=0;z<M.length;z++)x+=M[z].length;switch(E){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(J=new Uint8Array(x),z=0;z<M.length;z++)J.set(M[z],T),T+=M[z].length;return J;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+E+"'")}}(S,b),C);y(U)}catch(E){p(E)}b=[]}).resume()})}function u(w,f,y){var p=f;switch(f){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=f,this._mimeType=y,a.checkSupport(p),this._worker=w.pipe(new i(p)),w.lock()}catch(b){this._worker=new r("error"),this._worker.error(b)}}u.prototype={accumulate:function(w){return v(this,w)},on:function(w,f){var y=this;return w==="data"?this._worker.on(w,function(p){f.call(y,p.data,p.meta)}):this._worker.on(w,function(){a.delay(f,arguments,y)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},w)}},o.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,o,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var a=new ArrayBuffer(0);try{s.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(a),s.blob=i.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!e("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(e,o,s){for(var a=e("./utils"),i=e("./support"),r=e("./nodejsUtils"),c=e("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function g(){c.call(this,"utf-8 decode"),this.leftOver=null}function v(){c.call(this,"utf-8 encode")}s.utf8encode=function(u){return i.nodebuffer?r.newBufferFrom(u,"utf-8"):function(w){var f,y,p,b,S,A=w.length,C=0;for(b=0;b<A;b++)(64512&(y=w.charCodeAt(b)))==55296&&b+1<A&&(64512&(p=w.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(p-56320),b++),C+=y<128?1:y<2048?2:y<65536?3:4;for(f=i.uint8array?new Uint8Array(C):new Array(C),b=S=0;S<C;b++)(64512&(y=w.charCodeAt(b)))==55296&&b+1<A&&(64512&(p=w.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(p-56320),b++),y<128?f[S++]=y:(y<2048?f[S++]=192|y>>>6:(y<65536?f[S++]=224|y>>>12:(f[S++]=240|y>>>18,f[S++]=128|y>>>12&63),f[S++]=128|y>>>6&63),f[S++]=128|63&y);return f}(u)},s.utf8decode=function(u){return i.nodebuffer?a.transformTo("nodebuffer",u).toString("utf-8"):function(w){var f,y,p,b,S=w.length,A=new Array(2*S);for(f=y=0;f<S;)if((p=w[f++])<128)A[y++]=p;else if(4<(b=h[p]))A[y++]=65533,f+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&f<S;)p=p<<6|63&w[f++],b--;1<b?A[y++]=65533:p<65536?A[y++]=p:(p-=65536,A[y++]=55296|p>>10&1023,A[y++]=56320|1023&p)}return A.length!==y&&(A.subarray?A=A.subarray(0,y):A.length=y),a.applyFromCharCode(A)}(u=a.transformTo(i.uint8array?"uint8array":"array",u))},a.inherits(g,c),g.prototype.processChunk=function(u){var w=a.transformTo(i.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var f=w;(w=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),w.set(f,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var y=function(b,S){var A;for((S=S||b.length)>b.length&&(S=b.length),A=S-1;0<=A&&(192&b[A])==128;)A--;return A<0||A===0?S:A+h[b[A]]>S?A:S}(w),p=w;y!==w.length&&(i.uint8array?(p=w.subarray(0,y),this.leftOver=w.subarray(y,w.length)):(p=w.slice(0,y),this.leftOver=w.slice(y,w.length))),this.push({data:s.utf8decode(p),meta:u.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=g,a.inherits(v,c),v.prototype.processChunk=function(u){this.push({data:s.utf8encode(u.data),meta:u.meta})},s.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,o,s){var a=e("./support"),i=e("./base64"),r=e("./nodejsUtils"),c=e("./external");function h(f){return f}function m(f,y){for(var p=0;p<f.length;++p)y[p]=255&f.charCodeAt(p);return y}e("setimmediate"),s.newBlob=function(f,y){s.checkSupport("blob");try{return new Blob([f],{type:y})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(f),p.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(f,y,p){var b=[],S=0,A=f.length;if(A<=p)return String.fromCharCode.apply(null,f);for(;S<A;)y==="array"||y==="nodebuffer"?b.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+p,A)))):b.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+p,A)))),S+=p;return b.join("")},stringifyByChar:function(f){for(var y="",p=0;p<f.length;p++)y+=String.fromCharCode(f[p]);return y},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function v(f){var y=65536,p=s.getTypeOf(f),b=!0;if(p==="uint8array"?b=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(b=g.applyCanBeUsed.nodebuffer),b)for(;1<y;)try{return g.stringifyByChunk(f,p,y)}catch{y=Math.floor(y/2)}return g.stringifyByChar(f)}function u(f,y){for(var p=0;p<f.length;p++)y[p]=f[p];return y}s.applyFromCharCode=v;var w={};w.string={string:h,array:function(f){return m(f,new Array(f.length))},arraybuffer:function(f){return w.string.uint8array(f).buffer},uint8array:function(f){return m(f,new Uint8Array(f.length))},nodebuffer:function(f){return m(f,r.allocBuffer(f.length))}},w.array={string:v,array:h,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return r.newBufferFrom(f)}},w.arraybuffer={string:function(f){return v(new Uint8Array(f))},array:function(f){return u(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:h,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return r.newBufferFrom(new Uint8Array(f))}},w.uint8array={string:v,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:h,nodebuffer:function(f){return r.newBufferFrom(f)}},w.nodebuffer={string:v,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return w.nodebuffer.uint8array(f).buffer},uint8array:function(f){return u(f,new Uint8Array(f.length))},nodebuffer:h},s.transformTo=function(f,y){if(y=y||"",!f)return y;s.checkSupport(f);var p=s.getTypeOf(y);return w[p][f](y)},s.resolve=function(f){for(var y=f.split("/"),p=[],b=0;b<y.length;b++){var S=y[b];S==="."||S===""&&b!==0&&b!==y.length-1||(S===".."?p.pop():p.push(S))}return p.join("/")},s.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":a.nodebuffer&&r.isBuffer(f)?"nodebuffer":a.uint8array&&f instanceof Uint8Array?"uint8array":a.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(f){if(!a[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(f){var y,p,b="";for(p=0;p<(f||"").length;p++)b+="\\x"+((y=f.charCodeAt(p))<16?"0":"")+y.toString(16).toUpperCase();return b},s.delay=function(f,y,p){setImmediate(function(){f.apply(p||null,y||[])})},s.inherits=function(f,y){function p(){}p.prototype=y.prototype,f.prototype=new p},s.extend=function(){var f,y,p={};for(f=0;f<arguments.length;f++)for(y in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],y)&&p[y]===void 0&&(p[y]=arguments[f][y]);return p},s.prepareContent=function(f,y,p,b,S){return c.Promise.resolve(y).then(function(A){return a.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new c.Promise(function(C,U){var E=new FileReader;E.onload=function(M){C(M.target.result)},E.onerror=function(M){U(M.target.error)},E.readAsArrayBuffer(A)}):A}).then(function(A){var C=s.getTypeOf(A);return C?(C==="arraybuffer"?A=s.transformTo("uint8array",A):C==="string"&&(S?A=i.decode(A):p&&b!==!0&&(A=function(U){return m(U,a.uint8array?new Uint8Array(U.length):new Array(U.length))}(A))),A):c.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,o,s){var a=e("./reader/readerFor"),i=e("./utils"),r=e("./signature"),c=e("./zipEntry"),h=e("./support");function m(g){this.files=[],this.loadOptions=g}m.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(v)+", expected "+i.pretty(g)+")")}},isSignature:function(g,v){var u=this.reader.index;this.reader.setIndex(g);var w=this.reader.readString(4)===v;return this.reader.setIndex(u),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),v=h.uint8array?"uint8array":"array",u=i.transformTo(v,g);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,v,u,w=this.zip64EndOfCentralSize-44;0<w;)g=this.reader.readInt(2),v=this.reader.readInt(4),u=this.reader.readData(v),this.zip64ExtensibleData[g]={id:g,length:v,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,v;for(g=0;g<this.files.length;g++)v=this.files[g],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(g=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var v=g;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var w=v-u;if(0<w)this.isSignature(v,r.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(g){this.reader=a(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,o,s){var a=e("./reader/readerFor"),i=e("./utils"),r=e("./compressedObject"),c=e("./crc32"),h=e("./utf8"),m=e("./compressions"),g=e("./support");function v(u,w){this.options=u,this.loadOptions=w}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var w,f;if(u.skip(22),this.fileNameLength=u.readInt(2),f=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(y){for(var p in m)if(Object.prototype.hasOwnProperty.call(m,p)&&m[p].magic===y)return m[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,w,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var w=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(w),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=a(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var w,f,y,p=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<p;)w=u.readInt(2),f=u.readInt(2),y=u.readData(f),this.extraFields[w]={id:w,length:f,value:y};u.setIndex(p)},handleUTF8:function(){var u=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var f=i.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var p=i.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var w=a(u.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:h.utf8decode(w.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var w=a(u.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:h.utf8decode(w.readData(u.length-5))}return null}},o.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,o,s){function a(w,f,y){this.name=w,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=f,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var i=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),c=e("./utf8"),h=e("./compressedObject"),m=e("./stream/GenericWorker");a.prototype={internalStream:function(w){var f=null,y="string";try{if(!w)throw new Error("No output type specified.");var p=(y=w.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),f=this._decompressWorker();var b=!this._dataBinary;b&&!p&&(f=f.pipe(new c.Utf8EncodeWorker)),!b&&p&&(f=f.pipe(new c.Utf8DecodeWorker))}catch(S){(f=new m("error")).error(S)}return new i(f,y,"")},async:function(w,f){return this.internalStream(w).accumulate(f)},nodeStream:function(w,f){return this.internalStream(w||"nodebuffer").toNodejsStream(f)},_compressWorker:function(w,f){if(this._data instanceof h&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new c.Utf8EncodeWorker)),h.createWorkerFrom(y,w,f)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new r(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<g.length;u++)a.prototype[g[u]]=v;o.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,o,s){(function(a){var i,r,c=a.MutationObserver||a.WebKitMutationObserver;if(c){var h=0,m=new c(w),g=a.document.createTextNode("");m.observe(g,{characterData:!0}),i=function(){g.data=h=++h%2}}else if(a.setImmediate||a.MessageChannel===void 0)i="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var f=a.document.createElement("script");f.onreadystatechange=function(){w(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},a.document.documentElement.appendChild(f)}:function(){setTimeout(w,0)};else{var v=new a.MessageChannel;v.port1.onmessage=w,i=function(){v.port2.postMessage(0)}}var u=[];function w(){var f,y;r=!0;for(var p=u.length;p;){for(y=u,u=[],f=-1;++f<p;)y[f]();p=u.length}r=!1}o.exports=function(f){u.push(f)!==1||r||i()}}).call(this,typeof Pe<"u"?Pe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,o,s){var a=e("immediate");function i(){}var r={},c=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,p!==i&&f(this,p)}function v(p,b,S){this.promise=p,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function u(p,b,S){a(function(){var A;try{A=b(S)}catch(C){return r.reject(p,C)}A===p?r.reject(p,new TypeError("Cannot resolve promise with itself")):r.resolve(p,A)})}function w(p){var b=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof b=="function")return function(){b.apply(p,arguments)}}function f(p,b){var S=!1;function A(E){S||(S=!0,r.reject(p,E))}function C(E){S||(S=!0,r.resolve(p,E))}var U=y(function(){b(C,A)});U.status==="error"&&A(U.value)}function y(p,b){var S={};try{S.value=p(b),S.status="success"}catch(A){S.status="error",S.value=A}return S}(o.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var b=this.constructor;return this.then(function(S){return b.resolve(p()).then(function(){return S})},function(S){return b.resolve(p()).then(function(){throw S})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,b){if(typeof p!="function"&&this.state===h||typeof b!="function"&&this.state===c)return this;var S=new this.constructor(i);return this.state!==m?u(S,this.state===h?p:b,this.outcome):this.queue.push(new v(S,p,b)),S},v.prototype.callFulfilled=function(p){r.resolve(this.promise,p)},v.prototype.otherCallFulfilled=function(p){u(this.promise,this.onFulfilled,p)},v.prototype.callRejected=function(p){r.reject(this.promise,p)},v.prototype.otherCallRejected=function(p){u(this.promise,this.onRejected,p)},r.resolve=function(p,b){var S=y(w,b);if(S.status==="error")return r.reject(p,S.value);var A=S.value;if(A)f(p,A);else{p.state=h,p.outcome=b;for(var C=-1,U=p.queue.length;++C<U;)p.queue[C].callFulfilled(b)}return p},r.reject=function(p,b){p.state=c,p.outcome=b;for(var S=-1,A=p.queue.length;++S<A;)p.queue[S].callRejected(b);return p},g.resolve=function(p){return p instanceof this?p:r.resolve(new this(i),p)},g.reject=function(p){var b=new this(i);return r.reject(b,p)},g.all=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,A=!1;if(!S)return this.resolve([]);for(var C=new Array(S),U=0,E=-1,M=new this(i);++E<S;)z(p[E],E);return M;function z(T,J){b.resolve(T).then(function(x){C[J]=x,++U!==S||A||(A=!0,r.resolve(M,C))},function(x){A||(A=!0,r.reject(M,x))})}},g.race=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=p.length,A=!1;if(!S)return this.resolve([]);for(var C=-1,U=new this(i);++C<S;)E=p[C],b.resolve(E).then(function(M){A||(A=!0,r.resolve(U,M))},function(M){A||(A=!0,r.reject(U,M))});var E;return U}},{immediate:36}],38:[function(e,o,s){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),o.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,o,s){var a=e("./zlib/deflate"),i=e("./utils/common"),r=e("./utils/strings"),c=e("./zlib/messages"),h=e("./zlib/zstream"),m=Object.prototype.toString,g=0,v=-1,u=0,w=8;function f(p){if(!(this instanceof f))return new f(p);this.options=i.assign({level:v,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},p||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=a.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(S!==g)throw new Error(c[S]);if(b.header&&a.deflateSetHeader(this.strm,b.header),b.dictionary){var A;if(A=typeof b.dictionary=="string"?r.string2buf(b.dictionary):m.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(S=a.deflateSetDictionary(this.strm,A))!==g)throw new Error(c[S]);this._dict_set=!0}}function y(p,b){var S=new f(b);if(S.push(p,!0),S.err)throw S.msg||c[S.err];return S.result}f.prototype.push=function(p,b){var S,A,C=this.strm,U=this.options.chunkSize;if(this.ended)return!1;A=b===~~b?b:b===!0?4:0,typeof p=="string"?C.input=r.string2buf(p):m.call(p)==="[object ArrayBuffer]"?C.input=new Uint8Array(p):C.input=p,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new i.Buf8(U),C.next_out=0,C.avail_out=U),(S=a.deflate(C,A))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(i.shrinkBuf(C.output,C.next_out))):this.onData(i.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&S!==1);return A===4?(S=a.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):A!==2||(this.onEnd(g),!(C.avail_out=0))},f.prototype.onData=function(p){this.chunks.push(p)},f.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},s.Deflate=f,s.deflate=y,s.deflateRaw=function(p,b){return(b=b||{}).raw=!0,y(p,b)},s.gzip=function(p,b){return(b=b||{}).gzip=!0,y(p,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,o,s){var a=e("./zlib/inflate"),i=e("./utils/common"),r=e("./utils/strings"),c=e("./zlib/constants"),h=e("./zlib/messages"),m=e("./zlib/zstream"),g=e("./zlib/gzheader"),v=Object.prototype.toString;function u(f){if(!(this instanceof u))return new u(f);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},f||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||f&&f.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var p=a.inflateInit2(this.strm,y.windowBits);if(p!==c.Z_OK)throw new Error(h[p]);this.header=new g,a.inflateGetHeader(this.strm,this.header)}function w(f,y){var p=new u(y);if(p.push(f,!0),p.err)throw p.msg||h[p.err];return p.result}u.prototype.push=function(f,y){var p,b,S,A,C,U,E=this.strm,M=this.options.chunkSize,z=this.options.dictionary,T=!1;if(this.ended)return!1;b=y===~~y?y:y===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof f=="string"?E.input=r.binstring2buf(f):v.call(f)==="[object ArrayBuffer]"?E.input=new Uint8Array(f):E.input=f,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new i.Buf8(M),E.next_out=0,E.avail_out=M),(p=a.inflate(E,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&z&&(U=typeof z=="string"?r.string2buf(z):v.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,p=a.inflateSetDictionary(this.strm,U)),p===c.Z_BUF_ERROR&&T===!0&&(p=c.Z_OK,T=!1),p!==c.Z_STREAM_END&&p!==c.Z_OK)return this.onEnd(p),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&p!==c.Z_STREAM_END&&(E.avail_in!==0||b!==c.Z_FINISH&&b!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=r.utf8border(E.output,E.next_out),A=E.next_out-S,C=r.buf2string(E.output,S),E.next_out=A,E.avail_out=M-A,A&&i.arraySet(E.output,E.output,S,A,0),this.onData(C)):this.onData(i.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(T=!0)}while((0<E.avail_in||E.avail_out===0)&&p!==c.Z_STREAM_END);return p===c.Z_STREAM_END&&(b=c.Z_FINISH),b===c.Z_FINISH?(p=a.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===c.Z_OK):b!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(E.avail_out=0))},u.prototype.onData=function(f){this.chunks.push(f)},u.prototype.onEnd=function(f){f===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},s.Inflate=u,s.inflate=w,s.inflateRaw=function(f,y){return(y=y||{}).raw=!0,w(f,y)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,o,s){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var g in m)m.hasOwnProperty(g)&&(c[g]=m[g])}}return c},s.shrinkBuf=function(c,h){return c.length===h?c:c.subarray?c.subarray(0,h):(c.length=h,c)};var i={arraySet:function(c,h,m,g,v){if(h.subarray&&c.subarray)c.set(h.subarray(m,m+g),v);else for(var u=0;u<g;u++)c[v+u]=h[m+u]},flattenChunks:function(c){var h,m,g,v,u,w;for(h=g=0,m=c.length;h<m;h++)g+=c[h].length;for(w=new Uint8Array(g),h=v=0,m=c.length;h<m;h++)u=c[h],w.set(u,v),v+=u.length;return w}},r={arraySet:function(c,h,m,g,v){for(var u=0;u<g;u++)c[v+u]=h[m+u]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,i)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,r))},s.setTyped(a)},{}],42:[function(e,o,s){var a=e("./common"),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var c=new a.Buf8(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(g,v){if(v<65537&&(g.subarray&&r||!g.subarray&&i))return String.fromCharCode.apply(null,a.shrinkBuf(g,v));for(var u="",w=0;w<v;w++)u+=String.fromCharCode(g[w]);return u}c[254]=c[254]=1,s.string2buf=function(g){var v,u,w,f,y,p=g.length,b=0;for(f=0;f<p;f++)(64512&(u=g.charCodeAt(f)))==55296&&f+1<p&&(64512&(w=g.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),f++),b+=u<128?1:u<2048?2:u<65536?3:4;for(v=new a.Buf8(b),f=y=0;y<b;f++)(64512&(u=g.charCodeAt(f)))==55296&&f+1<p&&(64512&(w=g.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),f++),u<128?v[y++]=u:(u<2048?v[y++]=192|u>>>6:(u<65536?v[y++]=224|u>>>12:(v[y++]=240|u>>>18,v[y++]=128|u>>>12&63),v[y++]=128|u>>>6&63),v[y++]=128|63&u);return v},s.buf2binstring=function(g){return m(g,g.length)},s.binstring2buf=function(g){for(var v=new a.Buf8(g.length),u=0,w=v.length;u<w;u++)v[u]=g.charCodeAt(u);return v},s.buf2string=function(g,v){var u,w,f,y,p=v||g.length,b=new Array(2*p);for(u=w=0;u<p;)if((f=g[u++])<128)b[w++]=f;else if(4<(y=c[f]))b[w++]=65533,u+=y-1;else{for(f&=y===2?31:y===3?15:7;1<y&&u<p;)f=f<<6|63&g[u++],y--;1<y?b[w++]=65533:f<65536?b[w++]=f:(f-=65536,b[w++]=55296|f>>10&1023,b[w++]=56320|1023&f)}return m(b,w)},s.utf8border=function(g,v){var u;for((v=v||g.length)>g.length&&(v=g.length),u=v-1;0<=u&&(192&g[u])==128;)u--;return u<0||u===0?v:u+c[g[u]]>v?u:v}},{"./common":41}],43:[function(e,o,s){o.exports=function(a,i,r,c){for(var h=65535&a|0,m=a>>>16&65535|0,g=0;r!==0;){for(r-=g=2e3<r?2e3:r;m=m+(h=h+i[c++]|0)|0,--g;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(e,o,s){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,o,s){var a=function(){for(var i,r=[],c=0;c<256;c++){i=c;for(var h=0;h<8;h++)i=1&i?3988292384^i>>>1:i>>>1;r[c]=i}return r}();o.exports=function(i,r,c,h){var m=a,g=h+c;i^=-1;for(var v=h;v<g;v++)i=i>>>8^m[255&(i^r[v])];return-1^i}},{}],46:[function(e,o,s){var a,i=e("../utils/common"),r=e("./trees"),c=e("./adler32"),h=e("./crc32"),m=e("./messages"),g=0,v=4,u=0,w=-2,f=-1,y=4,p=2,b=8,S=9,A=286,C=30,U=19,E=2*A+1,M=15,z=3,T=258,J=T+z+1,x=42,L=113,d=1,j=2,ot=3,Z=4;function ct(l,W){return l.msg=m[W],W}function Y(l){return(l<<1)-(4<l?9:0)}function lt(l){for(var W=l.length;0<=--W;)l[W]=0}function F(l){var W=l.state,D=W.pending;D>l.avail_out&&(D=l.avail_out),D!==0&&(i.arraySet(l.output,W.pending_buf,W.pending_out,D,l.next_out),l.next_out+=D,W.pending_out+=D,l.total_out+=D,l.avail_out-=D,W.pending-=D,W.pending===0&&(W.pending_out=0))}function P(l,W){r._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,W),l.block_start=l.strstart,F(l.strm)}function N(l,W){l.pending_buf[l.pending++]=W}function tt(l,W){l.pending_buf[l.pending++]=W>>>8&255,l.pending_buf[l.pending++]=255&W}function V(l,W){var D,k,_=l.max_chain_length,I=l.strstart,q=l.prev_length,G=l.nice_match,O=l.strstart>l.w_size-J?l.strstart-(l.w_size-J):0,$=l.window,B=l.w_mask,R=l.prev,Q=l.strstart+T,H=$[I+q-1],K=$[I+q];l.prev_length>=l.good_match&&(_>>=2),G>l.lookahead&&(G=l.lookahead);do if($[(D=W)+q]===K&&$[D+q-1]===H&&$[D]===$[I]&&$[++D]===$[I+1]){I+=2,D++;do;while($[++I]===$[++D]&&$[++I]===$[++D]&&$[++I]===$[++D]&&$[++I]===$[++D]&&$[++I]===$[++D]&&$[++I]===$[++D]&&$[++I]===$[++D]&&$[++I]===$[++D]&&I<Q);if(k=T-(Q-I),I=Q-T,q<k){if(l.match_start=W,G<=(q=k))break;H=$[I+q-1],K=$[I+q]}}while((W=R[W&B])>O&&--_!=0);return q<=l.lookahead?q:l.lookahead}function dt(l){var W,D,k,_,I,q,G,O,$,B,R=l.w_size;do{if(_=l.window_size-l.lookahead-l.strstart,l.strstart>=R+(R-J)){for(i.arraySet(l.window,l.window,R,R,0),l.match_start-=R,l.strstart-=R,l.block_start-=R,W=D=l.hash_size;k=l.head[--W],l.head[W]=R<=k?k-R:0,--D;);for(W=D=R;k=l.prev[--W],l.prev[W]=R<=k?k-R:0,--D;);_+=R}if(l.strm.avail_in===0)break;if(q=l.strm,G=l.window,O=l.strstart+l.lookahead,$=_,B=void 0,B=q.avail_in,$<B&&(B=$),D=B===0?0:(q.avail_in-=B,i.arraySet(G,q.input,q.next_in,B,O),q.state.wrap===1?q.adler=c(q.adler,G,B,O):q.state.wrap===2&&(q.adler=h(q.adler,G,B,O)),q.next_in+=B,q.total_in+=B,B),l.lookahead+=D,l.lookahead+l.insert>=z)for(I=l.strstart-l.insert,l.ins_h=l.window[I],l.ins_h=(l.ins_h<<l.hash_shift^l.window[I+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[I+z-1])&l.hash_mask,l.prev[I&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=I,I++,l.insert--,!(l.lookahead+l.insert<z)););}while(l.lookahead<J&&l.strm.avail_in!==0)}function at(l,W){for(var D,k;;){if(l.lookahead<J){if(dt(l),l.lookahead<J&&W===g)return d;if(l.lookahead===0)break}if(D=0,l.lookahead>=z&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),D!==0&&l.strstart-D<=l.w_size-J&&(l.match_length=V(l,D)),l.match_length>=z)if(k=r._tr_tally(l,l.strstart-l.match_start,l.match_length-z),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=z){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else k=r._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(k&&(P(l,!1),l.strm.avail_out===0))return d}return l.insert=l.strstart<z-1?l.strstart:z-1,W===v?(P(l,!0),l.strm.avail_out===0?ot:Z):l.last_lit&&(P(l,!1),l.strm.avail_out===0)?d:j}function ut(l,W){for(var D,k,_;;){if(l.lookahead<J){if(dt(l),l.lookahead<J&&W===g)return d;if(l.lookahead===0)break}if(D=0,l.lookahead>=z&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=z-1,D!==0&&l.prev_length<l.max_lazy_match&&l.strstart-D<=l.w_size-J&&(l.match_length=V(l,D),l.match_length<=5&&(l.strategy===1||l.match_length===z&&4096<l.strstart-l.match_start)&&(l.match_length=z-1)),l.prev_length>=z&&l.match_length<=l.prev_length){for(_=l.strstart+l.lookahead-z,k=r._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-z),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=_&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,D=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=z-1,l.strstart++,k&&(P(l,!1),l.strm.avail_out===0))return d}else if(l.match_available){if((k=r._tr_tally(l,0,l.window[l.strstart-1]))&&P(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return d}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(k=r._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<z-1?l.strstart:z-1,W===v?(P(l,!0),l.strm.avail_out===0?ot:Z):l.last_lit&&(P(l,!1),l.strm.avail_out===0)?d:j}function ht(l,W,D,k,_){this.good_length=l,this.max_lazy=W,this.nice_length=D,this.max_chain=k,this.func=_}function wt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*E),this.dyn_dtree=new i.Buf16(2*(2*C+1)),this.bl_tree=new i.Buf16(2*(2*U+1)),lt(this.dyn_ltree),lt(this.dyn_dtree),lt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(M+1),this.heap=new i.Buf16(2*A+1),lt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*A+1),lt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function bt(l){var W;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=p,(W=l.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?x:L,l.adler=W.wrap===2?0:1,W.last_flush=g,r._tr_init(W),u):ct(l,w)}function Pt(l){var W=bt(l);return W===u&&function(D){D.window_size=2*D.w_size,lt(D.head),D.max_lazy_match=a[D.level].max_lazy,D.good_match=a[D.level].good_length,D.nice_match=a[D.level].nice_length,D.max_chain_length=a[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=z-1,D.match_available=0,D.ins_h=0}(l.state),W}function Ft(l,W,D,k,_,I){if(!l)return w;var q=1;if(W===f&&(W=6),k<0?(q=0,k=-k):15<k&&(q=2,k-=16),_<1||S<_||D!==b||k<8||15<k||W<0||9<W||I<0||y<I)return ct(l,w);k===8&&(k=9);var G=new wt;return(l.state=G).strm=l,G.wrap=q,G.gzhead=null,G.w_bits=k,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=_+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+z-1)/z),G.window=new i.Buf8(2*G.w_size),G.head=new i.Buf16(G.hash_size),G.prev=new i.Buf16(G.w_size),G.lit_bufsize=1<<_+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new i.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=W,G.strategy=I,G.method=D,Pt(l)}a=[new ht(0,0,0,0,function(l,W){var D=65535;for(D>l.pending_buf_size-5&&(D=l.pending_buf_size-5);;){if(l.lookahead<=1){if(dt(l),l.lookahead===0&&W===g)return d;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var k=l.block_start+D;if((l.strstart===0||l.strstart>=k)&&(l.lookahead=l.strstart-k,l.strstart=k,P(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-J&&(P(l,!1),l.strm.avail_out===0))return d}return l.insert=0,W===v?(P(l,!0),l.strm.avail_out===0?ot:Z):(l.strstart>l.block_start&&(P(l,!1),l.strm.avail_out),d)}),new ht(4,4,8,4,at),new ht(4,5,16,8,at),new ht(4,6,32,32,at),new ht(4,4,16,16,ut),new ht(8,16,32,32,ut),new ht(8,16,128,128,ut),new ht(8,32,128,256,ut),new ht(32,128,258,1024,ut),new ht(32,258,258,4096,ut)],s.deflateInit=function(l,W){return Ft(l,W,b,15,8,0)},s.deflateInit2=Ft,s.deflateReset=Pt,s.deflateResetKeep=bt,s.deflateSetHeader=function(l,W){return l&&l.state?l.state.wrap!==2?w:(l.state.gzhead=W,u):w},s.deflate=function(l,W){var D,k,_,I;if(!l||!l.state||5<W||W<0)return l?ct(l,w):w;if(k=l.state,!l.output||!l.input&&l.avail_in!==0||k.status===666&&W!==v)return ct(l,l.avail_out===0?-5:w);if(k.strm=l,D=k.last_flush,k.last_flush=W,k.status===x)if(k.wrap===2)l.adler=0,N(k,31),N(k,139),N(k,8),k.gzhead?(N(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),N(k,255&k.gzhead.time),N(k,k.gzhead.time>>8&255),N(k,k.gzhead.time>>16&255),N(k,k.gzhead.time>>24&255),N(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),N(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(N(k,255&k.gzhead.extra.length),N(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(l.adler=h(l.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(N(k,0),N(k,0),N(k,0),N(k,0),N(k,0),N(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),N(k,3),k.status=L);else{var q=b+(k.w_bits-8<<4)<<8;q|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(q|=32),q+=31-q%31,k.status=L,tt(k,q),k.strstart!==0&&(tt(k,l.adler>>>16),tt(k,65535&l.adler)),l.adler=1}if(k.status===69)if(k.gzhead.extra){for(_=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>_&&(l.adler=h(l.adler,k.pending_buf,k.pending-_,_)),F(l),_=k.pending,k.pending!==k.pending_buf_size));)N(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>_&&(l.adler=h(l.adler,k.pending_buf,k.pending-_,_)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){_=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>_&&(l.adler=h(l.adler,k.pending_buf,k.pending-_,_)),F(l),_=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,N(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>_&&(l.adler=h(l.adler,k.pending_buf,k.pending-_,_)),I===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){_=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>_&&(l.adler=h(l.adler,k.pending_buf,k.pending-_,_)),F(l),_=k.pending,k.pending===k.pending_buf_size)){I=1;break}I=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,N(k,I)}while(I!==0);k.gzhead.hcrc&&k.pending>_&&(l.adler=h(l.adler,k.pending_buf,k.pending-_,_)),I===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&F(l),k.pending+2<=k.pending_buf_size&&(N(k,255&l.adler),N(k,l.adler>>8&255),l.adler=0,k.status=L)):k.status=L),k.pending!==0){if(F(l),l.avail_out===0)return k.last_flush=-1,u}else if(l.avail_in===0&&Y(W)<=Y(D)&&W!==v)return ct(l,-5);if(k.status===666&&l.avail_in!==0)return ct(l,-5);if(l.avail_in!==0||k.lookahead!==0||W!==g&&k.status!==666){var G=k.strategy===2?function(O,$){for(var B;;){if(O.lookahead===0&&(dt(O),O.lookahead===0)){if($===g)return d;break}if(O.match_length=0,B=r._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,B&&(P(O,!1),O.strm.avail_out===0))return d}return O.insert=0,$===v?(P(O,!0),O.strm.avail_out===0?ot:Z):O.last_lit&&(P(O,!1),O.strm.avail_out===0)?d:j}(k,W):k.strategy===3?function(O,$){for(var B,R,Q,H,K=O.window;;){if(O.lookahead<=T){if(dt(O),O.lookahead<=T&&$===g)return d;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=z&&0<O.strstart&&(R=K[Q=O.strstart-1])===K[++Q]&&R===K[++Q]&&R===K[++Q]){H=O.strstart+T;do;while(R===K[++Q]&&R===K[++Q]&&R===K[++Q]&&R===K[++Q]&&R===K[++Q]&&R===K[++Q]&&R===K[++Q]&&R===K[++Q]&&Q<H);O.match_length=T-(H-Q),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=z?(B=r._tr_tally(O,1,O.match_length-z),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(B=r._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),B&&(P(O,!1),O.strm.avail_out===0))return d}return O.insert=0,$===v?(P(O,!0),O.strm.avail_out===0?ot:Z):O.last_lit&&(P(O,!1),O.strm.avail_out===0)?d:j}(k,W):a[k.level].func(k,W);if(G!==ot&&G!==Z||(k.status=666),G===d||G===ot)return l.avail_out===0&&(k.last_flush=-1),u;if(G===j&&(W===1?r._tr_align(k):W!==5&&(r._tr_stored_block(k,0,0,!1),W===3&&(lt(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),F(l),l.avail_out===0))return k.last_flush=-1,u}return W!==v?u:k.wrap<=0?1:(k.wrap===2?(N(k,255&l.adler),N(k,l.adler>>8&255),N(k,l.adler>>16&255),N(k,l.adler>>24&255),N(k,255&l.total_in),N(k,l.total_in>>8&255),N(k,l.total_in>>16&255),N(k,l.total_in>>24&255)):(tt(k,l.adler>>>16),tt(k,65535&l.adler)),F(l),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?u:1)},s.deflateEnd=function(l){var W;return l&&l.state?(W=l.state.status)!==x&&W!==69&&W!==73&&W!==91&&W!==103&&W!==L&&W!==666?ct(l,w):(l.state=null,W===L?ct(l,-3):u):w},s.deflateSetDictionary=function(l,W){var D,k,_,I,q,G,O,$,B=W.length;if(!l||!l.state||(I=(D=l.state).wrap)===2||I===1&&D.status!==x||D.lookahead)return w;for(I===1&&(l.adler=c(l.adler,W,B,0)),D.wrap=0,B>=D.w_size&&(I===0&&(lt(D.head),D.strstart=0,D.block_start=0,D.insert=0),$=new i.Buf8(D.w_size),i.arraySet($,W,B-D.w_size,D.w_size,0),W=$,B=D.w_size),q=l.avail_in,G=l.next_in,O=l.input,l.avail_in=B,l.next_in=0,l.input=W,dt(D);D.lookahead>=z;){for(k=D.strstart,_=D.lookahead-(z-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[k+z-1])&D.hash_mask,D.prev[k&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=k,k++,--_;);D.strstart=k,D.lookahead=z-1,dt(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=z-1,D.match_available=0,l.next_in=G,l.input=O,l.avail_in=q,D.wrap=I,u},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,o,s){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,o,s){o.exports=function(a,i){var r,c,h,m,g,v,u,w,f,y,p,b,S,A,C,U,E,M,z,T,J,x,L,d,j;r=a.state,c=a.next_in,d=a.input,h=c+(a.avail_in-5),m=a.next_out,j=a.output,g=m-(i-a.avail_out),v=m+(a.avail_out-257),u=r.dmax,w=r.wsize,f=r.whave,y=r.wnext,p=r.window,b=r.hold,S=r.bits,A=r.lencode,C=r.distcode,U=(1<<r.lenbits)-1,E=(1<<r.distbits)-1;t:do{S<15&&(b+=d[c++]<<S,S+=8,b+=d[c++]<<S,S+=8),M=A[b&U];e:for(;;){if(b>>>=z=M>>>24,S-=z,(z=M>>>16&255)===0)j[m++]=65535&M;else{if(!(16&z)){if((64&z)==0){M=A[(65535&M)+(b&(1<<z)-1)];continue e}if(32&z){r.mode=12;break t}a.msg="invalid literal/length code",r.mode=30;break t}T=65535&M,(z&=15)&&(S<z&&(b+=d[c++]<<S,S+=8),T+=b&(1<<z)-1,b>>>=z,S-=z),S<15&&(b+=d[c++]<<S,S+=8,b+=d[c++]<<S,S+=8),M=C[b&E];n:for(;;){if(b>>>=z=M>>>24,S-=z,!(16&(z=M>>>16&255))){if((64&z)==0){M=C[(65535&M)+(b&(1<<z)-1)];continue n}a.msg="invalid distance code",r.mode=30;break t}if(J=65535&M,S<(z&=15)&&(b+=d[c++]<<S,(S+=8)<z&&(b+=d[c++]<<S,S+=8)),u<(J+=b&(1<<z)-1)){a.msg="invalid distance too far back",r.mode=30;break t}if(b>>>=z,S-=z,(z=m-g)<J){if(f<(z=J-z)&&r.sane){a.msg="invalid distance too far back",r.mode=30;break t}if(L=p,(x=0)===y){if(x+=w-z,z<T){for(T-=z;j[m++]=p[x++],--z;);x=m-J,L=j}}else if(y<z){if(x+=w+y-z,(z-=y)<T){for(T-=z;j[m++]=p[x++],--z;);if(x=0,y<T){for(T-=z=y;j[m++]=p[x++],--z;);x=m-J,L=j}}}else if(x+=y-z,z<T){for(T-=z;j[m++]=p[x++],--z;);x=m-J,L=j}for(;2<T;)j[m++]=L[x++],j[m++]=L[x++],j[m++]=L[x++],T-=3;T&&(j[m++]=L[x++],1<T&&(j[m++]=L[x++]))}else{for(x=m-J;j[m++]=j[x++],j[m++]=j[x++],j[m++]=j[x++],2<(T-=3););T&&(j[m++]=j[x++],1<T&&(j[m++]=j[x++]))}break}}break}}while(c<h&&m<v);c-=T=S>>3,b&=(1<<(S-=T<<3))-1,a.next_in=c,a.next_out=m,a.avail_in=c<h?h-c+5:5-(c-h),a.avail_out=m<v?v-m+257:257-(m-v),r.hold=b,r.bits=S}},{}],49:[function(e,o,s){var a=e("../utils/common"),i=e("./adler32"),r=e("./crc32"),c=e("./inffast"),h=e("./inftrees"),m=1,g=2,v=0,u=-2,w=1,f=852,y=592;function p(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(x){var L;return x&&x.state?(L=x.state,x.total_in=x.total_out=L.total=0,x.msg="",L.wrap&&(x.adler=1&L.wrap),L.mode=w,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new a.Buf32(f),L.distcode=L.distdyn=new a.Buf32(y),L.sane=1,L.back=-1,v):u}function A(x){var L;return x&&x.state?((L=x.state).wsize=0,L.whave=0,L.wnext=0,S(x)):u}function C(x,L){var d,j;return x&&x.state?(j=x.state,L<0?(d=0,L=-L):(d=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?u:(j.window!==null&&j.wbits!==L&&(j.window=null),j.wrap=d,j.wbits=L,A(x))):u}function U(x,L){var d,j;return x?(j=new b,(x.state=j).window=null,(d=C(x,L))!==v&&(x.state=null),d):u}var E,M,z=!0;function T(x){if(z){var L;for(E=new a.Buf32(512),M=new a.Buf32(32),L=0;L<144;)x.lens[L++]=8;for(;L<256;)x.lens[L++]=9;for(;L<280;)x.lens[L++]=7;for(;L<288;)x.lens[L++]=8;for(h(m,x.lens,0,288,E,0,x.work,{bits:9}),L=0;L<32;)x.lens[L++]=5;h(g,x.lens,0,32,M,0,x.work,{bits:5}),z=!1}x.lencode=E,x.lenbits=9,x.distcode=M,x.distbits=5}function J(x,L,d,j){var ot,Z=x.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new a.Buf8(Z.wsize)),j>=Z.wsize?(a.arraySet(Z.window,L,d-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(j<(ot=Z.wsize-Z.wnext)&&(ot=j),a.arraySet(Z.window,L,d-j,ot,Z.wnext),(j-=ot)?(a.arraySet(Z.window,L,d-j,j,0),Z.wnext=j,Z.whave=Z.wsize):(Z.wnext+=ot,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=ot))),0}s.inflateReset=A,s.inflateReset2=C,s.inflateResetKeep=S,s.inflateInit=function(x){return U(x,15)},s.inflateInit2=U,s.inflate=function(x,L){var d,j,ot,Z,ct,Y,lt,F,P,N,tt,V,dt,at,ut,ht,wt,bt,Pt,Ft,l,W,D,k,_=0,I=new a.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return u;(d=x.state).mode===12&&(d.mode=13),ct=x.next_out,ot=x.output,lt=x.avail_out,Z=x.next_in,j=x.input,Y=x.avail_in,F=d.hold,P=d.bits,N=Y,tt=lt,W=v;t:for(;;)switch(d.mode){case w:if(d.wrap===0){d.mode=13;break}for(;P<16;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(2&d.wrap&&F===35615){I[d.check=0]=255&F,I[1]=F>>>8&255,d.check=r(d.check,I,2,0),P=F=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&F)<<8)+(F>>8))%31){x.msg="incorrect header check",d.mode=30;break}if((15&F)!=8){x.msg="unknown compression method",d.mode=30;break}if(P-=4,l=8+(15&(F>>>=4)),d.wbits===0)d.wbits=l;else if(l>d.wbits){x.msg="invalid window size",d.mode=30;break}d.dmax=1<<l,x.adler=d.check=1,d.mode=512&F?10:12,P=F=0;break;case 2:for(;P<16;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(d.flags=F,(255&d.flags)!=8){x.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){x.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=F>>8&1),512&d.flags&&(I[0]=255&F,I[1]=F>>>8&255,d.check=r(d.check,I,2,0)),P=F=0,d.mode=3;case 3:for(;P<32;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}d.head&&(d.head.time=F),512&d.flags&&(I[0]=255&F,I[1]=F>>>8&255,I[2]=F>>>16&255,I[3]=F>>>24&255,d.check=r(d.check,I,4,0)),P=F=0,d.mode=4;case 4:for(;P<16;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}d.head&&(d.head.xflags=255&F,d.head.os=F>>8),512&d.flags&&(I[0]=255&F,I[1]=F>>>8&255,d.check=r(d.check,I,2,0)),P=F=0,d.mode=5;case 5:if(1024&d.flags){for(;P<16;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}d.length=F,d.head&&(d.head.extra_len=F),512&d.flags&&(I[0]=255&F,I[1]=F>>>8&255,d.check=r(d.check,I,2,0)),P=F=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(Y<(V=d.length)&&(V=Y),V&&(d.head&&(l=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),a.arraySet(d.head.extra,j,Z,V,l)),512&d.flags&&(d.check=r(d.check,j,V,Z)),Y-=V,Z+=V,d.length-=V),d.length))break t;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(Y===0)break t;for(V=0;l=j[Z+V++],d.head&&l&&d.length<65536&&(d.head.name+=String.fromCharCode(l)),l&&V<Y;);if(512&d.flags&&(d.check=r(d.check,j,V,Z)),Y-=V,Z+=V,l)break t}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(Y===0)break t;for(V=0;l=j[Z+V++],d.head&&l&&d.length<65536&&(d.head.comment+=String.fromCharCode(l)),l&&V<Y;);if(512&d.flags&&(d.check=r(d.check,j,V,Z)),Y-=V,Z+=V,l)break t}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;P<16;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(F!==(65535&d.check)){x.msg="header crc mismatch",d.mode=30;break}P=F=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),x.adler=d.check=0,d.mode=12;break;case 10:for(;P<32;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}x.adler=d.check=p(F),P=F=0,d.mode=11;case 11:if(d.havedict===0)return x.next_out=ct,x.avail_out=lt,x.next_in=Z,x.avail_in=Y,d.hold=F,d.bits=P,2;x.adler=d.check=1,d.mode=12;case 12:if(L===5||L===6)break t;case 13:if(d.last){F>>>=7&P,P-=7&P,d.mode=27;break}for(;P<3;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}switch(d.last=1&F,P-=1,3&(F>>>=1)){case 0:d.mode=14;break;case 1:if(T(d),d.mode=20,L!==6)break;F>>>=2,P-=2;break t;case 2:d.mode=17;break;case 3:x.msg="invalid block type",d.mode=30}F>>>=2,P-=2;break;case 14:for(F>>>=7&P,P-=7&P;P<32;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if((65535&F)!=(F>>>16^65535)){x.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&F,P=F=0,d.mode=15,L===6)break t;case 15:d.mode=16;case 16:if(V=d.length){if(Y<V&&(V=Y),lt<V&&(V=lt),V===0)break t;a.arraySet(ot,j,Z,V,ct),Y-=V,Z+=V,lt-=V,ct+=V,d.length-=V;break}d.mode=12;break;case 17:for(;P<14;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(d.nlen=257+(31&F),F>>>=5,P-=5,d.ndist=1+(31&F),F>>>=5,P-=5,d.ncode=4+(15&F),F>>>=4,P-=4,286<d.nlen||30<d.ndist){x.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;P<3;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}d.lens[q[d.have++]]=7&F,F>>>=3,P-=3}for(;d.have<19;)d.lens[q[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,D={bits:d.lenbits},W=h(0,d.lens,0,19,d.lencode,0,d.work,D),d.lenbits=D.bits,W){x.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;ht=(_=d.lencode[F&(1<<d.lenbits)-1])>>>16&255,wt=65535&_,!((ut=_>>>24)<=P);){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(wt<16)F>>>=ut,P-=ut,d.lens[d.have++]=wt;else{if(wt===16){for(k=ut+2;P<k;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(F>>>=ut,P-=ut,d.have===0){x.msg="invalid bit length repeat",d.mode=30;break}l=d.lens[d.have-1],V=3+(3&F),F>>>=2,P-=2}else if(wt===17){for(k=ut+3;P<k;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}P-=ut,l=0,V=3+(7&(F>>>=ut)),F>>>=3,P-=3}else{for(k=ut+7;P<k;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}P-=ut,l=0,V=11+(127&(F>>>=ut)),F>>>=7,P-=7}if(d.have+V>d.nlen+d.ndist){x.msg="invalid bit length repeat",d.mode=30;break}for(;V--;)d.lens[d.have++]=l}}if(d.mode===30)break;if(d.lens[256]===0){x.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,D={bits:d.lenbits},W=h(m,d.lens,0,d.nlen,d.lencode,0,d.work,D),d.lenbits=D.bits,W){x.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,D={bits:d.distbits},W=h(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,D),d.distbits=D.bits,W){x.msg="invalid distances set",d.mode=30;break}if(d.mode=20,L===6)break t;case 20:d.mode=21;case 21:if(6<=Y&&258<=lt){x.next_out=ct,x.avail_out=lt,x.next_in=Z,x.avail_in=Y,d.hold=F,d.bits=P,c(x,tt),ct=x.next_out,ot=x.output,lt=x.avail_out,Z=x.next_in,j=x.input,Y=x.avail_in,F=d.hold,P=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;ht=(_=d.lencode[F&(1<<d.lenbits)-1])>>>16&255,wt=65535&_,!((ut=_>>>24)<=P);){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(ht&&(240&ht)==0){for(bt=ut,Pt=ht,Ft=wt;ht=(_=d.lencode[Ft+((F&(1<<bt+Pt)-1)>>bt)])>>>16&255,wt=65535&_,!(bt+(ut=_>>>24)<=P);){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}F>>>=bt,P-=bt,d.back+=bt}if(F>>>=ut,P-=ut,d.back+=ut,d.length=wt,ht===0){d.mode=26;break}if(32&ht){d.back=-1,d.mode=12;break}if(64&ht){x.msg="invalid literal/length code",d.mode=30;break}d.extra=15&ht,d.mode=22;case 22:if(d.extra){for(k=d.extra;P<k;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}d.length+=F&(1<<d.extra)-1,F>>>=d.extra,P-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;ht=(_=d.distcode[F&(1<<d.distbits)-1])>>>16&255,wt=65535&_,!((ut=_>>>24)<=P);){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if((240&ht)==0){for(bt=ut,Pt=ht,Ft=wt;ht=(_=d.distcode[Ft+((F&(1<<bt+Pt)-1)>>bt)])>>>16&255,wt=65535&_,!(bt+(ut=_>>>24)<=P);){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}F>>>=bt,P-=bt,d.back+=bt}if(F>>>=ut,P-=ut,d.back+=ut,64&ht){x.msg="invalid distance code",d.mode=30;break}d.offset=wt,d.extra=15&ht,d.mode=24;case 24:if(d.extra){for(k=d.extra;P<k;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}d.offset+=F&(1<<d.extra)-1,F>>>=d.extra,P-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){x.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(lt===0)break t;if(V=tt-lt,d.offset>V){if((V=d.offset-V)>d.whave&&d.sane){x.msg="invalid distance too far back",d.mode=30;break}dt=V>d.wnext?(V-=d.wnext,d.wsize-V):d.wnext-V,V>d.length&&(V=d.length),at=d.window}else at=ot,dt=ct-d.offset,V=d.length;for(lt<V&&(V=lt),lt-=V,d.length-=V;ot[ct++]=at[dt++],--V;);d.length===0&&(d.mode=21);break;case 26:if(lt===0)break t;ot[ct++]=d.length,lt--,d.mode=21;break;case 27:if(d.wrap){for(;P<32;){if(Y===0)break t;Y--,F|=j[Z++]<<P,P+=8}if(tt-=lt,x.total_out+=tt,d.total+=tt,tt&&(x.adler=d.check=d.flags?r(d.check,ot,tt,ct-tt):i(d.check,ot,tt,ct-tt)),tt=lt,(d.flags?F:p(F))!==d.check){x.msg="incorrect data check",d.mode=30;break}P=F=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;P<32;){if(Y===0)break t;Y--,F+=j[Z++]<<P,P+=8}if(F!==(4294967295&d.total)){x.msg="incorrect length check",d.mode=30;break}P=F=0}d.mode=29;case 29:W=1;break t;case 30:W=-3;break t;case 31:return-4;case 32:default:return u}return x.next_out=ct,x.avail_out=lt,x.next_in=Z,x.avail_in=Y,d.hold=F,d.bits=P,(d.wsize||tt!==x.avail_out&&d.mode<30&&(d.mode<27||L!==4))&&J(x,x.output,x.next_out,tt-x.avail_out)?(d.mode=31,-4):(N-=x.avail_in,tt-=x.avail_out,x.total_in+=N,x.total_out+=tt,d.total+=tt,d.wrap&&tt&&(x.adler=d.check=d.flags?r(d.check,ot,tt,x.next_out-tt):i(d.check,ot,tt,x.next_out-tt)),x.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(N==0&&tt===0||L===4)&&W===v&&(W=-5),W)},s.inflateEnd=function(x){if(!x||!x.state)return u;var L=x.state;return L.window&&(L.window=null),x.state=null,v},s.inflateGetHeader=function(x,L){var d;return x&&x.state?(2&(d=x.state).wrap)==0?u:((d.head=L).done=!1,v):u},s.inflateSetDictionary=function(x,L){var d,j=L.length;return x&&x.state?(d=x.state).wrap!==0&&d.mode!==11?u:d.mode===11&&i(1,L,j,0)!==d.check?-3:J(x,L,j,j)?(d.mode=31,-4):(d.havedict=1,v):u},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,o,s){var a=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(m,g,v,u,w,f,y,p){var b,S,A,C,U,E,M,z,T,J=p.bits,x=0,L=0,d=0,j=0,ot=0,Z=0,ct=0,Y=0,lt=0,F=0,P=null,N=0,tt=new a.Buf16(16),V=new a.Buf16(16),dt=null,at=0;for(x=0;x<=15;x++)tt[x]=0;for(L=0;L<u;L++)tt[g[v+L]]++;for(ot=J,j=15;1<=j&&tt[j]===0;j--);if(j<ot&&(ot=j),j===0)return w[f++]=20971520,w[f++]=20971520,p.bits=1,0;for(d=1;d<j&&tt[d]===0;d++);for(ot<d&&(ot=d),x=Y=1;x<=15;x++)if(Y<<=1,(Y-=tt[x])<0)return-1;if(0<Y&&(m===0||j!==1))return-1;for(V[1]=0,x=1;x<15;x++)V[x+1]=V[x]+tt[x];for(L=0;L<u;L++)g[v+L]!==0&&(y[V[g[v+L]]++]=L);if(E=m===0?(P=dt=y,19):m===1?(P=i,N-=257,dt=r,at-=257,256):(P=c,dt=h,-1),x=d,U=f,ct=L=F=0,A=-1,C=(lt=1<<(Z=ot))-1,m===1&&852<lt||m===2&&592<lt)return 1;for(;;){for(M=x-ct,T=y[L]<E?(z=0,y[L]):y[L]>E?(z=dt[at+y[L]],P[N+y[L]]):(z=96,0),b=1<<x-ct,d=S=1<<Z;w[U+(F>>ct)+(S-=b)]=M<<24|z<<16|T|0,S!==0;);for(b=1<<x-1;F&b;)b>>=1;if(b!==0?(F&=b-1,F+=b):F=0,L++,--tt[x]==0){if(x===j)break;x=g[v+y[L]]}if(ot<x&&(F&C)!==A){for(ct===0&&(ct=ot),U+=d,Y=1<<(Z=x-ct);Z+ct<j&&!((Y-=tt[Z+ct])<=0);)Z++,Y<<=1;if(lt+=1<<Z,m===1&&852<lt||m===2&&592<lt)return 1;w[A=F&C]=ot<<24|Z<<16|U-f|0}}return F!==0&&(w[U+F]=x-ct<<24|64<<16|0),p.bits=ot,0}},{"../utils/common":41}],51:[function(e,o,s){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,o,s){var a=e("../utils/common"),i=0,r=1;function c(_){for(var I=_.length;0<=--I;)_[I]=0}var h=0,m=29,g=256,v=g+1+m,u=30,w=19,f=2*v+1,y=15,p=16,b=7,S=256,A=16,C=17,U=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(v+2));c(J);var x=new Array(2*u);c(x);var L=new Array(512);c(L);var d=new Array(256);c(d);var j=new Array(m);c(j);var ot,Z,ct,Y=new Array(u);function lt(_,I,q,G,O){this.static_tree=_,this.extra_bits=I,this.extra_base=q,this.elems=G,this.max_length=O,this.has_stree=_&&_.length}function F(_,I){this.dyn_tree=_,this.max_code=0,this.stat_desc=I}function P(_){return _<256?L[_]:L[256+(_>>>7)]}function N(_,I){_.pending_buf[_.pending++]=255&I,_.pending_buf[_.pending++]=I>>>8&255}function tt(_,I,q){_.bi_valid>p-q?(_.bi_buf|=I<<_.bi_valid&65535,N(_,_.bi_buf),_.bi_buf=I>>p-_.bi_valid,_.bi_valid+=q-p):(_.bi_buf|=I<<_.bi_valid&65535,_.bi_valid+=q)}function V(_,I,q){tt(_,q[2*I],q[2*I+1])}function dt(_,I){for(var q=0;q|=1&_,_>>>=1,q<<=1,0<--I;);return q>>>1}function at(_,I,q){var G,O,$=new Array(y+1),B=0;for(G=1;G<=y;G++)$[G]=B=B+q[G-1]<<1;for(O=0;O<=I;O++){var R=_[2*O+1];R!==0&&(_[2*O]=dt($[R]++,R))}}function ut(_){var I;for(I=0;I<v;I++)_.dyn_ltree[2*I]=0;for(I=0;I<u;I++)_.dyn_dtree[2*I]=0;for(I=0;I<w;I++)_.bl_tree[2*I]=0;_.dyn_ltree[2*S]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function ht(_){8<_.bi_valid?N(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function wt(_,I,q,G){var O=2*I,$=2*q;return _[O]<_[$]||_[O]===_[$]&&G[I]<=G[q]}function bt(_,I,q){for(var G=_.heap[q],O=q<<1;O<=_.heap_len&&(O<_.heap_len&&wt(I,_.heap[O+1],_.heap[O],_.depth)&&O++,!wt(I,G,_.heap[O],_.depth));)_.heap[q]=_.heap[O],q=O,O<<=1;_.heap[q]=G}function Pt(_,I,q){var G,O,$,B,R=0;if(_.last_lit!==0)for(;G=_.pending_buf[_.d_buf+2*R]<<8|_.pending_buf[_.d_buf+2*R+1],O=_.pending_buf[_.l_buf+R],R++,G===0?V(_,O,I):(V(_,($=d[O])+g+1,I),(B=E[$])!==0&&tt(_,O-=j[$],B),V(_,$=P(--G),q),(B=M[$])!==0&&tt(_,G-=Y[$],B)),R<_.last_lit;);V(_,S,I)}function Ft(_,I){var q,G,O,$=I.dyn_tree,B=I.stat_desc.static_tree,R=I.stat_desc.has_stree,Q=I.stat_desc.elems,H=-1;for(_.heap_len=0,_.heap_max=f,q=0;q<Q;q++)$[2*q]!==0?(_.heap[++_.heap_len]=H=q,_.depth[q]=0):$[2*q+1]=0;for(;_.heap_len<2;)$[2*(O=_.heap[++_.heap_len]=H<2?++H:0)]=1,_.depth[O]=0,_.opt_len--,R&&(_.static_len-=B[2*O+1]);for(I.max_code=H,q=_.heap_len>>1;1<=q;q--)bt(_,$,q);for(O=Q;q=_.heap[1],_.heap[1]=_.heap[_.heap_len--],bt(_,$,1),G=_.heap[1],_.heap[--_.heap_max]=q,_.heap[--_.heap_max]=G,$[2*O]=$[2*q]+$[2*G],_.depth[O]=(_.depth[q]>=_.depth[G]?_.depth[q]:_.depth[G])+1,$[2*q+1]=$[2*G+1]=O,_.heap[1]=O++,bt(_,$,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(K,gt){var mt,it,vt,nt,St,zt,Tt=gt.dyn_tree,Rt=gt.max_code,Bt=gt.stat_desc.static_tree,jt=gt.stat_desc.has_stree,Zt=gt.stat_desc.extra_bits,ne=gt.stat_desc.extra_base,Nt=gt.stat_desc.max_length,Vt=0;for(nt=0;nt<=y;nt++)K.bl_count[nt]=0;for(Tt[2*K.heap[K.heap_max]+1]=0,mt=K.heap_max+1;mt<f;mt++)Nt<(nt=Tt[2*Tt[2*(it=K.heap[mt])+1]+1]+1)&&(nt=Nt,Vt++),Tt[2*it+1]=nt,Rt<it||(K.bl_count[nt]++,St=0,ne<=it&&(St=Zt[it-ne]),zt=Tt[2*it],K.opt_len+=zt*(nt+St),jt&&(K.static_len+=zt*(Bt[2*it+1]+St)));if(Vt!==0){do{for(nt=Nt-1;K.bl_count[nt]===0;)nt--;K.bl_count[nt]--,K.bl_count[nt+1]+=2,K.bl_count[Nt]--,Vt-=2}while(0<Vt);for(nt=Nt;nt!==0;nt--)for(it=K.bl_count[nt];it!==0;)Rt<(vt=K.heap[--mt])||(Tt[2*vt+1]!==nt&&(K.opt_len+=(nt-Tt[2*vt+1])*Tt[2*vt],Tt[2*vt+1]=nt),it--)}}(_,I),at($,H,_.bl_count)}function l(_,I,q){var G,O,$=-1,B=I[1],R=0,Q=7,H=4;for(B===0&&(Q=138,H=3),I[2*(q+1)+1]=65535,G=0;G<=q;G++)O=B,B=I[2*(G+1)+1],++R<Q&&O===B||(R<H?_.bl_tree[2*O]+=R:O!==0?(O!==$&&_.bl_tree[2*O]++,_.bl_tree[2*A]++):R<=10?_.bl_tree[2*C]++:_.bl_tree[2*U]++,$=O,H=(R=0)===B?(Q=138,3):O===B?(Q=6,3):(Q=7,4))}function W(_,I,q){var G,O,$=-1,B=I[1],R=0,Q=7,H=4;for(B===0&&(Q=138,H=3),G=0;G<=q;G++)if(O=B,B=I[2*(G+1)+1],!(++R<Q&&O===B)){if(R<H)for(;V(_,O,_.bl_tree),--R!=0;);else O!==0?(O!==$&&(V(_,O,_.bl_tree),R--),V(_,A,_.bl_tree),tt(_,R-3,2)):R<=10?(V(_,C,_.bl_tree),tt(_,R-3,3)):(V(_,U,_.bl_tree),tt(_,R-11,7));$=O,H=(R=0)===B?(Q=138,3):O===B?(Q=6,3):(Q=7,4)}}c(Y);var D=!1;function k(_,I,q,G){tt(_,(h<<1)+(G?1:0),3),function(O,$,B,R){ht(O),N(O,B),N(O,~B),a.arraySet(O.pending_buf,O.window,$,B,O.pending),O.pending+=B}(_,I,q)}s._tr_init=function(_){D||(function(){var I,q,G,O,$,B=new Array(y+1);for(O=G=0;O<m-1;O++)for(j[O]=G,I=0;I<1<<E[O];I++)d[G++]=O;for(d[G-1]=O,O=$=0;O<16;O++)for(Y[O]=$,I=0;I<1<<M[O];I++)L[$++]=O;for($>>=7;O<u;O++)for(Y[O]=$<<7,I=0;I<1<<M[O]-7;I++)L[256+$++]=O;for(q=0;q<=y;q++)B[q]=0;for(I=0;I<=143;)J[2*I+1]=8,I++,B[8]++;for(;I<=255;)J[2*I+1]=9,I++,B[9]++;for(;I<=279;)J[2*I+1]=7,I++,B[7]++;for(;I<=287;)J[2*I+1]=8,I++,B[8]++;for(at(J,v+1,B),I=0;I<u;I++)x[2*I+1]=5,x[2*I]=dt(I,5);ot=new lt(J,E,g+1,v,y),Z=new lt(x,M,0,u,y),ct=new lt(new Array(0),z,0,w,b)}(),D=!0),_.l_desc=new F(_.dyn_ltree,ot),_.d_desc=new F(_.dyn_dtree,Z),_.bl_desc=new F(_.bl_tree,ct),_.bi_buf=0,_.bi_valid=0,ut(_)},s._tr_stored_block=k,s._tr_flush_block=function(_,I,q,G){var O,$,B=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(R){var Q,H=4093624447;for(Q=0;Q<=31;Q++,H>>>=1)if(1&H&&R.dyn_ltree[2*Q]!==0)return i;if(R.dyn_ltree[18]!==0||R.dyn_ltree[20]!==0||R.dyn_ltree[26]!==0)return r;for(Q=32;Q<g;Q++)if(R.dyn_ltree[2*Q]!==0)return r;return i}(_)),Ft(_,_.l_desc),Ft(_,_.d_desc),B=function(R){var Q;for(l(R,R.dyn_ltree,R.l_desc.max_code),l(R,R.dyn_dtree,R.d_desc.max_code),Ft(R,R.bl_desc),Q=w-1;3<=Q&&R.bl_tree[2*T[Q]+1]===0;Q--);return R.opt_len+=3*(Q+1)+5+5+4,Q}(_),O=_.opt_len+3+7>>>3,($=_.static_len+3+7>>>3)<=O&&(O=$)):O=$=q+5,q+4<=O&&I!==-1?k(_,I,q,G):_.strategy===4||$===O?(tt(_,2+(G?1:0),3),Pt(_,J,x)):(tt(_,4+(G?1:0),3),function(R,Q,H,K){var gt;for(tt(R,Q-257,5),tt(R,H-1,5),tt(R,K-4,4),gt=0;gt<K;gt++)tt(R,R.bl_tree[2*T[gt]+1],3);W(R,R.dyn_ltree,Q-1),W(R,R.dyn_dtree,H-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,B+1),Pt(_,_.dyn_ltree,_.dyn_dtree)),ut(_),G&&ht(_)},s._tr_tally=function(_,I,q){return _.pending_buf[_.d_buf+2*_.last_lit]=I>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&I,_.pending_buf[_.l_buf+_.last_lit]=255&q,_.last_lit++,I===0?_.dyn_ltree[2*q]++:(_.matches++,I--,_.dyn_ltree[2*(d[q]+g+1)]++,_.dyn_dtree[2*P(I)]++),_.last_lit===_.lit_bufsize-1},s._tr_align=function(_){tt(_,2,3),V(_,S,J),function(I){I.bi_valid===16?(N(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(e,o,s){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,o,s){(function(a){(function(i,r){if(!i.setImmediate){var c,h,m,g,v=1,u={},w=!1,f=i.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(i);y=y&&y.setTimeout?y:i,c={}.toString.call(i.process)==="[object process]"?function(A){process.nextTick(function(){b(A)})}:function(){if(i.postMessage&&!i.importScripts){var A=!0,C=i.onmessage;return i.onmessage=function(){A=!1},i.postMessage("","*"),i.onmessage=C,A}}()?(g="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",S,!1):i.attachEvent("onmessage",S),function(A){i.postMessage(g+A,"*")}):i.MessageChannel?((m=new MessageChannel).port1.onmessage=function(A){b(A.data)},function(A){m.port2.postMessage(A)}):f&&"onreadystatechange"in f.createElement("script")?(h=f.documentElement,function(A){var C=f.createElement("script");C.onreadystatechange=function(){b(A),C.onreadystatechange=null,h.removeChild(C),C=null},h.appendChild(C)}):function(A){setTimeout(b,0,A)},y.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var C=new Array(arguments.length-1),U=0;U<C.length;U++)C[U]=arguments[U+1];var E={callback:A,args:C};return u[v]=E,c(v),v++},y.clearImmediate=p}function p(A){delete u[A]}function b(A){if(w)setTimeout(b,0,A);else{var C=u[A];if(C){w=!0;try{(function(U){var E=U.callback,M=U.args;switch(M.length){case 0:E();break;case 1:E(M[0]);break;case 2:E(M[0],M[1]);break;case 3:E(M[0],M[1],M[2]);break;default:E.apply(r,M)}})(C)}finally{p(A),w=!1}}}}function S(A){A.source===i&&typeof A.data=="string"&&A.data.indexOf(g)===0&&b(+A.data.slice(g.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Pe<"u"?Pe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(sn)),sn.exports}var ya=ma();const Br=pa(ya);async function va(t,n={includeMetadata:!0,includeImages:!0,generateM3U:!0,includeHTML:!0}){try{const e=new Br,o=await Oi(t.songIds),s=Yn("",t.title),a=e.folder(s),i=a.folder("data"),r={playlist:{id:t.id,title:t.title,description:t.description||"",createdAt:new Date(t.createdAt).toISOString(),updatedAt:new Date(t.updatedAt).toISOString(),songCount:o.length,totalDuration:o.reduce((v,u)=>v+(u.duration||0),0),imageExtension:t.imageData?le(t.imageType||"image/jpeg"):null,imageMimeType:t.imageType||null},songs:o.map(v=>({id:v.id,title:v.title,artist:v.artist,album:v.album,duration:v.duration||0,originalFilename:v.originalFilename||"",safeFilename:v.originalFilename?Xn(v.originalFilename):"",fileSize:v.fileSize||v.audioData?.byteLength,mimeType:v.mimeType||"audio/mpeg",imageExtension:v.imageData?le(v.imageType||"image/jpeg"):null,imageMimeType:v.imageType||null}))};if(i.file("playlist.json",JSON.stringify(r,null,2)),n.includeImages&&t.imageData&&t.imageType){const v=le(t.imageType);i.file(`playlist-cover${v}`,t.imageData)}const c=[];for(const v of o)if(v.audioData&&v.originalFilename){const u=Xn(v.originalFilename),w=u.replace(/\.[^.]+$/,"");if(i.file(u,v.audioData),c.push(u),n.includeImages&&v.imageData&&v.imageType){const f=le(v.imageType),y=`${w}-cover${f}`;i.file(y,v.imageData)}}if(n.generateM3U){const v=ba(t,o,c);i.file(`${Yn("",t.title)}.m3u8`,v)}if(n.includeHTML)try{const v=await _a(r);a.file("playlistz.html",v);try{const u=await fetch("./sw.js");if(u.ok){const w=await u.text();a.file("sw.js",w)}}catch(u){console.warn(" Could not include service worker in bundle:",u)}}catch(v){console.error(" Error generating HTML:",v),console.error(" Error stack:",v instanceof Error?v.stack:"Unknown error")}const h=await e.generateAsync({type:"blob"}),m=URL.createObjectURL(h),g=document.createElement("a");g.href=m,g.download=`${s}.zip`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(m)}catch(e){throw console.error("Error downloading playlist:",e),new Error("Failed to download playlist")}}function ba(t,n,e){let o=`#EXTM3U
`;if(o+=`# Playlist: ${t.title}
`,t.description&&(o+=`# Description: ${t.description}
`),t.imageData){const s=le(t.imageType||"image/jpeg");o+=`# PlaylistImage: data/playlist-cover${s}
`}return o+=`
`,n.forEach((s,a)=>{const i=Math.round(s.duration||0),r=e[a];if(r){if(o+=`#EXTINF:${i}, ${s.artist} - ${s.title}
`,o+=`# Title: ${s.title}
`,o+=`# Artist: ${s.artist}
`,o+=`# Album: ${s.album}
`,s.imageData&&s.originalFilename){const c=s.originalFilename.replace(/\.[^.]+$/,""),h=le(s.imageType);o+=`# Image: data/${c}-cover${h}
`}o+=`data/${r}

`}}),o}function Yn(t,n){return(n||t||"untitled").replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").toLowerCase().substring(0,100)}function le(t){return{"audio/mpeg":".mp3","audio/mp4":".m4a","audio/wav":".wav","audio/flac":".flac","audio/ogg":".ogg","audio/webm":".webm","image/jpeg":".jpg","image/png":".png","image/gif":".gif","image/webp":".webp"}[t]||".bin"}async function wa(t){try{const e=await new Br().loadAsync(t);let o=null,s,a;const i=[];let r=null,c=e.file(/^[^/]+\/data\/playlist\.json$/i);if(c.length===0){const u=e.file("data/playlist.json");u&&(c=[u])}if(c.length>0){const u=await c[0].async("string");r=JSON.parse(u),o=r.playlist}else{const u=e.file("playlist-info.json");if(u){const w=await u.async("string");o=JSON.parse(w)}}let h=e.file(/^[^/]+\/data\/playlist-cover\.(jpg|jpeg|png|gif|webp)$/i);h.length===0&&(h=e.file(/^data\/playlist-cover\.(jpg|jpeg|png|gif|webp)$/i)),h.length===0&&(h=e.file(/^playlist-cover\.(jpg|jpeg|png|gif|webp)$/i)),h.length>0?(s=await h[0].async("arraybuffer"),a=on(h[0].name)):r&&r.playlist.imageBase64&&(s=Jn(r.playlist.imageBase64),a=r.playlist.imageMimeType);const m=e.file(/\.m3u8?$/i);m.length>0&&await m[0].async("string");let g=e.file(/^[^/]+\/data\/[^/]+\.(mp3|m4a|wav|flac|ogg|webm)$/i);g.length===0&&(g=e.file(/^data\/[^/]+\.(mp3|m4a|wav|flac|ogg|webm)$/i)),g.length===0&&(g=e.file(/^[^/]+\.(mp3|m4a|wav|flac|ogg|webm)$/i));for(const u of g){const w=await u.async("arraybuffer"),f=u.name.split("/").pop()||"",y=f.replace(/\.[^.]+$/,"");let p={};if(r&&r.songs){const E=r.songs.find(M=>M.safeFilename===f||M.originalFilename===f);E&&(p={id:E.id,title:E.title,artist:E.artist,album:E.album,duration:E.duration,originalFilename:E.originalFilename,imageBase64:E.imageBase64,imageMimeType:E.imageMimeType})}else{const E=e.file(`${y}-metadata.json`);if(E){const M=await E.async("string");p=JSON.parse(M)}}let b,S;if(p.imageBase64)b=Jn(p.imageBase64),S=p.imageMimeType;else{let E=e.file(new RegExp(`^[^/]+/data/${y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}-cover\\.(jpg|jpeg|png|gif|webp)$`,"i"));E.length===0&&(E=e.file(new RegExp(`^data/${y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}-cover\\.(jpg|jpeg|png|gif|webp)$`,"i"))),E.length===0&&(E=e.file(new RegExp(`^${y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}-cover\\.(jpg|jpeg|png|gif|webp)$`,"i"))),E.length>0&&(b=await E[0].async("arraybuffer"),S=on(E[0].name))}const[A,C]=y.includes(" - ")?y.split(" - ",2):["Unknown Artist",y],U={audioData:w,mimeType:on(f),originalFilename:p.originalFilename||f,title:p.title||C.replace(/_/g," "),artist:p.artist||A.replace(/_/g," "),album:p.album||"Unknown Album",duration:p.duration||0,position:i.length,imageData:b,imageType:S};i.push(U)}return{playlist:{title:o?.title||t.name.replace(/\.zip$/i,""),description:o?.description||"",imageData:s,imageType:a,songIds:[]},songs:i}}catch(n){throw console.error("Error parsing playlist ZIP:",n),new Error("Failed to parse playlist ZIP file")}}function on(t){const n=t.toLowerCase().split(".").pop();return{mp3:"audio/mpeg",m4a:"audio/mp4",wav:"audio/wav",flac:"audio/flac",ogg:"audio/ogg",webm:"audio/webm",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp"}[n||""]||"application/octet-stream"}function Jn(t){const n=atob(t),e=new Uint8Array(n.length);for(let o=0;o<n.length;o++)e[o]=n.charCodeAt(o);return e.buffer}async function _a(t){const e=await(await fetch(window.location.href)).text(),o=t.playlist,s=t.songs.length,a=o.description||`a playlist with ${s} song${s===1?"":"z"}`;let i="";o.imageMimeType&&(i=`/data/playlist-cover${le(o.imageMimeType)}`);const r=`
    <!-- Open Graph meta tags for rich link previews -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="${o.title.replace(/"/g,"&quot;")}" />
    <meta property="og:description" content="${a.replace(/"/g,"&quot;")}" />
    <meta property="og:site_name" content="playlistz" />
    ${i?`<meta property="og:image" content="${i}" />`:""}
    ${i?'<meta property="og:image:width" content="512" />':""}
    ${i?'<meta property="og:image:height" content="512" />':""}

    <!-- standard meta tags -->
    <meta name="description" content="${a.replace(/"/g,"&quot;")}" />`,c=`
    <script>
      // Flag to indicate this is a standalone version
      window.STANDALONE_MODE = true;

      // Show early loading indicator
      function showLoadingIndicator() {
        const loadingDiv = document.createElement('div');
        loadingDiv.id = 'early-loading';
        loadingDiv.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.9); color: white; padding: 30px; border-radius: 12px; z-index: 10000; text-align: center; font-family: monospace;';
        loadingDiv.innerHTML = '<div style="margin-bottom: 15px; font-size: 18px;">loading playlist...</div><div style="width: 40px; height: 40px; border: 3px solid rgba(255,255,255,0.3); border-top: 3px solid #ff00ff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div><style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>';
        document.body.appendChild(loadingDiv);
        return loadingDiv;
      }

      // Remove early loading indicator
      function hideLoadingIndicator(indicator) {
        if (indicator && indicator.parentNode) {
          indicator.parentNode.removeChild(indicator);
        }
      }

      // Load playlist data from data/ directory asynchronously
      async function loadPlaylistData() {
        try {
          const response = await fetch('data/playlist.json');
          if (!response.ok) {
            throw new Error('Failed to load playlist data: ' + response.status);
          }
          return await response.json();
        } catch (error) {
          console.error('Error loading playlist data:', error);
          throw error;
        }
      }

      // Wait for the function to be available and then initialize
      async function waitForInitialization() {
        let loadingIndicator = null;
        let attempts = 0;
        const maxAttempts = 50; // Wait up to 5 seconds

        while (attempts < maxAttempts) {
          if (window.initializeStandalonePlaylist) {
            try {
              // Show loading indicator during data fetch
              loadingIndicator = showLoadingIndicator();

              // Load playlist data asynchronously
              const playlistData = await loadPlaylistData();

              // Hide early loading indicator before initializing
              hideLoadingIndicator(loadingIndicator);

              // Initialize playlist (this will show its own loading progress)
              window.initializeStandalonePlaylist(playlistData);
              return; // Success, exit
            } catch (error) {
              hideLoadingIndicator(loadingIndicator);
              console.error('Failed to initialize playlist:', error);
              showError('Failed to initialize playlist: ' + error.message);
              return;
            }
          }

          // Wait 100ms before trying again
          await new Promise(resolve => setTimeout(resolve, 100));
          attempts++;
        }

        // Function never became available
        hideLoadingIndicator(loadingIndicator);
        console.error('initializeStandalonePlaylist function not found after waiting');
        showError('Playlist initialization function not found. The app may not have loaded properly.');
      }

      // Start waiting after DOM is loaded
      window.addEventListener('DOMContentLoaded', waitForInitialization);

      // Show dismissable error message
      function showError(message) {
        const errorDiv = document.createElement('div');
        errorDiv.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(220, 20, 60, 0.95); color: white; padding: 15px 25px; border-radius: 8px; z-index: 10000; text-align: center; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);';
        errorDiv.innerHTML = '<div style="margin-bottom: 10px;">' + message + '</div><button onclick="this.parentElement.remove()" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">Dismiss</button>';
        document.body.appendChild(errorDiv);
      }
    <\/script>
  `;let h=e.replace(/<title>.*?<\/title>/i,`<title>${o.title.replace(/"/g,"&quot;")} - playlistz</title>`);return h=h.replace("</head>",`${r}
${c}
</head>`),h}function Xn(t){return t.replace(/\$/g,"_DOLLAR_").replace(/\[/g,"_LBRACKET_").replace(/\]/g,"_RBRACKET_").replace(/\(/g,"_LPAREN_").replace(/\)/g,"_RPAREN_").replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g," ").trim()}const[oo,xa]=rt(navigator.onLine),[lo,ka]=rt(!1),[ln,Qn]=rt(!1),Rr="playlistz-cache-v1";async function Sa(){try{if("storage"in navigator&&"persist"in navigator.storage){const t=await navigator.storage.persist();return Qn(!!t),t}else return!1}catch(t){return console.error(" Error requesting persistent storage:",t),!1}}function Mr(t,n){const e=t||"playlistz";let o,s;n?(o=n,n.endsWith(".png")?s="image/png":n.endsWith(".webp")?s="image/webp":s="image/jpeg"):(o=`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" viewBox="0 0 192 192"><rect width="192" height="192" fill="#000000"/><text x="96" y="125" text-anchor="middle" font-size="100" font-family="Arial,sans-serif" font-weight="bold" fill="magenta">z</text></svg>')}`,s="image/svg+xml");const a={name:e,short_name:e.length>12?e.substring(0,12):e,description:"Offline music playlist manager",start_url:"./",display:"standalone",background_color:"#000000",theme_color:"#000000",icons:[{src:o,sizes:"192x192",type:s}]},i=document.querySelector('link[rel="manifest"]');i&&i.remove(),document.querySelectorAll('link[rel="apple-touch-icon"]').forEach(y=>y.remove());const c=JSON.stringify(a),h=new Blob([c],{type:"application/manifest+json"}),m=URL.createObjectURL(h),g=document.createElement("link");g.rel="manifest",g.href=`${m}?v=${Date.now()}`,document.head.appendChild(g),[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"},{name:"apple-mobile-web-app-title",content:e},{name:"theme-color",content:"#000000"}].forEach(({name:y,content:p})=>{let b=document.querySelector(`meta[name="${y}"]`);b||(b=document.createElement("meta"),b.setAttribute("name",y),document.head.appendChild(b)),b.setAttribute("content",p)});const u=["57x57","60x60","72x72","76x76","114x114","120x120","144x144","152x152","180x180"],w=n||`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 180 180"><rect width="180" height="180" fill="#000000"/><text x="90" y="117" text-anchor="middle" font-size="94" font-family="Arial,sans-serif" font-weight="bold" fill="magenta">z</text></svg>')}`;u.forEach(y=>{const p=document.createElement("link");p.rel="apple-touch-icon",p.sizes=y,p.href=`${w}#${Date.now()}`,document.head.appendChild(p)});const f=document.createElement("link");f.rel="apple-touch-icon",f.href=`${w}#${Date.now()}`,document.head.appendChild(f)}function jr(t){if(!t.imageData||!t.imageType)return;let n=".jpg";return t.imageType==="image/png"?n=".png":t.imageType==="image/webp"?n=".webp":t.imageType==="image/gif"&&(n=".gif"),`/data/playlist-cover${n}`}function $a(t,n){const e=n?jr(n):void 0;Mr(t,e)}async function Ca(){return setTimeout(async()=>{try{if(!("serviceWorker"in navigator))return;const n=await navigator.serviceWorker.register("./sw.js");if(await navigator.serviceWorker.ready,ka(!0),navigator.serviceWorker.addEventListener("message",e=>{const{type:o}=e.data;o==="SW_READY"&&tr()}),navigator.serviceWorker.controller)tr();else{const e=n.active||n.installing||n.waiting;e&&e.postMessage({type:"CLAIM_CLIENTS"})}}catch(t){console.warn(" Service worker registration failed:",t)}},100),!1}async function tr(){try{const t=await caches.open(Rr),n=window.location.href;await t.match(n)||await t.add(n)}catch(t){console.warn(" Failed to auto-cache page:",t)}}async function er(t,n){try{if(!("caches"in window))throw new Error("Cache API not supported");if(window.location.protocol==="file:")return;if(navigator.serviceWorker&&navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage({type:"CACHE_URL",data:{url:t}});return}await(await caches.open(Rr)).add(t)}catch(e){throw console.error(` Failed to cache audio file ${n}:`,e),e}}async function Ea(t,n){const e=()=>{xa(navigator.onLine)};window.addEventListener("online",e),window.addEventListener("offline",e);const o=n?jr(n):void 0;Mr(t,o),await Sa(),Ca()}async function Aa(){try{const t={};if("storage"in navigator&&navigator.storage){if("estimate"in navigator.storage){const n=await navigator.storage.estimate();t.quota=n.quota,t.usage=n.usage,n.quota&&(t.quotaFormatted=Math.round(n.quota/1024/1024)+" MB"),n.usage&&(t.usageFormatted=Math.round(n.usage/1024/1024)+" MB"),n.quota&&n.usage&&(t.usagePercent=Math.round(n.usage/n.quota*100))}"persisted"in navigator.storage&&(t.persistent=await navigator.storage.persisted())}return t}catch(t){return console.error(" Error getting storage info:",t),{error:t instanceof Error?t.message:String(t)}}}var Ia=et('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4">'),za=et('<div class="p-4 space-y-2">'),Ta=et('<div class=text-center><div class="text-magenta-400 font-mono font-semibold text-[10px]">%</div><div>storage'),Da=et('<div><div class=text-center><div class="text-magenta-400 font-mono font-semibold"></div><div>playlistz</div></div><div class=text-center><div class="text-magenta-400 font-mono font-semibold"></div><div>songz'),La=et('<div class="text-center text-[10px] text-gray-500"> filtered'),Pa=et('<div><div><div class="flex items-center justify-between mb-4"><h1>playlist<span class=text-magenta-500>z</span></h1><div class="flex items-center gap-2"><div class="text-sm text-magenta-400 font-mono">&nbsp;</div></div></div><div class=relative><input type=text placeholder=search... class="w-full bg-black text-white px-4 py-2 pl-10 text-sm border border-magenta-200 focus:border-magenta-500 focus:outline-none focus:ring-1 focus:ring-magenta-500"><div class="absolute left-3 top-2.5 text-gray-400"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div></div><button class="w-full mt-4 px-4 py-3 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 disabled:cursor-not-allowed text-white transition-colors font-medium flex items-center justify-center gap-2"><span></span></button></div><div class="flex-1 overflow-y-auto"></div><div class="p-4 bg-gray-900 bg-opacity-30"><div class="text-xs text-gray-400 space-y-1">'),Oa=et('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin">'),Ua=et('<div class="p-6 text-center"><div class="inline-block w-6 h-6 border-2 border-magenta-500 border-t-transparent rounded-full animate-spin mb-3"></div><p class="text-gray-400 text-sm">loading playlistz...'),Fa=et('<div class=text-gray-400><div class="text-lg mb-2">no matchez</div><p class=text-sm>...try a different search?'),Ba=et('<div class="p-6 text-center">'),Ra=et('<div class=text-gray-400><div class="text-lg mb-2">no playlistz yet</div><p class=text-sm>create your first playlist (if u want)'),Ma=et("<div>"),ja=et('<button><div class="flex items-start gap-3"><div class="flex-shrink-0 w-12 h-12 overflow-hidden bg-transparent"></div><div class="flex-1 min-w-0"><div></div><div class="flex items-center justify-between text-xs"><span></span><span>'),nr=et('<div class="w-full h-full flex items-center justify-center"><svg width=100 height=100 viewBox="0 0 100 100"fill=none xmlns=http://www.w3.org/2000/svg><path d="M50 81L25 31L75 31L60.7222 68.1429L50 81Z"fill=#FF00FF>'),Na=et('<img class="w-full h-full object-cover">'),Wa=et('<div class="text-center text-[10px] text-gray-500"> / ');function Za(t){const[n,e]=rt(!1),[o,s]=rt(""),[a,i]=rt({}),r=()=>{const m=o().toLowerCase();return m?t.playlists.filter(g=>g.title.toLowerCase().includes(m)||(g.description||"").toLowerCase().includes(m)):t.playlists},c=async()=>{if(!n()){e(!0);try{await t.onCreatePlaylist()}finally{e(!1)}}},h=m=>{const g=m.songIds?.length||0;return g===1?"1 song":`${g} songs`};return be(async()=>{const m=async()=>{const v=await Aa();i(v)};await m();const g=setInterval(m,3e4);return()=>clearInterval(g)}),(()=>{var m=Pa(),g=m.firstChild,v=g.firstChild,u=v.firstChild,w=v.nextSibling,f=w.firstChild,y=w.nextSibling,p=y.firstChild,b=g.nextSibling,S=b.nextSibling,A=S.firstChild;return f.$$input=C=>s(C.currentTarget.value),y.$$click=c,X(y,st(ft,{get when(){return!n()},get fallback(){return Oa()},get children(){return Ia()}}),p),X(p,()=>n()?"creating...":"new playlist"),X(b,st(ft,{get when(){return!t.isLoading},get fallback(){return Ua()},get children(){return st(ft,{get when(){return r().length>0},get fallback(){return(()=>{var C=Ba();return X(C,st(ft,{get when(){return o()},get fallback(){return Ra()},get children(){return Fa()}})),C})()},get children(){var C=za();return X(C,st(mr,{get each(){return r()},children:U=>{const E=()=>t.selectedPlaylist?.id===U.id,M=Fr(U.updatedAt);return(()=>{var z=ja(),T=z.firstChild,J=T.firstChild,x=J.nextSibling,L=x.firstChild,d=L.nextSibling,j=d.firstChild,ot=j.nextSibling;return z.$$click=()=>t.onPlaylistSelect(U),X(J,st(ft,{get when(){return U.imageType},get fallback(){return nr()},get children(){return(()=>{const Z=se(U.thumbnailData,U.imageData,U.imageType,"thumbnail");return Z?(()=>{var ct=Na();return At(ct,"src",Z),yt(()=>At(ct,"alt",U.title)),ct})():nr()})()}})),X(L,()=>U.title),X(x,st(ft,{get when(){return U.description},get children(){var Z=Ma();return X(Z,()=>U.description),yt(()=>_t(Z,`text-sm mb-2 line-clamp-2 ${E()?"text-magenta-100":"text-gray-400 group-hover:text-white"}`)),Z}}),d),X(j,()=>h(U)),X(ot,()=>M.signal()),yt(Z=>{var ct=`w-full text-left p-4 transition-all duration-500 group ${E()?"bg-magenta-500 bg-opacity-20 shadow-lg":"bg-black bg-opacity-50 hover:bg-magenta-500"}`,Y=`font-medium mb-1 truncate ${E()?"text-white":"text-gray-200 group-hover:text-white"}`,lt=E()?"text-magenta-200":"text-gray-500 group-hover:text-white",F=E()?"text-magenta-300":"text-gray-500 group-hover:text-white";return ct!==Z.e&&_t(z,Z.e=ct),Y!==Z.t&&_t(L,Z.t=Y),lt!==Z.a&&_t(j,Z.a=lt),F!==Z.o&&_t(ot,Z.o=F),Z},{e:void 0,t:void 0,a:void 0,o:void 0}),z})()}})),C}})}})),X(A,st(ft,{get when(){return!o()},get children(){var C=Da(),U=C.firstChild,E=U.firstChild,M=U.nextSibling,z=M.firstChild;return X(E,()=>t.playlists.length),X(z,()=>t.playlists.reduce((T,J)=>T+(J.songIds?.length||0),0)),X(C,st(ft,{get when(){return Mt(()=>!!ln())()&&a().usageFormatted},get children(){var T=Ta(),J=T.firstChild,x=J.firstChild;return X(J,()=>a().usagePercent,x),T}}),null),yt(()=>_t(C,`grid gap-2 ${ln()&&a().usageFormatted&&!o()?"grid-cols-3":"grid-cols-2"}`)),C}}),null),X(A,st(ft,{get when(){return o()},get fallback(){return st(ft,{get when(){return Mt(()=>!!ln())()&&a().usageFormatted},get children(){var C=Wa(),U=C.firstChild;return X(C,()=>a().usageFormatted,U),X(C,()=>a().quotaFormatted,null),C}})},get children(){var C=La(),U=C.firstChild;return X(C,()=>r().length,U),C}}),null),yt(C=>{var U=`${t.isMobile?"w-full":"w-80"} bg-black/50 backdrop-blur-sm flex flex-col h-full`,E=`p-6 ${t.isMobile?"text-center":""}`,M=`text-2xl font-mono font-stretch-expanded font-bold text-white ${t.isMobile?"text-3xl":""}`,z=n();return U!==C.e&&_t(m,C.e=U),E!==C.t&&_t(g,C.t=E),M!==C.a&&_t(u,C.a=M),z!==C.o&&(y.disabled=C.o=z),C},{e:void 0,t:void 0,a:void 0,o:void 0}),yt(()=>f.value=o()),m})()}Ae(["input","click"]);var Ha=et('<div class="flex items-center p-3 bg-gray-800 bg-opacity-30 animate-pulse"><div class="w-12 h-12 bg-gray-700 mr-4"></div><div class=flex-1><div class="h-4 bg-gray-700 rounded mb-2 w-3/4"></div><div class="h-3 bg-gray-700 rounded w-1/2"></div></div><div class="w-16 h-4 bg-gray-700 rounded">'),Va=et('<div class="flex items-center p-3 bg-red-900 bg-opacity-20 border border-red-500 border-opacity-30"><div class="w-12 h-12 bg-red-800 mr-4 flex items-center justify-center"><svg class="w-6 h-6 text-red-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class=flex-1><div class="text-red-400 font-medium">song not found</div><div class="text-red-300 text-sm">id: '),qa=et('<svg class="absolute inset-0 w-8 h-8 transform -rotate-90"viewBox="0 0 32 32"><circle cx=16 cy=16 r=14 stroke="rgba(255, 255, 255, 0.2)"stroke-width=2 fill=none></circle><circle cx=16 cy=16 r=14 stroke-width=2 fill=none stroke-linecap=round class="transition-all duration-300">'),Ga=et('<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1"><div class="relative w-8 h-8"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),Ka=et('<svg class="w-5 h-5"fill=currentColor viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z">'),Ya=et('<button class="absolute inset-0 bg-transparent flex items-center justify-center transition-opacity hover:bg-opacity-80 text-magenta-300 hover:text-magenta-100">'),Ja=et('<span class="font-mono w-12 text-right tabular-nums">'),Xa=et('<div class="text-xs mt-1 text-magenta-200 flex items-center"><span class="font-mono w-12 text-left tabular-nums"></span><div class="flex-1 relative h-4 flex items-center seek-bar-container"><input type=range min=0 class="w-full h-2 bg-gray-700 rounded-full appearance-none cursor-pointer hover:bg-gray-600 transition-colors seek-slider">'),Qa=et('<div class="text-xs mt-1 text-magenta-200">added '),ts=et('<button class="p-1 text-red-400 hover:text-red-300 transition-colors hover:bg-red-600 hover:bg-opacity-30"title="remove from playlist"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),es=et('<div class="absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center gap-1 bg-black bg-opacity-80 px-2 py-1 z-50"><button class="p-1 text-gray-400 hover:text-white transition-colors hover:bg-gray-600"title="edit song"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button><div title="drag to reorder"><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 12h16M4 18h16">'),ns=et('<div><div class="absolute inset-0 transition-all duration-200"></div><div class="relative flex items-center w-full"><div class="relative w-12 h-12 mr-4 flex-shrink-0 bg-black"><div class="absolute inset-0 flex justify-center items-center font-mono group-hover:text-transparent"><span class=bg-black></span></div></div><div class="flex-1 min-w-0 text-lg"><div></div><div></div></div></div><div>'),rr=et('<div class="w-12 h-12 bg-transparent flex items-center justify-center">'),rs=et('<img class="w-12 h-12 object-cover">'),is=et('<svg class="w-5 h-5"fill=currentColor viewBox="0 0 24 24"><path d="M8 5v14l11-7z">'),as=et("<span class=mx-2>");function ss(t){const[n,e]=rt(!1),[o,s]=rt(!1),[a,i]=rt(!1),[r,c]=rt(!1),[h,m]=rt(!1);be(()=>{c("ontouchstart"in window||navigator.maxTouchPoints>0)});const[g]=Yr(()=>[t.songId,xi(t.songId)()],async([T,J])=>{try{const x=await Pi(T);return x||null}catch(x){return console.error(`Error fetching song ${T}:`,x),null}}),v=()=>{const T=Et.currentSong(),J=Et.isPlaying();return T?.id===t.songId&&J},u=()=>Et.selectedSongId()===t.songId,w=()=>Et.loadingSongIds().has(t.songId),f=()=>Et.preloadingSongId()===t.songId,y=()=>ea(t.songId),p=()=>na(t.songId),b=T=>{if(!T)return"0:00";const J=Math.floor(T/60),x=Math.floor(T%60);return`${J}:${x.toString().padStart(2,"0")}`},S=T=>{const J=Math.floor(T/60),x=Math.floor(T%60);return`${J}:${x.toString().padStart(2,"0")}`},A=()=>{const T=g();T&&(v()?t.onPause?.():t.onPlay?.(T))},C=T=>{s(!0),T.dataTransfer.effectAllowed="move",T.dataTransfer.setData("text/plain",t.index.toString())},U=()=>{s(!1),i(!1)},E=T=>{T.preventDefault(),T.stopPropagation(),T.dataTransfer.dropEffect="move",i(!0)},M=T=>{T.stopPropagation(),T.currentTarget===T.target&&i(!1)},z=T=>{T.preventDefault(),T.stopPropagation(),i(!1);const J=parseInt(T.dataTransfer.getData("text/plain"),10),x=t.index;J!==x&&t.onReorder&&t.onReorder(J,x)};return st(ft,{get when(){return!g.loading},get fallback(){return Ha()},get children(){return st(ft,{get when(){return g()},get fallback(){return(()=>{var T=Va(),J=T.firstChild,x=J.nextSibling,L=x.firstChild,d=L.nextSibling;return d.firstChild,X(d,()=>t.songId,null),T})()},children:T=>{const J=Fr(T().createdAt),x=()=>{const L=Et.currentSong();if(!L||L.id!==T().id)return 0;const d=Et.duration(),j=Et.currentTime();return d>0?j/d*100:0};return(()=>{var L=ns(),d=L.firstChild,j=d.nextSibling,ot=j.firstChild,Z=ot.firstChild,ct=Z.firstChild,Y=ot.nextSibling,lt=Y.firstChild,F=lt.nextSibling,P=j.nextSibling;return Bn(L,"dblclick",r()?void 0:A),Bn(L,"click",r()?A:void 0),L.addEventListener("mouseleave",()=>!r()&&e(!1)),L.addEventListener("mouseenter",()=>!r()&&e(!0)),L.addEventListener("drop",z),L.addEventListener("dragleave",M),L.addEventListener("dragover",E),L.addEventListener("dragend",U),L.addEventListener("dragstart",C),L.style.setProperty("-webkit-tap-highlight-color","transparent"),d.style.setProperty("pointer-events","none"),X(ct,()=>t.index.toString().padStart(3,"0")),X(ot,st(ft,{get when(){return T().imageType},get fallback(){return rr()},get children(){return(()=>{const N=se(T().thumbnailData,T().imageData,T().imageType,"thumbnail");return N?(()=>{var tt=rs();return At(tt,"src",N),yt(()=>At(tt,"alt",`${T().title} album art`)),tt})():rr()})()}}),null),X(ot,st(ft,{get when(){return w()||f()||p()},get children(){var N=Ga(),tt=N.firstChild,V=tt.firstChild;return X(tt,st(ft,{get when(){return Mt(()=>y()>0)()&&y()<100},get children(){var dt=qa(),at=dt.firstChild,ut=at.nextSibling;return yt(ht=>{var wt=f()?"#9ca3af":"#ec4899",bt=`${y()/100*87.96} 87.96`;return wt!==ht.e&&At(ut,"stroke",ht.e=wt),bt!==ht.t&&At(ut,"stroke-dasharray",ht.t=bt),ht},{e:void 0,t:void 0}),dt}}),V),yt(()=>At(V,"class",`w-4 h-4 animate-spin absolute inset-0 m-auto ${f()?"text-gray-400":"text-magenta-300"}`)),N}}),null),X(ot,st(ft,{get when(){return Mt(()=>!!(!w()&&!f()&&!p()&&n()))()&&!r()},get children(){var N=Ya();return N.$$click=A,X(N,st(ft,{get when(){return v()},get fallback(){return is()},get children(){return Ka()}})),N}}),null),X(lt,()=>T().title),X(F,()=>T().artist,null),X(F,(()=>{var N=Mt(()=>!!T().album);return()=>N()&&as()})(),null),X(F,()=>T().album,null),X(Y,st(ft,{get when(){return Mt(()=>!!u())()&&(n()||r())},get children(){var N=Xa(),tt=N.firstChild,V=tt.nextSibling,dt=V.firstChild;return X(tt,(()=>{var at=Mt(()=>!!u());return()=>at()?S(Et.currentTime()):"0:00"})()),V.addEventListener("mouseleave",()=>m(!1)),V.$$mouseup=()=>m(!1),V.$$mousedown=()=>m(!0),dt.$$mouseup=()=>m(!1),dt.$$mousedown=()=>m(!0),dt.$$input=at=>{if(u()){const ut=parseFloat(at.currentTarget.value);Lr(ut)}},X(N,st(ft,{get when(){return!r()},get children(){var at=Ja();return X(at,()=>b(T().duration)),at}}),null),yt(at=>{var ut=T().duration||0,ht=u()?`linear-gradient(to right, #ec4899 0%, #ec4899 ${Et.currentTime()/(T().duration||1)*100}%, #374151 ${Et.currentTime()/(T().duration||1)*100}%, #374151 100%)`:"#374151";return ut!==at.e&&At(dt,"max",at.e=ut),ht!==at.t&&((at.t=ht)!=null?dt.style.setProperty("background",ht):dt.style.removeProperty("background")),at},{e:void 0,t:void 0}),yt(()=>dt.value=u()?Et.currentTime():0),N}}),null),X(Y,st(ft,{get when(){return Mt(()=>!!(v()||u()))()&&!n()},get children(){var N=Qa();return N.firstChild,X(N,()=>J.signal(),null),N}}),null),X(P,()=>b(T().duration)),X(L,st(ft,{get when(){return Mt(()=>!!n())()&&!r()},get children(){var N=es(),tt=N.firstChild,V=tt.nextSibling;return tt.$$click=dt=>{dt.stopPropagation(),dt.preventDefault();const at=g();at&&t.onEdit?.(at)},X(N,st(ft,{get when(){return t.showRemoveButton},get children(){var dt=ts();return dt.$$click=at=>{at.stopPropagation(),at.preventDefault(),t.onRemove?.(t.songId)},dt}}),V),yt(()=>_t(V,`p-1 text-gray-400 transition-colors cursor-grab ${o()?"cursor-grabbing text-magenta-400":"hover:text-gray-300"}`)),N}}),null),yt(N=>{var tt=`group relative flex items-center p-3 group-hover:bg-opacity-70 hover:bg-magenta-500 transition-all duration-200 overflow-hidden ${v()||u()?"sticky top-0 bottom-0 bg-black z-100":a()?"border border-magenta-400 border-dashed":o()?"border border-gray-500":"border border-transparent"}`,V=!h(),dt=v()?`linear-gradient(to right, rgba(236, 72, 153, 0.5) ${x()}%, transparent ${x()}%)`:u()?"rgba(236, 72, 153, 0.3)":a()?"rgba(220, 38, 127, 0.2)":o()?"rgba(107, 114, 128, 0.3)":"transparent",at=`break-words ${v()||u()?"text-magenta-200":"text-white"}`,ut=`text-sm break-words ${v()||u()?"text-magenta-200":"text-white"}`,ht=`text-sm font-mono mr-4 ${v()||u()?"text-magenta-200":"text-white"}`;return tt!==N.e&&_t(L,N.e=tt),V!==N.t&&At(L,"draggable",N.t=V),dt!==N.a&&((N.a=dt)!=null?d.style.setProperty("background",dt):d.style.removeProperty("background")),at!==N.o&&_t(lt,N.o=at),ut!==N.i&&_t(F,N.i=ut),ht!==N.n&&_t(P,N.n=ht),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),L})()}})}})}Ae(["click","dblclick","mousedown","mouseup","input"]);var os=et('<img alt="Album art"class="w-full h-full object-cover">'),ls=et('<button class="block px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white text-sm font-medium transition-colors">remove image'),cs=et("<div>size: <!> mb"),ds=et('<div class="bg-red-900 bg-opacity-30 border border-red-500 p-3"><div class="text-red-400 text-sm">'),us=et('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),fs=et('<div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"><div class="bg-gray-900 shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative"><div class="flex items-center justify-between p-6 border-b border-gray-700 relative"><h2 class="text-xl font-bold text-white font-mono">edit<span class=text-magenta-500>z</span></h2><button class="text-magenta-200 hover:text-magenta-500 p-1 rounded absolute top-4 right-4"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class="p-6 space-y-6"><div><label class="block text-sm font-medium text-gray-300 mb-3">album art</label><div class="flex items-center gap-4"><div class="w-20 h-20 overflow-hidden bg-gray-700 flex items-center justify-center"></div><div class="flex-1 space-y-2"><input type=file accept=image/* class=hidden id=image-upload><label for=image-upload class="inline-block px-4 py-2 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white cursor-pointer text-sm font-medium transition-colors">choose image</label></div></div></div><div><label class="block text-sm font-medium text-gray-300 mb-2">title</label><input type=text class="w-full bg-gray-800 text-white px-4 py-3 border border-gray-600 focus:border-magenta-500 focus:ring-1 focus:ring-magenta-500 focus:outline-none transition-colors"placeholder="song title"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">artist</label><input type=text class="w-full bg-gray-800 text-white px-4 py-3 border border-gray-600 focus:border-magenta-500 focus:ring-1 focus:ring-magenta-500 focus:outline-none transition-colors"placeholder="artist name"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">album</label><input type=text class="w-full bg-gray-800 text-white px-4 py-3 border border-gray-600 focus:border-magenta-500 focus:ring-1 focus:ring-magenta-500 focus:outline-none transition-colors"placeholder="album name"></div><div class="bg-gray-800 p-4"><h3 class="text-sm font-medium text-gray-300 mb-2">file information</h3><div class="text-sm text-gray-400 space-y-1"><div>filename: </div><div>duration: </div></div></div></div><div class="flex items-center justify-end gap-3 p-6 border-t border-gray-700"><button class="px-4 py-2 text-gray-400 hover:text-white disabled:text-gray-600 font-medium transition-colors">cancel</button><button class="px-6 py-2 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white font-medium transition-colors flex items-center gap-2">'),hs=et('<svg class="w-8 h-8 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3">'),gs=et('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin">');function ps(t){const[n,e]=rt(""),[o,s]=rt(""),[a,i]=rt(""),[r,c]=rt(),[h,m]=rt(),[g,v]=rt(),[u,w]=rt(),[f,y]=rt(!1),[p,b]=rt(null);be(()=>{if(t.isOpen&&t.song&&(e(t.song.title),s(t.song.artist||""),i(t.song.album||""),(t.song.imageData||t.song.thumbnailData)&&t.song.imageType)){c(t.song.imageData),m(t.song.thumbnailData),v(t.song.imageType);const E=t.song.imageData||t.song.thumbnailData,M=Wt(E,t.song.imageType);w(M)}});const S=async E=>{const z=E.target.files?.[0];if(!z)return;const T=Pr(z);if(!T.valid){b(T.error||"invalid image file");return}try{y(!0),b(null);const J=await $n(z);if(J.success&&J.imageData&&J.thumbnailData){const x=u();x&&URL.revokeObjectURL(x),c(J.imageData),m(J.thumbnailData),v(z.type);const L=Wt(J.imageData,z.type);w(L)}else b(J.error||"failed to process image")}catch(J){b("error uploading image"),console.error("image upload error:",J)}finally{y(!1)}},A=async()=>{if(!n().trim()){b("Title is required");return}try{y(!0),b(null);const E={title:n().trim(),artist:o().trim()||"Unknown Artist",album:a().trim()||"Unknown Album",imageData:r(),thumbnailData:h(),imageType:g(),updatedAt:Date.now()};await Ti(t.song.id,E);const M={...t.song,...E};t.onSave(M),t.onClose()}catch(E){b("failed to save"),console.error("Save error:",E)}finally{y(!1)}},C=()=>{const E=u();E&&URL.revokeObjectURL(E),b(null),t.onClose()},U=()=>{const E=u();E&&URL.revokeObjectURL(E),c(void 0),m(void 0),v(void 0),w(void 0)};return Ht(()=>{if(t.isOpen){const E=M=>{M.key==="Escape"&&C()};document.addEventListener("keydown",E),te(()=>document.removeEventListener("keydown",E))}}),t.isOpen?(()=>{var E=fs(),M=E.firstChild,z=M.firstChild,T=z.firstChild,J=T.nextSibling,x=z.nextSibling,L=x.firstChild,d=L.firstChild,j=d.nextSibling,ot=j.firstChild,Z=ot.nextSibling,ct=Z.firstChild;ct.nextSibling;var Y=L.nextSibling,lt=Y.firstChild,F=lt.nextSibling,P=Y.nextSibling,N=P.firstChild,tt=N.nextSibling,V=P.nextSibling,dt=V.firstChild,at=dt.nextSibling,ut=V.nextSibling,ht=ut.firstChild,wt=ht.nextSibling,bt=wt.firstChild;bt.firstChild;var Pt=bt.nextSibling;Pt.firstChild;var Ft=x.nextSibling,l=Ft.firstChild,W=l.nextSibling;return J.$$click=C,X(ot,st(ft,{get when(){return u()},get fallback(){return hs()},get children(){var D=os();return yt(()=>At(D,"src",u())),D}})),ct.addEventListener("change",S),X(Z,st(ft,{get when(){return r()},get children(){var D=ls();return D.$$click=U,yt(()=>D.disabled=f()),D}}),null),F.$$input=D=>e(D.currentTarget.value),tt.$$input=D=>s(D.currentTarget.value),at.$$input=D=>i(D.currentTarget.value),X(bt,()=>t.song.originalFilename||"Unknown",null),X(wt,st(ft,{get when(){return t.song.fileSize},get children(){var D=cs(),k=D.firstChild,_=k.nextSibling;return _.nextSibling,X(D,()=>Math.round(t.song.fileSize/1024/1024*100)/100,_),D}}),Pt),X(Pt,()=>ms(t.song.duration),null),X(x,st(ft,{get when(){return p()},get children(){var D=ds(),k=D.firstChild;return X(k,p),D}}),null),l.$$click=C,W.$$click=A,X(W,st(ft,{get when(){return!f()},get fallback(){return gs()},get children(){return us()}}),null),X(W,()=>f()?"saving...":"save changes",null),yt(D=>{var k=f(),_=f(),I=f(),q=f(),G=f(),O=f(),$=f()||!n().trim();return k!==D.e&&(J.disabled=D.e=k),_!==D.t&&(ct.disabled=D.t=_),I!==D.a&&(F.disabled=D.a=I),q!==D.o&&(tt.disabled=D.o=q),G!==D.i&&(at.disabled=D.i=G),O!==D.n&&(l.disabled=D.n=O),$!==D.s&&(W.disabled=D.s=$),D},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),yt(()=>F.value=n()),yt(()=>tt.value=o()),yt(()=>at.value=a()),E})():null}function ms(t){if(!t||isNaN(t))return"0:00";const n=Math.floor(t/60),e=Math.floor(t%60);return`${n}:${e.toString().padStart(2,"0")}`}Ae(["click","input"]);var ys=et('<img alt="playlist cover"class="w-full h-full object-cover">'),vs=et('<button class="block w-full px-4 py-3 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-medium transition-colors">use album art from songz (<!> available)'),bs=et('<button class="block w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-medium transition-colors">remove cover image'),ws=et('<p class="text-sm text-gray-400 mt-2 text-center">+<!> more imagez available'),_s=et('<div><div class="grid grid-cols-4 gap-3">'),xs=et('<div class="bg-red-900 bg-opacity-30 border border-red-500 p-3"><div class="text-red-400 text-sm">'),ks=et('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),Ss=et('<div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"><div class="bg-gray-900 shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto"><div class="flex items-center justify-between p-6 border-b border-gray-700"><h2 class="text-xl font-bold text-white font-mono">cover<span class=text-magenta-500>z</span></h2><button class="text-gray-400 hover:text-white p-1 rounded"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class="p-6 space-y-6"><div><div class="w-48 h-48 mx-auto overflow-hidden bg-gray-700 flex items-center justify-center"></div></div><div class=space-y-4><div><input type=file accept=image/* class=hidden id=cover-upload><label for=cover-upload class="block w-full px-4 py-3 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white cursor-pointer text-center font-medium transition-colors">upload image</label></div></div><div class="bg-gray-800 p-4"><h3 class="text-sm font-medium text-gray-300 mb-2">playlist information</h3><div class="text-sm text-gray-400 space-y-1"><div>title: </div><div>songz: </div><div>with album art: </div></div></div></div><div class="flex items-center justify-end gap-3 p-6 border-t border-gray-700"><button class="px-4 py-2 text-gray-400 hover:text-white disabled:text-gray-600 font-medium transition-colors">cancel</button><button class="px-6 py-2 bg-magenta-500 hover:bg-magenta-600 disabled:bg-magenta-400 text-white font-medium transition-colors flex items-center gap-2">'),$s=et('<div class=text-center><svg class="w-16 h-16 text-gray-400 mx-auto mb-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg><p class="text-gray-400 text-sm">no cover image'),Cs=et('<img class="w-full h-full object-cover">'),Es=et('<button class="aspect-square overflow-hidden bg-gray-700 hover:ring-2 hover:ring-magenta-500 transition-all">'),As=et('<div class="w-full h-full flex items-center justify-center"><svg class="w-6 h-6 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3">'),Is=et('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin">');function zs(t){const[n,e]=rt(),[o,s]=rt(),[a,i]=rt(),[r,c]=rt(),[h,m]=rt(!1),[g,v]=rt(null);be(()=>{if(t.isOpen&&t.playlist&&t.playlist.imageData&&t.playlist.imageType){e(t.playlist.imageData),s(t.playlist.thumbnailData),i(t.playlist.imageType);const S=t.playlist.thumbnailData||t.playlist.imageData,A=Wt(S,t.playlist.imageType);c(A)}});const u=async S=>{const C=S.target.files?.[0];if(!C)return;const U=Pr(C);if(!U.valid){v(U.error||"invalid image file");return}try{m(!0),v(null);const E=await $n(C);if(E.success&&E.thumbnailData&&E.imageData){const M=r();M&&URL.revokeObjectURL(M),e(E.imageData),s(E.thumbnailData),i(C.type);const z=Wt(E.thumbnailData,C.type);c(z)}else v(E.error||"failed to process image")}catch(E){v("error uploading image"),console.error("Image upload error:",E)}finally{m(!1)}},w=()=>{},f=async()=>{try{m(!0),v(null);const S={imageData:n(),thumbnailData:o(),imageType:a(),updatedAt:Date.now()};await _r(t.playlist.id,S);const{image:A,...C}=t.playlist,U={...C,...S};t.onSave(U),t.onClose()}catch(S){v("failed to save"),console.error("Save error:",S)}finally{m(!1)}},y=()=>{const S=r();S&&URL.revokeObjectURL(S),v(null),t.onClose()},p=()=>{const S=r();S&&URL.revokeObjectURL(S),e(void 0),s(void 0),i(void 0),c(void 0)};if(Ht(()=>{if(t.isOpen){const S=A=>{A.key==="Escape"&&y()};document.addEventListener("keydown",S),te(()=>document.removeEventListener("keydown",S))}}),!t.isOpen)return null;const b=t.playlistSongs.filter(S=>S.imageType&&(S.imageData||S.thumbnailData));return(()=>{var S=Ss(),A=S.firstChild,C=A.firstChild,U=C.firstChild,E=U.nextSibling,M=C.nextSibling,z=M.firstChild,T=z.firstChild,J=z.nextSibling,x=J.firstChild,L=x.firstChild,d=J.nextSibling,j=d.firstChild,ot=j.nextSibling,Z=ot.firstChild;Z.firstChild;var ct=Z.nextSibling;ct.firstChild;var Y=ct.nextSibling;Y.firstChild;var lt=M.nextSibling,F=lt.firstChild,P=F.nextSibling;return E.$$click=y,X(T,st(ft,{get when(){return r()},get fallback(){return $s()},get children(){var N=ys();return yt(()=>At(N,"src",r())),N}})),L.addEventListener("change",u),X(J,st(ft,{get when(){return!1},get children(){var N=vs(),tt=N.firstChild,V=tt.nextSibling;return V.nextSibling,N.$$click=w,X(N,()=>b.length,V),yt(()=>N.disabled=h()),N}}),null),X(J,st(ft,{get when(){return n()},get children(){var N=bs();return N.$$click=p,yt(()=>N.disabled=h()),N}}),null),X(M,st(ft,{get when(){return b.length>0},get children(){var N=_s(),tt=N.firstChild;return X(tt,()=>b.slice(0,8).map(V=>(()=>{var dt=Es();return dt.$$click=()=>{},X(dt,st(ft,{get when(){return V.imageType&&(V.imageData||V.thumbnailData)},get fallback(){return As()},get children(){var at=Cs();return yt(ut=>{var ht=Wt(V.thumbnailData||V.imageData,V.imageType),wt=V.title;return ht!==ut.e&&At(at,"src",ut.e=ht),wt!==ut.t&&At(at,"alt",ut.t=wt),ut},{e:void 0,t:void 0}),at}})),yt(at=>{var ut=h(),ht=`${V.title} - ${V.artist}`;return ut!==at.e&&(dt.disabled=at.e=ut),ht!==at.t&&At(dt,"title",at.t=ht),at},{e:void 0,t:void 0}),dt})())),X(N,st(ft,{get when(){return b.length>8},get children(){var V=ws(),dt=V.firstChild,at=dt.nextSibling;return at.nextSibling,X(V,()=>b.length-8,at),V}}),null),N}}),d),X(Z,()=>t.playlist.title,null),X(ct,()=>t.playlist.songIds.length,null),X(Y,()=>b.length,null),X(M,st(ft,{get when(){return g()},get children(){var N=xs(),tt=N.firstChild;return X(tt,g),N}}),null),F.$$click=y,P.$$click=f,X(P,st(ft,{get when(){return!h()},get fallback(){return Is()},get children(){return ks()}}),null),X(P,()=>h()?"saving...":"save cover",null),yt(N=>{var tt=h(),V=h(),dt=h(),at=h();return tt!==N.e&&(E.disabled=N.e=tt),V!==N.t&&(L.disabled=N.t=V),dt!==N.a&&(F.disabled=N.a=dt),at!==N.o&&(P.disabled=N.o=at),N},{e:void 0,t:void 0,a:void 0,o:void 0}),S})()}Ae(["click"]);const[Qt,Kt]=rt(null),_e=new Set;function Nr(t,n,e,o,s,a="audio/mpeg"){const i={id:t.id,title:t.title,artist:t.artist,album:t.album,duration:t.duration,position:n,mimeType:a,originalFilename:t.originalFilename,fileSize:t.fileSize,audioData:s,blobUrl:void 0,file:void 0,imageData:void 0,thumbnailData:void 0,imageType:void 0,createdAt:Date.now(),updatedAt:Date.now(),playlistId:e,standaloneFilePath:o};return t.imageExtension&&t.imageMimeType&&(i.imageType=t.imageMimeType,i.needsImageLoad=!0,i.imageFilePath=`data/${t.safeFilename?.replace(/\.[^.]+$/,"")||t.originalFilename?.replace(/\.[^.]+$/,"")}-cover${t.imageExtension}`),i}function Ts(t){return t.standaloneFilePath&&t.mimeType?!0:!!(t.audioData&&t.audioData.byteLength>0&&t.mimeType)}async function Ds(t,n,e){const o=[];for(let a=0;a<e.songs.length;a++){const i=e.songs[a],r=n.find(g=>g.id===i.id),c=`data/${i.safeFilename||i.originalFilename}`;Kt({current:a+1,total:e.songs.length,currentSong:i.title,phase:"updating"});let h;!r||!Ts(r)||r.mimeType!==i.mimeType||!r.standaloneFilePath||r.standaloneFilePath!==c?h=Nr(i,a,t.id,c,void 0,i.mimeType||"audio/mpeg"):(h={...r,title:i.title,artist:i.artist,album:i.album,standaloneFilePath:c,updatedAt:Date.now()},i.imageExtension&&i.imageMimeType&&(h.imageType=i.imageMimeType,h.needsImageLoad=!0,h.imageFilePath=`data/${i.safeFilename?.replace(/\.[^.]+$/,"")||i.originalFilename?.replace(/\.[^.]+$/,"")}-cover${i.imageExtension}`)),await Ut({dbName:It,storeName:xt,key:h.id,updateFn:()=>h}),o.push(h)}const s={...t,title:e.playlist.title,description:e.playlist.description,songIds:e.songs.map(a=>a.id),updatedAt:Date.now()};return e.playlist.imageExtension&&e.playlist.imageMimeType&&(s.imageType=e.playlist.imageMimeType,s.needsImageLoad=!0,s.imageFilePath=`data/playlist-cover${e.playlist.imageExtension}`),await Ut({dbName:It,storeName:Dt,key:s.id,updateFn:()=>s}),{updatedPlaylist:s,updatedSongs:o}}async function Ls(t){const n={id:t.playlist.id,title:t.playlist.title,description:t.playlist.description,songIds:[],imageData:void 0,thumbnailData:void 0,imageType:void 0};t.playlist.imageExtension&&t.playlist.imageMimeType&&(n.imageType=t.playlist.imageMimeType,n.needsImageLoad=!0,n.imageFilePath=`data/playlist-cover${t.playlist.imageExtension}`);const e={...n,id:t.playlist.id,createdAt:Date.now(),updatedAt:Date.now(),songIds:[]};await Ut({dbName:It,storeName:Dt,key:e.id,updateFn:()=>e});const o=[],s=[];for(let a=0;a<t.songs.length;a++){const i=t.songs[a],r=`data/${i.safeFilename||i.originalFilename}`,c=Nr(i,a,e.id,r,void 0,i.mimeType||"audio/mpeg");o.push(c),s.push(c.id)}e.songIds=s,await Ut({dbName:It,storeName:Dt,key:e.id,updateFn:()=>e});for(const a of o)await Ut({dbName:It,storeName:xt,key:a.id,updateFn:()=>a});return{playlist:e,songs:o}}async function ir(t,n){try{Kt({current:0,total:t.songs.length,currentSong:"initializing...",phase:"initializing"});const e=await Lt(),o=await e.get(Dt,t.playlist.id);let s,a;if(o){const c=(await e.getAll(xt)).filter(g=>g.playlistId===o.id);Kt({current:0,total:t.songs.length,currentSong:"checking for stale songs...",phase:"checking"});const{updatedPlaylist:h,updatedSongs:m}=await Ds(o,c,t);s=h,a=m}else{const{playlist:r,songs:c}=await Ls(t);s=r,a=c}const i=a.filter(r=>!r.audioData&&!r.standaloneFilePath);i.length>0&&(console.warn(`    ${i.length} songs failed to load audio data:`),i.forEach(r=>console.warn(`      - ${r.title}`)),i.length===a.length&&window.location.protocol!=="file:"?n.setError("All songs failed to load. This usually means the audio files are missing or the playlist needs to be served from a web server."):i.length>0&&window.location.protocol),n.setSelectedPlaylist(s),n.setPlaylistSongs(a),setTimeout(()=>Kt(null),500),setTimeout(()=>Os(s,a,n),1e3)}catch(e){console.error("Error initializing standalone playlist:",e),n.setError("Failed to load standalone playlist"),Kt(null)}}async function Ps(t){try{const e=await(await Lt()).get(xt,t);if(!e)return console.error(`Song ${t} not found in database`),!1;if(e.audioData&&e.audioData.byteLength>0)return!0;if(!e.standaloneFilePath)return console.error(`Song ${t} has no standalone file path`),!1;if(window.location.protocol==="file:")return!0;const o=await fetch(e.standaloneFilePath);if(!o.ok)throw new Error(`Failed to fetch: ${o.status} ${o.statusText}`);const s=await o.arrayBuffer(),a={...e,audioData:s,mimeType:e.mimeType||"audio/mpeg",updatedAt:Date.now()};return await Ut({dbName:It,storeName:xt,key:t,updateFn:()=>a}),!0}catch(n){return console.error(`Error loading standalone song audio data for ${t}:`,n),!1}}async function ar(t){if(!t.standaloneFilePath)return!1;try{const e=await(await Lt()).get(xt,t.id);return!e||window.location.protocol==="file:"?!1:!e.audioData||e.audioData.byteLength===0}catch(n){return console.error(`Error checking song audio data status for ${t.id}:`,n),!!(t.standaloneFilePath&&(!t.audioData||t.audioData.byteLength===0))}}async function Os(t,n,e){if(window.location.protocol!=="file:")try{if(t.needsImageLoad&&t.imageFilePath&&!t.imageData){const s=await sr(t,!0);s&&e.setSelectedPlaylist(s)}let o=!1;for(const s of n)s.needsImageLoad&&s.imageFilePath&&!s.imageData&&await sr(s,!1)&&(o=!0);if(o)try{const i=(await(await Lt()).getAll(xt)).filter(r=>t.songIds.includes(r.id)).sort((r,c)=>{const h=t.songIds.indexOf(r.id),m=t.songIds.indexOf(c.id);return h-m});e.setPlaylistSongs(i)}catch(s){console.warn("Error refreshing playlist songs after image loading:",s)}}catch(o){console.warn("Error loading standalone images:",o)}}async function sr(t,n){try{if(t.imageData&&t.imageData.byteLength>0)return;if(_e.has(t.imageFilePath))return null;_e.add(t.imageFilePath);const e=await fetch(t.imageFilePath);if(!e.ok)return console.warn(`Failed to load image: ${t.imageFilePath}`),_e.delete(t.imageFilePath),null;const o=await e.arrayBuffer(),s={...t,imageData:o,needsImageLoad:!1,updatedAt:Date.now()};return await Ut({dbName:It,storeName:n?Dt:xt,key:t.id,updateFn:()=>s}),n||Ye({songId:t.id,type:"edit",specificOnly:!0}),_e.delete(t.imageFilePath),s}catch(e){return console.warn(`Error loading image for ${t.id}:`,e),_e.delete(t.imageFilePath),null}}function Us(){Kt(null)}var Fs=et('<div class="absolute inset-0 bg-cover bg-top bg-no-repeat transition-opacity duration-1000 ease-out">'),Bs=et('<div class="absolute inset-0 bg-black/20">'),Rs=et('<div class="absolute inset-0 opacity-5">'),Ms=et('<div class="fixed bottom-0 left-0 right-0 bg-gray-900/95 backdrop-blur-sm border-t border-gray-700 p-3"><div class="max-w-4xl mx-auto"><div class="flex items-center gap-4"><div class=w-1/2><div class="flex items-center justify-between text-xs text-gray-300 mb-1"><span></span><span> / </span></div><div class="w-full bg-gray-700 rounded-full h-1.5"><div class="bg-magenta-500 h-1.5 rounded-full transition-all duration-300"></div></div></div><div class="text-right min-w-0 flex-1"><div class="text-xs text-gray-300 truncate max-w-48"></div><div class="text-xs text-gray-500">'),js=et("<div><div><div></div></div><div>"),Ns=et('<div class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm"><div class=text-center><div class="text-4xl mb-6 font-bold">drop zone</div><h2 class="text-4xl font-light mb-4 text-magenta-400">drop your filez here</h2><p class="text-xl text-gray-300">release to add filez to '),Ws=et('<div class="fixed top-4 right-4 z-50"><div class="bg-red-500 text-white px-6 py-3 shadow-lg max-w-sm"><div class="flex items-center"><div class=flex-shrink-0><svg class="w-5 h-5"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg></div><div class=ml-3><p class="text-sm font-medium"></p></div><div class="ml-4 flex-shrink-0"><button class="text-white hover:text-gray-200 focus:outline-none">'),Zs=et('<div class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50"><button class="absolute top-6 right-4 z-51 hover:text-magenta-500"title="close (ESC)"><svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Hs=et('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-gray-800 p-6 border border-gray-600 max-w-md w-full mx-4"><h3 class="text-lg font-semibold text-white mb-4">delete playlist</h3><p class="text-gray-300 mb-6">are you sure you want to delete "<!>"? no take-backz!</p><div class="flex justify-end gap-3"><button class="px-4 py-2 text-gray-300 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors">cancel</button><button class="px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded transition-colors">delete'),Vs=et('<div><div><button class="p-2 text-magenta-200 hover:text-magenta-500 hover:bg-gray-800 transition-colors bg-black bg-opacity-80"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">'),qs=et('<div class="flex items-center justify-center h-full"><div class=text-center><div class="inline-block animate-spin rounded-full h-8 w-8 mb-4"></div><p class=text-lg>loading playlistz...'),or=et('<img alt="playlist cover"class="w-full h-full object-cover">'),Gs=et('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">'),Ks=et('<button class="p-2 text-gray-400 hover:text-green-400 hover:bg-gray-700 transition-colors bg-black bg-opacity-80 disabled:opacity-50 disabled:cursor-not-allowed"title="download playlist as zip">'),Ys=et('<button class="ml-4 p-2 text-gray-400 hover:text-magenta-400 hover:bg-gray-700 transition-colors bg-black bg-opacity-80 disabled:opacity-50 disabled:cursor-not-allowed"title="download songz for offline use">'),Js=et('<div><div><div><button class="w-full h-full overflow-hidden hover:bg-gray-900 flex items-center justify-center transition-colors group"title="view playlist images"></button></div><div class="flex items-center gap-4 w-full"><div class=flex-1><div class="bg-black bg-opacity-80"><input type=text class="text-3xl font-bold text-white bg-transparent border-none outline-none focus:bg-gray-800 px-2 py-1 rounded w-full"placeholder="playlist title"></div><div class="mt-2 bg-black bg-opacity-80"><input type=text placeholder="add description..."class="text-white bg-transparent border-none focus:bg-gray-800 px-2 py-1 rounded w-full"></div><div><div class="flex items-center gap-2"><button class="p-2 text-gray-400 hover:text-white hover:bg-gray-700 transition-colors bg-black bg-opacity-80"title="change playlist cover"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button><button class="p-2 text-gray-400 hover:text-red-400 hover:bg-gray-700 transition-colors bg-black bg-opacity-80"title="delete playlist"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div><div><span class="bg-black bg-opacity-80 p-2"> song</span><span class="bg-black bg-opacity-80 p-2"></span></div></div></div></div><div><button class="w-32 h-32 overflow-hidden hover:bg-gray-900 flex items-center justify-center transition-colors group"title="view playlist imagez"></button></div></div><div><div>'),lr=et('<div class=text-center><svg width=100 height=100 viewBox="0 0 100 100"fill=none xmlns=http://www.w3.org/2000/svg><path d="M50 81L25 31L75 31L60.7222 68.1429L50 81Z"fill=#FF00FF>'),cr=et('<svg class="w-4 h-4 animate-spin"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),Xs=et('<div class="text-center py-16"><div class="text-gray-400 text-xl mb-4">no songz yet</div><p class="text-gray-400 mb-4">drag and drop audio filez (or a .zip file!) here to add them to this playlist</p><div class="text-xs text-gray-500 space-y-1"><div>playlist id: </div><div>supported formatz: mp3, wav, flac, aiff, ogg, mp4'),Qs=et('<div class="text-white text-center"><p class="text-lg mb-2">no imagez available</p><p class="text-sm text-gray-400">add a playlist cover or songz with album art'),to=et('<div class="relative w-full h-full flex items-center justify-center p-4"><button class="absolute inset-0 cursor-pointer z-50"title="next image"></button><img class="w-full h-full object-contain pointer-events-none"><div class="absolute top-4 right-16 text-white text-center bg-black bg-opacity-50 p-3"><div class="text-sm font-medium"> '),eo=et('<span class="text-xs text-gray-300 mt-1">(<!> of <!>)');typeof window<"u"&&window.STANDALONE_MODE&&(window.initializeStandalonePlaylist=function(t){window.DEFERRED_PLAYLIST_DATA=t});function no(){const[t,n]=rt(null),[e,o]=rt(!1),[s,a]=rt(!1),[i,r]=rt(null),[c,h]=rt(window.STANDALONE_MODE||!1),[m,g]=rt(!1),[v,u]=rt(null),[w,f]=rt(null),[y,p]=rt(!1),[b,S]=rt(!1),[A,C]=rt(!1),[U,E]=rt([]),[M,z]=rt(0),[T,J]=rt(!1),[x,L]=rt(!1),[d,j]=rt(!1),[ot,Z]=rt([]);be(()=>{const B=Li().subscribe(R=>{Z([...R]);const Q=t();if(Q){const H=R.find(K=>K.id===Q.id);H&&JSON.stringify(H.songIds)!==JSON.stringify(Q.songIds)&&n(H)}});te(B)}),Ht(async()=>{const $=t();if($&&$.songIds.length>0)try{const R=(await Se()).filter(Q=>$.songIds.includes(Q.id)).sort((Q,H)=>{const K=$.songIds.indexOf(Q.id),gt=$.songIds.indexOf(H.id);return K-gt});E(R)}catch(B){console.error("error loading playlist songz:",B)}else E([])});const[ct]=rt(new Map);Ht(()=>{const $=Et.currentSong(),B=Et.currentPlaylist(),R=t(),Q=ct();let H=null,K=null;$?.imageType?(K=`song-${$.id}`,Q.has(K)?H=Q.get(K):(H=se($.thumbnailData,$.imageData,$.imageType,"background"),H&&Q.set(K,H))):$&&B?.imageType?(K=`playlist-${B.id}`,Q.has(K)?H=Q.get(K):(H=se(B.thumbnailData,B.imageData,B.imageType,"background"),H&&Q.set(K,H))):R?.imageType&&(K=`playlist-${R.id}`,Q.has(K)?H=Q.get(K):(H=se(R.thumbnailData,R.imageData,R.imageType,"background"),H&&Q.set(K,H))),v()!==H&&u(H)}),Ht(()=>{if(i()){const B=setTimeout(()=>r(null),5e3);return()=>clearTimeout(B)}}),be(async()=>{window.initializeStandalonePlaylist=$=>{ir($,{setSelectedPlaylist:n,setPlaylistSongs:E,setSidebarCollapsed:h,setError:r})},window.DEFERRED_PLAYLIST_DATA&&(await ir(window.DEFERRED_PLAYLIST_DATA,{setSelectedPlaylist:n,setPlaylistSongs:E,setSidebarCollapsed:h,setError:r}),delete window.DEFERRED_PLAYLIST_DATA);try{await Lt();try{const B=t();await Ea(B?.title,B||void 0)}catch(B){console.warn("offline support initialization failed:",B)}a(!0);const $=()=>{const B=window.innerWidth<900;g(B),B&&t()&&h(!0)};$(),window.addEventListener("resize",$),te(()=>{window.removeEventListener("resize",$),Us()})}catch($){r($ instanceof Error?$.message:"failed to initialize")}}),Ht(()=>{const $=t();$&&$a($.title,$)});const Y=$=>{b()?$.key==="Escape"?S(!1):$.key==="ArrowLeft"?($.preventDefault(),D()):$.key==="ArrowRight"&&($.preventDefault(),W()):A()&&$.key==="Escape"&&C(!1)};Ht(()=>{(b()||A())&&(document.addEventListener("keydown",Y),te(()=>document.removeEventListener("keydown",Y)))}),te(()=>{Xi(),ga();const $=ct();$.forEach(R=>{R.startsWith("blob:")&&URL.revokeObjectURL(R)}),$.clear();const B=v();B&&B.startsWith("blob:")&&URL.revokeObjectURL(B)});const lt=$=>{if(!$)return{type:"unknown",hasAudio:!1};const B=Array.from($.items||[]),R=Array.from($.files||[]);return B.some(K=>K.type==="text/plain")?{type:"song-reorder",hasAudio:!1}:R.filter(K=>K.type.startsWith("audio/")).length>0?{type:"audio-files",hasAudio:!0}:R.length>0?{type:"non-audio-files",hasAudio:!1}:{type:"unknown",hasAudio:!1}},F=$=>{$.preventDefault(),$.stopPropagation(),lt($.dataTransfer).type==="audio-files"&&o(!0)},P=$=>{$.preventDefault(),$.stopPropagation()},N=$=>{$.preventDefault(),$.stopPropagation(),$.target===$.currentTarget&&o(!1)},tt=async $=>{$.preventDefault(),$.stopPropagation(),o(!1);const B=lt($.dataTransfer);if(B.type==="song-reorder")return;const R=$.dataTransfer?.files;if(!R)return;const Q=Array.from(R).filter(K=>K.type==="application/zip"||K.name.toLowerCase().endsWith(".zip"));if(Q.length>0)try{for(const K of Q){const{playlist:gt,songs:mt}=await wa(K);if(ot().find(nt=>nt.title===gt.title&&nt.songIds.length===mt.length)){r(`playlist "${gt.title}" already existz`),setTimeout(()=>r(null),3e3);continue}const vt=await rn(gt);for(const nt of mt){const St=new Blob([nt.audioData],{type:nt.mimeType}),zt=new File([St],nt.originalFilename||`${nt.artist} - ${nt.title}`,{type:nt.mimeType});await Hn(vt.id,zt,{title:nt.title,artist:nt.artist,album:nt.album,duration:nt.duration,imageData:nt.imageData,imageType:nt.imageType})}n(vt)}return}catch(K){console.error("error processing ZIP file:",K),r("failed to import playlist from ZIP file"),setTimeout(()=>r(null),3e3);return}const H=fa(R);if(H.length===0){B.type==="non-audio-files"?r("only audio filez and ZIP playlist filez can be added. supported formatz: MP3, WAV, M4A, FLAC, OGG, ZIP"):r("no audio filez or ZIP playlist filez found in the dropped item(z)"),setTimeout(()=>r(null),3e3);return}try{let K=t();K||(K=await rn({title:"new playlist",description:`created from ${H.length} dropped file${H.length>1?"z":""}`,songIds:[]}),n(K));const gt=await ua(H),mt=gt.filter(nt=>nt.success);for(const nt of mt)nt.song&&await Hn(K.id,nt.song.file,{title:nt.song.title,artist:nt.song.artist,album:nt.song.album,duration:nt.song.duration,imageData:nt.song.imageData,imageType:nt.song.imageType});const vt=ot().find(nt=>nt.id===K.id);if(vt&&n(vt),gt.some(nt=>!nt.success)){const nt=gt.filter(St=>!St.success).length;r(`${nt} file${nt>1?"z":""} could not be processed`)}}catch(K){console.error("Error handling dropped files:",K),r("failed to process dropped files")}};Ht(()=>{if(!s())return;const $=document.documentElement;$.addEventListener("dragenter",F),$.addEventListener("dragover",P),$.addEventListener("dragleave",N),$.addEventListener("drop",tt),te(()=>{$.removeEventListener("dragenter",F),$.removeEventListener("dragover",P),$.removeEventListener("dragleave",N),$.removeEventListener("drop",tt)})});const V=async()=>{try{const $=await rn({title:"new playlist",description:"",songIds:[]});n($),m()&&h(!0)}catch($){console.error(" Error creating playlist:",$),r($ instanceof Error?$.message:"failed to create playlist")}};let dt;const at=async $=>{const B=t();if(!B)return;const R={...B,...$};n(R),clearTimeout(dt),dt=window.setTimeout(async()=>{try{await _r(B.id,$)}catch(Q){console.error(" Failed to save playlist:",Q),r("failed to save changes")}},1e3)},ut=async $=>{try{if(Et.currentSong()?.id===$.id)Ve();else{ta($.id);const R=t();R?await He($,R):await He($)}}catch(B){console.error(" Error playing song:",B),r("failed to play song")}},ht=async $=>{const B=t();if(B)try{await Ui(B.id,$);const R=Et.currentPlaylist();if(R&&R.id===B.id){const H=(await Vn()).find(K=>K.id===B.id);H&&await Gn(H)}}catch(R){console.error(" Error removing song:",R),r("failed to remove song")}},wt=async $=>{f($)},bt=async $=>{E(R=>R.map(Q=>Q.id===$.id?$:Q));const B=t();if(B&&B.songIds.length>0)try{const Q=(await Se()).filter(H=>B.songIds.includes(H.id)).sort((H,K)=>{const gt=B.songIds.indexOf(H.id),mt=B.songIds.indexOf(K.id);return gt-mt});E(Q)}catch(R){console.error("error refreshing songs:",R)}},Pt=$=>{n($)},Ft=async($,B)=>{const R=t();if(R)try{await Di(R.id,$,B);const H=(await Vn()).find(K=>K.id===R.id);if(H){n(H);const K=Et.currentPlaylist();K&&K.id===H.id&&await Gn(H)}}catch(Q){console.error("error reordering songs:",Q),r("failed to reorder songz")}},l=()=>{Ve()},W=()=>{const $=k();$.length>0&&z(B=>(B+1)%$.length)},D=()=>{const $=k();$.length>0&&z(B=>(B-1+$.length)%$.length)},k=()=>{const $=t(),B=[];if($?.imageType){const R=se($.thumbnailData,$.imageData,$.imageType,"modal");R&&B.push({url:R,title:$.title})}return U().forEach(R=>{if(R.imageType){const Q=se(R.thumbnailData,R.imageData,R.imageType,"modal");Q&&B.push({url:Q,title:R.title})}}),B},_=async()=>{const $=t();if($)try{await zi($.id),n(null),C(!1)}catch(B){console.error("rrror deleting playlist:",B),r("failed to delete playlist")}},I=async()=>{const $=t();if($){J(!0);try{await va($,{includeMetadata:!0,includeImages:!0,generateM3U:!0,includeHTML:!0})}catch{r("failed to download playlist")}finally{J(!1)}}},q=async()=>{const $=t();if($&&$.songIds.length>0)try{const R=(await Se()).filter(Q=>$.songIds.includes(Q.id)).sort((Q,H)=>{const K=$.songIds.indexOf(Q.id),gt=$.songIds.indexOf(H.id);return K-gt});E(R)}catch(B){console.error("Error refreshing playlist songs:",B)}},G=async()=>{const $=U();if($.length===0){j(!1);return}if(window.location.protocol==="file:"){j(!0);return}let B=!0;for(const R of $)if(await ar(R)){B=!1;break}j(B)};Ht(()=>{U().length>0&&G()});const O=async()=>{const $=t(),B=U();if(!(!$||B.length===0)){L(!0),Kt({current:0,total:B.length,currentSong:"preparing...",phase:"checking"});try{let R=0,Q=0,H=0;const K=B.length;for(let gt=0;gt<B.length;gt++){const mt=B[gt];if(Kt({current:gt+1,total:K,currentSong:mt.title,phase:"updating"}),await ar(mt))try{if(await Ps(mt.id))H++,R++;else{Q++;continue}}catch{Q++;continue}else R++;if(!window.STANDALONE_MODE){if(mt.blobUrl)try{await er(mt.blobUrl,mt.title)}catch{}else if(mt.audioData)try{const it=new Blob([mt.audioData],{type:mt.mimeType||"audio/mpeg"}),vt=URL.createObjectURL(it);await er(vt,mt.title),URL.revokeObjectURL(vt)}catch{}}}H>0&&(await q(),await G()),Q>0&&R===0?r(`failed to cache any songz for offline use (${Q} of ${K} failed)`):Q>0?console.warn(`cached ${R} of ${K} songz (${Q} failed)`):R>0}catch{r("failed to cache playlist for offline use")}finally{L(!1),setTimeout(()=>Kt(null),500)}}};return(()=>{var $=Vs(),B=$.firstChild,R=B.firstChild,Q=R.firstChild;return X($,st(ft,{get when(){return v()},get children(){return[(()=>{var H=Fs();return H.style.setProperty("filter","blur(3px) contrast(3) brightness(0.4)"),H.style.setProperty("z-index","0"),yt(K=>(K=`url(${v()})`)!=null?H.style.setProperty("background-image",K):H.style.removeProperty("background-image")),H})(),(()=>{var H=Bs();return H.style.setProperty("z-index","1"),H})()]}}),B),X($,st(ft,{get when(){return!v()},get children(){var H=Rs();return H.style.setProperty("background-image","radial-gradient(circle at 25% 25%, #ff00ff 2px, transparent 2px)"),H.style.setProperty("background-size","50px 50px"),H.style.setProperty("z-index","0"),H}}),B),X($,st(ft,{get when(){return Qt()},get children(){var H=Ms(),K=H.firstChild,gt=K.firstChild,mt=gt.firstChild,it=mt.firstChild,vt=it.firstChild,nt=vt.nextSibling,St=nt.firstChild,zt=it.nextSibling,Tt=zt.firstChild,Rt=mt.nextSibling,Bt=Rt.firstChild,jt=Bt.nextSibling;return H.style.setProperty("z-index","9999"),X(vt,()=>Qt().phase),X(nt,()=>Qt().current,St),X(nt,()=>Qt().total,null),X(Bt,()=>Qt().currentSong),X(jt,()=>Qt().phase==="initializing"?"loading...":"updating..."),yt(Zt=>(Zt=`${Qt().current/Qt().total*100}%`)!=null?Tt.style.setProperty("width",Zt):Tt.style.removeProperty("width")),H}}),B),X($,st(ft,{get when(){return s()},get fallback(){return qs()},get children(){var H=js(),K=H.firstChild,gt=K.firstChild,mt=K.nextSibling;return H.style.setProperty("z-index","2"),X(gt,st(Za,{get playlists(){return ot()},get selectedPlaylist(){return t()},onPlaylistSelect:it=>{n(it),m()&&h(!0)},onCreatePlaylist:V,isLoading:!1,onCollapse:()=>h(!0),get collapsed(){return c()},get isMobile(){return m()}})),X(mt,st(ft,{get when(){return t()},children:it=>(()=>{var vt=Js(),nt=vt.firstChild,St=nt.firstChild,zt=St.firstChild,Tt=St.nextSibling,Rt=Tt.firstChild,Bt=Rt.firstChild,jt=Bt.firstChild,Zt=Bt.nextSibling,ne=Zt.firstChild,Nt=Zt.nextSibling,Vt=Nt.firstChild,Cn=Vt.firstChild,En=Cn.nextSibling,An=Vt.nextSibling,Te=An.firstChild,Wr=Te.firstChild,Zr=Te.nextSibling,In=Tt.nextSibling,zn=In.firstChild,Tn=nt.nextSibling,Dn=Tn.firstChild;return zt.$$click=()=>{z(0),S(!0)},X(zt,st(ft,{get when(){return Mt(()=>!!it().imageData)()&&it().imageType},get fallback(){return lr()},get children(){var pt=or();return yt(()=>At(pt,"src",Wt(it().imageData,it().imageType))),pt}})),jt.$$input=pt=>{at({title:pt.currentTarget.value})},ne.$$input=pt=>{at({description:pt.currentTarget.value})},Cn.$$click=()=>p(!0),X(Vt,st(ft,{get when(){return window.location.protocol!=="file:"},get children(){var pt=Ks();return pt.$$click=I,X(pt,st(ft,{get when(){return!T()},get fallback(){return cr()},get children(){return Gs()}})),yt(()=>pt.disabled=T()),pt}}),En),En.$$click=()=>C(!0),X(Vt,st(ft,{get when(){return window.STANDALONE_MODE&&window.location.protocol!=="file:"},get children(){return st(ft,{get when(){return!d()},get children(){var pt=Ys();return pt.$$click=O,X(pt,st(ft,{get when(){return!x()},get fallback(){return cr()},children:"SAVE OFFLINE"})),yt(()=>pt.disabled=x()||U().length===0),pt}})}}),null),X(Te,()=>it().songIds?.length||0,Wr),X(Te,()=>(it().songIds?.length||0)!==1?"z":"",null),X(Zr,()=>{const pt=U().reduce((ae,De)=>ae+(De.duration||0),0),qt=Math.floor(pt/3600),re=Math.floor(pt%3600/60),ie=Math.floor(pt%60);return qt>0?`${qt}:${re.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`:`${re}:${ie.toString().padStart(2,"0")}`}),zn.$$click=()=>{z(0),S(!0)},X(zn,st(ft,{get when(){return Mt(()=>!!it().imageData)()&&it().imageType},get fallback(){return lr()},get children(){var pt=or();return yt(()=>At(pt,"src",Wt(it().imageData,it().imageType))),pt}})),X(Dn,st(ft,{get when(){return Mt(()=>!!it().songIds)()&&it().songIds.length>0},get fallback(){return(()=>{var pt=Xs(),qt=pt.firstChild,re=qt.nextSibling,ie=re.nextSibling,ae=ie.firstChild;return ae.firstChild,X(ae,()=>it().id,null),pt})()},get children(){return st(mr,{get each(){return it().songIds},children:(pt,qt)=>st(ss,{songId:pt,get index(){return qt()},showRemoveButton:!0,onRemove:ht,onPlay:ut,onPause:l,onEdit:wt,onReorder:Ft})})}})),yt(pt=>{var qt=`flex-1 flex flex-col ${m()?"p-2":"h-full p-6"}`,re=`flex items-center justify-between ${m()?"p-2 flex-col":"mb-2 p-6"}`,ie=`${m()?"":"hidden"}`,ae=`mt-3 flex justify-between ${m()?"gap-3":""}`,De=`flex items-center text-sm ${m()?"flex-wrap justify-end":""}`,Ln=`${m()?"hidden":"ml-4"}`,Pn=`${m()?"flex-1":"flex-1 overflow-y-auto"}`,On=`${m()?"space-y-1":"p-6 space-y-2"}`;return qt!==pt.e&&_t(vt,pt.e=qt),re!==pt.t&&_t(nt,pt.t=re),ie!==pt.a&&_t(St,pt.a=ie),ae!==pt.o&&_t(Nt,pt.o=ae),De!==pt.i&&_t(An,pt.i=De),Ln!==pt.n&&_t(In,pt.n=Ln),Pn!==pt.s&&_t(Tn,pt.s=Pn),On!==pt.h&&_t(Dn,pt.h=On),pt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),yt(()=>jt.value=it().title),yt(()=>ne.value=it().description||""),vt})()})),yt(it=>{var vt=`relative flex ${m()?"min-h-screen":"h-full"}`,nt=`transition-all duration-300 ease-out ${m()?"":"overflow-hidden"} ${c()?"w-0 opacity-0":m()?"w-full opacity-100":"w-80 opacity-100"}`,St=`${m()?"w-full":"w-80"} h-full transform transition-transform duration-300 ease-out ${c()?"-translate-x-full":"translate-x-0"}`,zt=`${m()&&!c()?"hidden":"flex-1"} flex flex-col ${m()?"":"h-full"}`;return vt!==it.e&&_t(H,it.e=vt),nt!==it.t&&_t(K,it.t=nt),St!==it.a&&_t(gt,it.a=St),zt!==it.o&&_t(mt,it.o=zt),it},{e:void 0,t:void 0,a:void 0,o:void 0}),H}}),B),R.$$click=()=>h(H=>!H),X($,st(ft,{get when(){return e()},get children(){var H=Ns(),K=H.firstChild,gt=K.firstChild,mt=gt.nextSibling,it=mt.nextSibling;return it.firstChild,X(it,()=>t()?.title||"a new playlist",null),H}}),null),X($,st(ft,{get when(){return i()},get children(){var H=Ws(),K=H.firstChild,gt=K.firstChild,mt=gt.firstChild,it=mt.nextSibling,vt=it.firstChild,nt=it.nextSibling,St=nt.firstChild;return X(vt,i),St.$$click=()=>r(null),H}}),null),X($,st(ft,{get when(){return w()},get children(){return st(ps,{get song(){return w()},get isOpen(){return!!w()},onClose:()=>f(null),onSave:bt})}}),null),X($,st(ft,{get when(){return y()},get children(){return st(zs,{get playlist(){return t()},get playlistSongs(){return U()},get isOpen(){return y()},onClose:()=>p(!1),onSave:Pt})}}),null),X($,st(ft,{get when(){return b()},get children(){var H=Zs(),K=H.firstChild;return K.$$click=()=>S(!1),X(H,()=>{const gt=k(),mt=gt[M()];return mt?(()=>{var it=to(),vt=it.firstChild,nt=vt.nextSibling,St=nt.nextSibling,zt=St.firstChild,Tt=zt.firstChild;return vt.$$click=W,X(zt,()=>mt.title,Tt),X(zt,(()=>{var Rt=Mt(()=>gt.length>1);return()=>Rt()&&(()=>{var Bt=eo(),jt=Bt.firstChild,Zt=jt.nextSibling,ne=Zt.nextSibling,Nt=ne.nextSibling;return Nt.nextSibling,X(Bt,M,Zt),X(Bt,()=>gt.length-1,Nt),Bt})()})(),null),yt(Rt=>{var Bt=mt.url,jt=mt.title;return Bt!==Rt.e&&At(nt,"src",Rt.e=Bt),jt!==Rt.t&&At(nt,"alt",Rt.t=jt),Rt},{e:void 0,t:void 0}),it})():Qs()},null),H}}),null),X($,st(ft,{get when(){return A()},get children(){var H=Hs(),K=H.firstChild,gt=K.firstChild,mt=gt.nextSibling,it=mt.firstChild,vt=it.nextSibling;vt.nextSibling;var nt=mt.nextSibling,St=nt.firstChild,zt=St.nextSibling;return X(mt,()=>t()?.title,vt),St.$$click=()=>C(!1),zt.$$click=_,H}}),null),yt(H=>{var K=`relative bg-black text-white ${m()?"min-h-screen":"h-screen overflow-hidden"}`,gt=`fixed "top-0" inset-0 bg-black bg-opacity-80 flex items-center justify-center z-10 transition-all duration-300 ease-in-out w-10 h-10 ${c()?"left-0":m()?"left-[calc(100vw-40px)]":"left-72"}`,mt=`${c()?"show":"hide"} playlist sidebar`,it=`w-8 h-8 transform transition-transform duration-600 ease-in-out ${c()?"rotate-0":"rotate-180"}`;return K!==H.e&&_t($,H.e=K),gt!==H.t&&_t(B,H.t=gt),mt!==H.a&&At(R,"title",H.a=mt),it!==H.o&&At(Q,"class",H.o=it),H},{e:void 0,t:void 0,a:void 0,o:void 0}),$})()}Ae(["click","input"]);function ro(t){return st(no,{})}customElements.define("freqhole-playlistz",class extends HTMLElement{connectedCallback(){si(()=>st(ro,{}),this)}});

  </script>
</body>
</html>